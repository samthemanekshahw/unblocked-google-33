<!DOCTYPE html>

<html>
<head>
<script>(() => {
	var e = function(e) {
			var n = RegExp("[?&]" + e + "=([^&]*)").exec(window.location.search);
			return n && decodeURIComponent(n[1].replace(/\+/g, " "))
		},
		n = "kids" === e("tag"),
		t = new(function() {
			function e() {
				var e = this;
				this.queue = [], this.init = function(n) {
					return void 0 === n && (n = {}), new Promise((function(t, o) {
						e.enqueue("init", n, t, o)
					}))
				}, this.rewardedBreak = function() {
					return new Promise((function(e) {
						e(!1)
					}))
				}, this.noArguments = function(n) {
					return function() {
						e.enqueue(n)
					}
				}, this.oneArgument = function(n) {
					return function(t) {
						e.enqueue(n, t)
					}
				}, this.handleAutoResolvePromise = function() {
					return new Promise((function(e) {
						e()
					}))
				}, this.throwNotLoaded = function() {
					console.debug("PokiSDK is not loaded yet. Not all methods are available.")
				}
			}
			return e.prototype.enqueue = function(e, t, o, i) {
				var r = {
					fn: e,
					options: t,
					resolveFn: o,
					rejectFn: i
				};
				n ? i && i() : this.queue.push(r)
			}, e.prototype.dequeue = function() {
				for (var e = function() {
						var e = n.queue.shift(),
							t = e,
							o = t.fn,
							i = t.options;
						"function" == typeof window.PokiSDK[o] ? (null == e ? void 0 : e.resolveFn) || (null == e ? void 0 : e.rejectFn) ? window.PokiSDK[o](i).then((function() {
							for (var n = [], t = 0; t < arguments.length; t++) n[t] = arguments[t];
							"function" == typeof e.resolveFn && e.resolveFn.apply(e, n)
						})).catch((function() {
							for (var n = [], t = 0; t < arguments.length; t++) n[t] = arguments[t];
							"function" == typeof e.rejectFn && e.rejectFn.apply(e, n)
						})) : void 0 !== (null == e ? void 0 : e.fn) && window.PokiSDK[o](i) : console.error("Cannot execute " + e.fn)
					}, n = this; this.queue.length > 0;) e()
			}, e
		}());
	window.PokiSDK = {
		init: t.init,
		initWithVideoHB: t.init,
		customEvent: t.throwNotLoaded,
		commercialBreak: t.handleAutoResolvePromise,
		rewardedBreak: t.rewardedBreak,
		displayAd: t.throwNotLoaded,
		destroyAd: t.throwNotLoaded,
		getLeaderboard: t.handleAutoResolvePromise,
		getSharableURL: function() {
			return new Promise((function(e, n) {
				return n()
			}))
		},
		getURLParam: function(n) {
			return e("gd" + n) || e(n) || ""
		}
	}, ["disableProgrammatic", "gameLoadingStart", "gameLoadingFinished", "gameInteractive", "roundStart", "roundEnd", "muteAd"].forEach((function(e) {
		window.PokiSDK[e] = t.noArguments(e)
	})), ["setDebug", "gameplayStart", "gameplayStop", "gameLoadingProgress", "happyTime", "setPlayerAge", "togglePlayerAdvertisingConsent", "logError", "sendHighscore", "setDebugTouchOverlayController"].forEach((function(e) {
		window.PokiSDK[e] = t.oneArgument(e)
	}));
	var o, i = ((o = window.pokiSDKVersion) || (o = e("ab") || "v2.263.0"), "patch/poki-sdk-" + (n ? "kids" : "core") + "-" + o + ".js"),
		r = document.createElement("script");
	r.setAttribute("src", i), r.setAttribute("type", "text/javascript"), r.setAttribute("crossOrigin", "anonymous"), r.onload = function() {
		return t.dequeue()
	}, document.head.appendChild(r)
})();</script>
<meta charset="utf-8"/>
<title>TAG Unblocked - ClassRoom6x</title>
<meta content="classroom6x.gitlab.io" name="website">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport"/>
<meta content="Scirra Construct" name="generator"/>
<meta content="JetGames" name="author"/>
<meta content="TAG" name="description"/>
<style>{
  "short_name": "ubg235",
  "name": "ubg235 Cloner",  
  "description": "Unblocked Games235 Cloner"
}
</style>
<style>#overlay-extension-img {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 999999;
    pointer-events: none;
    width: 300px;
    opacity: 1;
}
</style>
</meta></head>
<body style="overflow:hidden;">
<script>
        if (location.protocol.substr(0, 4) === "file")
{
	alert("Web exports won't work until you upload them. (When running on the file: protocol, browsers block many features from working for security reasons.)");
}
    </script>
<script>'use strict';self["xmlDomLib"]={};
(function(){var exports=self["xmlDomLib"];function copy(src,dest){for(var p in src)dest[p]=src[p]}function _extends(Class,Super){var pt=Class.prototype;if(!(pt instanceof Super)){function t(){}t.prototype=Super.prototype;t=new t;copy(pt,t);Class.prototype=pt=t}if(pt.constructor!=Class){if(typeof Class!="function")console.error("unknow Class:"+Class);pt.constructor=Class}}var htmlns="http://www.w3.org/1999/xhtml";var NodeType={};var ELEMENT_NODE=NodeType.ELEMENT_NODE=1;var ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=
2;var TEXT_NODE=NodeType.TEXT_NODE=3;var CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4;var ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5;var ENTITY_NODE=NodeType.ENTITY_NODE=6;var PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7;var COMMENT_NODE=NodeType.COMMENT_NODE=8;var DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9;var DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10;var DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11;var NOTATION_NODE=NodeType.NOTATION_NODE=12;
var ExceptionCode={};var ExceptionMessage={};var INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1);var DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);var WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4);var INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=
(ExceptionMessage[5]="Invalid character",5);var NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6);var NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);var NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=
(ExceptionMessage[10]="Attribute in use",10);var INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11);var SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12);var INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13);var NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14);var INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]=
"Invalid access",15);function DOMException(code,message){if(message instanceof Error)var error=message;else{error=this;Error.call(this,ExceptionMessage[code]);this.message=ExceptionMessage[code];if(Error.captureStackTrace)Error.captureStackTrace(this,DOMException)}error.code=code;if(message)this.message=this.message+": "+message;return error}DOMException.prototype=Error.prototype;copy(ExceptionCode,DOMException);function NodeList(){}NodeList.prototype={length:0,item:function(index){return this[index]||
null},toString:function(isHTML,nodeFilter){for(var buf=[],i=0;i<this.length;i++)serializeToString(this[i],buf,isHTML,nodeFilter);return buf.join("")}};function LiveNodeList(node,refresh){this._node=node;this._refresh=refresh;_updateLiveList(this)}function _updateLiveList(list){var inc=list._node._inc||list._node.ownerDocument._inc;if(list._inc!=inc){var ls=list._refresh(list._node);__set__(list,"length",ls.length);copy(ls,list);list._inc=inc}}LiveNodeList.prototype.item=function(i){_updateLiveList(this);
return this[i]};_extends(LiveNodeList,NodeList);function NamedNodeMap(){}function _findNodeIndex(list,node){var i=list.length;while(i--)if(list[i]===node)return i}function _addNamedNode(el,list,newAttr,oldAttr){if(oldAttr)list[_findNodeIndex(list,oldAttr)]=newAttr;else list[list.length++]=newAttr;if(el){newAttr.ownerElement=el;var doc=el.ownerDocument;if(doc){oldAttr&&_onRemoveAttribute(doc,el,oldAttr);_onAddAttribute(doc,el,newAttr)}}}function _removeNamedNode(el,list,attr){var i=_findNodeIndex(list,
attr);if(i>=0){var lastIndex=list.length-1;while(i<lastIndex)list[i]=list[++i];list.length=lastIndex;if(el){var doc=el.ownerDocument;if(doc){_onRemoveAttribute(doc,el,attr);attr.ownerElement=null}}}else throw DOMException(NOT_FOUND_ERR,new Error(el.tagName+"@"+attr));}NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(key){var i=this.length;while(i--){var attr=this[i];if(attr.nodeName==key)return attr}},setNamedItem:function(attr){var el=attr.ownerElement;if(el&&el!=
this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var oldAttr=this.getNamedItem(attr.nodeName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr},setNamedItemNS:function(attr){var el=attr.ownerElement,oldAttr;if(el&&el!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);oldAttr=this.getNamedItemNS(attr.namespaceURI,attr.localName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr},removeNamedItem:function(key){var attr=this.getNamedItem(key);
_removeNamedNode(this._ownerElement,this,attr);return attr},removeNamedItemNS:function(namespaceURI,localName){var attr=this.getNamedItemNS(namespaceURI,localName);_removeNamedNode(this._ownerElement,this,attr);return attr},getNamedItemNS:function(namespaceURI,localName){var i=this.length;while(i--){var node=this[i];if(node.localName==localName&&node.namespaceURI==namespaceURI)return node}return null}};function DOMImplementation(features){this._features={};if(features)for(var feature in features)this._features=
features[feature]}DOMImplementation.prototype={hasFeature:function(feature,version){var versions=this._features[feature.toLowerCase()];if(versions&&(!version||version in versions))return true;else return false},createDocument:function(namespaceURI,qualifiedName,doctype){var doc=new Document;doc.implementation=this;doc.childNodes=new NodeList;doc.doctype=doctype;if(doctype)doc.appendChild(doctype);if(qualifiedName){var root=doc.createElementNS(namespaceURI,qualifiedName);doc.appendChild(root)}return doc},
createDocumentType:function(qualifiedName,publicId,systemId){var node=new DocumentType;node.name=qualifiedName;node.nodeName=qualifiedName;node.publicId=publicId;node.systemId=systemId;return node}};function Node(){}Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(newChild,refChild){return _insertBefore(this,newChild,
refChild)},replaceChild:function(newChild,oldChild){this.insertBefore(newChild,oldChild);if(oldChild)this.removeChild(oldChild)},removeChild:function(oldChild){return _removeChild(this,oldChild)},appendChild:function(newChild){return this.insertBefore(newChild,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(deep){return cloneNode(this.ownerDocument||this,this,deep)},normalize:function(){var child=this.firstChild;while(child){var next=child.nextSibling;if(next&&next.nodeType==
TEXT_NODE&&child.nodeType==TEXT_NODE){this.removeChild(next);child.appendData(next.data)}else{child.normalize();child=next}}},isSupported:function(feature,version){return this.ownerDocument.implementation.hasFeature(feature,version)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(namespaceURI){var el=this;while(el){var map=el._nsMap;if(map)for(var n in map)if(map[n]==namespaceURI)return n;el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},lookupNamespaceURI:function(prefix){var el=
this;while(el){var map=el._nsMap;if(map)if(prefix in map)return map[prefix];el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},isDefaultNamespace:function(namespaceURI){var prefix=this.lookupPrefix(namespaceURI);return prefix==null}};function _xmlEncoder(c){return c=="<"&&"&lt;"||c==">"&&"&gt;"||c=="&"&&"&amp;"||c=='"'&&"&quot;"||"&#"+c.charCodeAt()+";"}copy(NodeType,Node);copy(NodeType,Node.prototype);function _visitNode(node,callback){if(callback(node))return true;if(node=
node.firstChild){do if(_visitNode(node,callback))return true;while(node=node.nextSibling)}}function Document(){}function _onAddAttribute(doc,el,newAttr){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns=="http://www.w3.org/2000/xmlns/")el._nsMap[newAttr.prefix?newAttr.localName:""]=newAttr.value}function _onRemoveAttribute(doc,el,newAttr,remove){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns=="http://www.w3.org/2000/xmlns/")delete el._nsMap[newAttr.prefix?newAttr.localName:""]}function _onUpdateChild(doc,
el,newChild){if(doc&&doc._inc){doc._inc++;var cs=el.childNodes;if(newChild)cs[cs.length++]=newChild;else{var child=el.firstChild;var i=0;while(child){cs[i++]=child;child=child.nextSibling}cs.length=i}}}function _removeChild(parentNode,child){var previous=child.previousSibling;var next=child.nextSibling;if(previous)previous.nextSibling=next;else parentNode.firstChild=next;if(next)next.previousSibling=previous;else parentNode.lastChild=previous;_onUpdateChild(parentNode.ownerDocument,parentNode);return child}
function _insertBefore(parentNode,newChild,nextChild){var cp=newChild.parentNode;if(cp)cp.removeChild(newChild);if(newChild.nodeType===DOCUMENT_FRAGMENT_NODE){var newFirst=newChild.firstChild;if(newFirst==null)return newChild;var newLast=newChild.lastChild}else newFirst=newLast=newChild;var pre=nextChild?nextChild.previousSibling:parentNode.lastChild;newFirst.previousSibling=pre;newLast.nextSibling=nextChild;if(pre)pre.nextSibling=newFirst;else parentNode.firstChild=newFirst;if(nextChild==null)parentNode.lastChild=
newLast;else nextChild.previousSibling=newLast;do newFirst.parentNode=parentNode;while(newFirst!==newLast&&(newFirst=newFirst.nextSibling));_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE)newChild.firstChild=newChild.lastChild=null;return newChild}function _appendSingleChild(parentNode,newChild){var cp=newChild.parentNode;if(cp){var pre=parentNode.lastChild;cp.removeChild(newChild);var pre=parentNode.lastChild}var pre=parentNode.lastChild;
newChild.parentNode=parentNode;newChild.previousSibling=pre;newChild.nextSibling=null;if(pre)pre.nextSibling=newChild;else parentNode.firstChild=newChild;parentNode.lastChild=newChild;_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);return newChild}Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(newChild,refChild){if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){var child=newChild.firstChild;while(child){var next=
child.nextSibling;this.insertBefore(child,refChild);child=next}return newChild}if(this.documentElement==null&&newChild.nodeType==ELEMENT_NODE)this.documentElement=newChild;return _insertBefore(this,newChild,refChild),newChild.ownerDocument=this,newChild},removeChild:function(oldChild){if(this.documentElement==oldChild)this.documentElement=null;return _removeChild(this,oldChild)},importNode:function(importedNode,deep){return importNode(this,importedNode,deep)},getElementById:function(id){var rtv=null;
_visitNode(this.documentElement,function(node){if(node.nodeType==ELEMENT_NODE)if(node.getAttribute("id")==id){rtv=node;return true}});return rtv},createElement:function(tagName){var node=new Element;node.ownerDocument=this;node.nodeName=tagName;node.tagName=tagName;node.childNodes=new NodeList;var attrs=node.attributes=new NamedNodeMap;attrs._ownerElement=node;return node},createDocumentFragment:function(){var node=new DocumentFragment;node.ownerDocument=this;node.childNodes=new NodeList;return node},
createTextNode:function(data){var node=new Text;node.ownerDocument=this;node.appendData(data);return node},createComment:function(data){var node=new Comment;node.ownerDocument=this;node.appendData(data);return node},createCDATASection:function(data){var node=new CDATASection;node.ownerDocument=this;node.appendData(data);return node},createProcessingInstruction:function(target,data){var node=new ProcessingInstruction;node.ownerDocument=this;node.tagName=node.target=target;node.nodeValue=node.data=
data;return node},createAttribute:function(name){var node=new Attr;node.ownerDocument=this;node.name=name;node.nodeName=name;node.localName=name;node.specified=true;return node},createEntityReference:function(name){var node=new EntityReference;node.ownerDocument=this;node.nodeName=name;return node},createElementNS:function(namespaceURI,qualifiedName){var node=new Element;var pl=qualifiedName.split(":");var attrs=node.attributes=new NamedNodeMap;node.childNodes=new NodeList;node.ownerDocument=this;
node.nodeName=qualifiedName;node.tagName=qualifiedName;node.namespaceURI=namespaceURI;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1]}else node.localName=qualifiedName;attrs._ownerElement=node;return node},createAttributeNS:function(namespaceURI,qualifiedName){var node=new Attr;var pl=qualifiedName.split(":");node.ownerDocument=this;node.nodeName=qualifiedName;node.name=qualifiedName;node.namespaceURI=namespaceURI;node.specified=true;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1]}else node.localName=
qualifiedName;return node}};_extends(Document,Node);function Element(){this._nsMap={}}Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(name){return this.getAttributeNode(name)!=null},getAttribute:function(name){var attr=this.getAttributeNode(name);return attr&&attr.value||""},getAttributeNode:function(name){return this.attributes.getNamedItem(name)},setAttribute:function(name,value){var attr=this.ownerDocument.createAttribute(name);attr.value=attr.nodeValue=""+value;this.setAttributeNode(attr)},
removeAttribute:function(name){var attr=this.getAttributeNode(name);attr&&this.removeAttributeNode(attr)},appendChild:function(newChild){if(newChild.nodeType===DOCUMENT_FRAGMENT_NODE)return this.insertBefore(newChild,null);else return _appendSingleChild(this,newChild)},setAttributeNode:function(newAttr){return this.attributes.setNamedItem(newAttr)},setAttributeNodeNS:function(newAttr){return this.attributes.setNamedItemNS(newAttr)},removeAttributeNode:function(oldAttr){return this.attributes.removeNamedItem(oldAttr.nodeName)},
removeAttributeNS:function(namespaceURI,localName){var old=this.getAttributeNodeNS(namespaceURI,localName);old&&this.removeAttributeNode(old)},hasAttributeNS:function(namespaceURI,localName){return this.getAttributeNodeNS(namespaceURI,localName)!=null},getAttributeNS:function(namespaceURI,localName){var attr=this.getAttributeNodeNS(namespaceURI,localName);return attr&&attr.value||""},setAttributeNS:function(namespaceURI,qualifiedName,value){var attr=this.ownerDocument.createAttributeNS(namespaceURI,
qualifiedName);attr.value=attr.nodeValue=""+value;this.setAttributeNode(attr)},getAttributeNodeNS:function(namespaceURI,localName){return this.attributes.getNamedItemNS(namespaceURI,localName)},getElementsByTagName:function(tagName){return new LiveNodeList(this,function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType==ELEMENT_NODE&&(tagName==="*"||node.tagName==tagName))ls.push(node)});return ls})},getElementsByTagNameNS:function(namespaceURI,localName){return new LiveNodeList(this,
function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType===ELEMENT_NODE&&(namespaceURI==="*"||node.namespaceURI===namespaceURI)&&(localName==="*"||node.localName==localName))ls.push(node)});return ls})}};Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName;Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS;_extends(Element,Node);function Attr(){}Attr.prototype.nodeType=ATTRIBUTE_NODE;_extends(Attr,Node);function CharacterData(){}
CharacterData.prototype={data:"",substringData:function(offset,count){return this.data.substring(offset,offset+count)},appendData:function(text){text=this.data+text;this.nodeValue=this.data=text;this.length=text.length},insertData:function(offset,text){this.replaceData(offset,0,text)},appendChild:function(newChild){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR]);},deleteData:function(offset,count){this.replaceData(offset,count,"")},replaceData:function(offset,count,text){var start=this.data.substring(0,
offset);var end=this.data.substring(offset+count);text=start+text+end;this.nodeValue=this.data=text;this.length=text.length}};_extends(CharacterData,Node);function Text(){}Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(offset){var text=this.data;var newText=text.substring(offset);text=text.substring(0,offset);this.data=this.nodeValue=text;this.length=text.length;var newNode=this.ownerDocument.createTextNode(newText);if(this.parentNode)this.parentNode.insertBefore(newNode,this.nextSibling);
return newNode}};_extends(Text,CharacterData);function Comment(){}Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE};_extends(Comment,CharacterData);function CDATASection(){}CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE};_extends(CDATASection,CharacterData);function DocumentType(){}DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE;_extends(DocumentType,Node);function Notation(){}Notation.prototype.nodeType=NOTATION_NODE;_extends(Notation,Node);function Entity(){}
Entity.prototype.nodeType=ENTITY_NODE;_extends(Entity,Node);function EntityReference(){}EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE;_extends(EntityReference,Node);function DocumentFragment(){}DocumentFragment.prototype.nodeName="#document-fragment";DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE;_extends(DocumentFragment,Node);function ProcessingInstruction(){}ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE;_extends(ProcessingInstruction,Node);function XMLSerializer(){}
XMLSerializer.prototype.serializeToString=function(node,isHtml,nodeFilter){return nodeSerializeToString.call(node,isHtml,nodeFilter)};Node.prototype.toString=nodeSerializeToString;function nodeSerializeToString(isHtml,nodeFilter){var buf=[];var refNode=this.nodeType==9&&this.documentElement||this;var prefix=refNode.prefix;var uri=refNode.namespaceURI;if(uri&&prefix==null){var prefix=refNode.lookupPrefix(uri);if(prefix==null)var visibleNamespaces=[{namespace:uri,prefix:null}]}serializeToString(this,
buf,isHtml,nodeFilter,visibleNamespaces);return buf.join("")}function needNamespaceDefine(node,isHTML,visibleNamespaces){var prefix=node.prefix||"";var uri=node.namespaceURI;if(!prefix&&!uri)return false;if(prefix==="xml"&&uri==="http://www.w3.org/XML/1998/namespace"||uri=="http://www.w3.org/2000/xmlns/")return false;var i=visibleNamespaces.length;while(i--){var ns=visibleNamespaces[i];if(ns.prefix==prefix)return ns.namespace!=uri}return true}function serializeToString(node,buf,isHTML,nodeFilter,
visibleNamespaces){if(nodeFilter){node=nodeFilter(node);if(node){if(typeof node=="string"){buf.push(node);return}}else return}switch(node.nodeType){case ELEMENT_NODE:if(!visibleNamespaces)visibleNamespaces=[];var startVisibleNamespaces=visibleNamespaces.length;var attrs=node.attributes;var len=attrs.length;var child=node.firstChild;var nodeName=node.tagName;isHTML=htmlns===node.namespaceURI||isHTML;buf.push("<",nodeName);for(var i=0;i<len;i++){var attr=attrs.item(i);if(attr.prefix=="xmlns")visibleNamespaces.push({prefix:attr.localName,
namespace:attr.value});else if(attr.nodeName=="xmlns")visibleNamespaces.push({prefix:"",namespace:attr.value})}for(var i=0;i<len;i++){var attr=attrs.item(i);if(needNamespaceDefine(attr,isHTML,visibleNamespaces)){var prefix=attr.prefix||"";var uri=attr.namespaceURI;var ns=prefix?" xmlns:"+prefix:" xmlns";buf.push(ns,'="',uri,'"');visibleNamespaces.push({prefix:prefix,namespace:uri})}serializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces)}if(needNamespaceDefine(node,isHTML,visibleNamespaces)){var prefix=
node.prefix||"";var uri=node.namespaceURI;var ns=prefix?" xmlns:"+prefix:" xmlns";buf.push(ns,'="',uri,'"');visibleNamespaces.push({prefix:prefix,namespace:uri})}if(child||isHTML&&!/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){buf.push(">");if(isHTML&&/^script$/i.test(nodeName))while(child){if(child.data)buf.push(child.data);else serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);child=child.nextSibling}else while(child){serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);
child=child.nextSibling}buf.push("</",nodeName,">")}else buf.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var child=node.firstChild;while(child){serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);child=child.nextSibling}return;case ATTRIBUTE_NODE:return buf.push(" ",node.name,'="',node.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return buf.push(node.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return buf.push("<![CDATA[",node.data,"]]\x3e");
case COMMENT_NODE:return buf.push("\x3c!--",node.data,"--\x3e");case DOCUMENT_TYPE_NODE:var pubid=node.publicId;var sysid=node.systemId;buf.push("<!DOCTYPE ",node.name);if(pubid){buf.push(' PUBLIC "',pubid);if(sysid&&sysid!=".")buf.push('" "',sysid);buf.push('">')}else if(sysid&&sysid!=".")buf.push(' SYSTEM "',sysid,'">');else{var sub=node.internalSubset;if(sub)buf.push(" [",sub,"]");buf.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return buf.push("<?",node.target," ",node.data,"?>");case ENTITY_REFERENCE_NODE:return buf.push("&",
node.nodeName,";");default:buf.push("??",node.nodeName)}}function importNode(doc,node,deep){var node2;switch(node.nodeType){case ELEMENT_NODE:node2=node.cloneNode(false);node2.ownerDocument=doc;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:deep=true;break}if(!node2)node2=node.cloneNode(false);node2.ownerDocument=doc;node2.parentNode=null;if(deep){var child=node.firstChild;while(child){node2.appendChild(importNode(doc,child,deep));child=child.nextSibling}}return node2}function cloneNode(doc,
node,deep){var node2=new node.constructor;for(var n in node){var v=node[n];if(typeof v!="object")if(v!=node2[n])node2[n]=v}if(node.childNodes)node2.childNodes=new NodeList;node2.ownerDocument=doc;switch(node2.nodeType){case ELEMENT_NODE:var attrs=node.attributes;var attrs2=node2.attributes=new NamedNodeMap;var len=attrs.length;attrs2._ownerElement=node2;for(var i=0;i<len;i++)node2.setAttributeNode(cloneNode(doc,attrs.item(i),true));break;case ATTRIBUTE_NODE:deep=true}if(deep){var child=node.firstChild;
while(child){node2.appendChild(cloneNode(doc,child,deep));child=child.nextSibling}}return node2}function __set__(object,key,value){object[key]=value}try{if(Object.defineProperty){Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){_updateLiveList(this);return this.$$length}});Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(data){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:while(this.firstChild)this.removeChild(this.firstChild);
if(data||String(data))this.appendChild(this.ownerDocument.createTextNode(data));break;default:this.data=data;this.value=data;this.nodeValue=data}}});function getTextContent(node){switch(node.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var buf=[];node=node.firstChild;while(node){if(node.nodeType!==7&&node.nodeType!==8)buf.push(getTextContent(node));node=node.nextSibling}return buf.join("");default:return node.nodeValue}}__set__=function(object,key,value){object["$$"+key]=value}}}catch(e){}exports.DOMImplementation=
DOMImplementation;exports.XMLSerializer=XMLSerializer})();
(function(){var exports=self["xmlDomLib"];var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]");var tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$");var S_TAG=0;var S_ATTR=1;var S_ATTR_SPACE=2;var S_EQ=3;var S_ATTR_NOQUOT_VALUE=
4;var S_ATTR_END=5;var S_TAG_SPACE=6;var S_TAG_CLOSE=7;function XMLReader(){}XMLReader.prototype={parse:function(source,defaultNSMap,entityMap){var domBuilder=this.domBuilder;domBuilder.startDocument();_copy(defaultNSMap,defaultNSMap={});parse(source,defaultNSMap,entityMap,domBuilder,this.errorHandler);domBuilder.endDocument()}};function parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){function fixedFromCharCode(code){if(code>65535){code-=65536;var surrogate1=55296+(code>>10),surrogate2=
56320+(code&1023);return String.fromCharCode(surrogate1,surrogate2)}else return String.fromCharCode(code)}function entityReplacer(a){var k=a.slice(1,-1);if(k in entityMap)return entityMap[k];else if(k.charAt(0)==="#")return fixedFromCharCode(parseInt(k.substr(1).replace("x","0x")));else{errorHandler.error("entity not found:"+a);return a}}function appendText(end){if(end>start){var xt=source.substring(start,end).replace(/&#?\w+;/g,entityReplacer);locator&&position(start);domBuilder.characters(xt,0,
end-start);start=end}}function position(p,m){while(p>=lineEnd&&(m=linePattern.exec(source))){lineStart=m.index;lineEnd=lineStart+m[0].length;locator.lineNumber++}locator.columnNumber=p-lineStart+1}var lineStart=0;var lineEnd=0;var linePattern=/.*(?:\r\n?|\n)|.*$/g;var locator=domBuilder.locator;var parseStack=[{currentNSMap:defaultNSMapCopy}];var closeMap={};var start=0;while(true){try{var tagStart=source.indexOf("<",start);if(tagStart<0){if(!source.substr(start).match(/^\s*$/)){var doc=domBuilder.doc;
var text=doc.createTextNode(source.substr(start));doc.appendChild(text);domBuilder.currentElement=text}return}if(tagStart>start)appendText(tagStart);switch(source.charAt(tagStart+1)){case "/":var end=source.indexOf(">",tagStart+3);var tagName=source.substring(tagStart+2,end);var config=parseStack.pop();if(end<0){tagName=source.substring(tagStart+2).replace(/[\s<].*/,"");errorHandler.error("end tag name: "+tagName+" is not complete:"+config.tagName);end=tagStart+1+tagName.length}else if(tagName.match(/\s</)){tagName=
tagName.replace(/[\s<].*/,"");errorHandler.error("end tag name: "+tagName+" maybe not complete");end=tagStart+1+tagName.length}var localNSMap=config.localNSMap;var endMatch=config.tagName==tagName;var endIgnoreCaseMach=endMatch||config.tagName&&config.tagName.toLowerCase()==tagName.toLowerCase();if(endIgnoreCaseMach){domBuilder.endElement(config.uri,config.localName,tagName);if(localNSMap)for(var prefix in localNSMap)domBuilder.endPrefixMapping(prefix);if(!endMatch)errorHandler.fatalError("end tag name: "+
tagName+" is not match the current start tagName:"+config.tagName)}else parseStack.push(config);end++;break;case "?":locator&&position(tagStart);end=parseInstruction(source,tagStart,domBuilder);break;case "!":locator&&position(tagStart);end=parseDCC(source,tagStart,domBuilder,errorHandler);break;default:locator&&position(tagStart);var el=new ElementAttributes;var currentNSMap=parseStack[parseStack.length-1].currentNSMap;var end=parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,
errorHandler);var len=el.length;if(!el.closed&&fixSelfClosed(source,end,el.tagName,closeMap)){el.closed=true;if(!entityMap.nbsp)errorHandler.warning("unclosed xml attribute")}if(locator&&len){var locator2=copyLocator(locator,{});for(var i=0;i<len;i++){var a=el[i];position(a.offset);a.locator=copyLocator(locator,{})}domBuilder.locator=locator2;if(appendElement(el,domBuilder,currentNSMap))parseStack.push(el);domBuilder.locator=locator}else if(appendElement(el,domBuilder,currentNSMap))parseStack.push(el);
if(el.uri==="http://www.w3.org/1999/xhtml"&&!el.closed)end=parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder);else end++}}catch(e){errorHandler.error("element parse error: "+e);end=-1}if(end>start)start=end;else appendText(Math.max(tagStart,start)+1)}}function copyLocator(f,t){t.lineNumber=f.lineNumber;t.columnNumber=f.columnNumber;return t}function parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){var attrName;var value;var p=++start;var s=S_TAG;
while(true){var c=source.charAt(p);switch(c){case "=":if(s===S_ATTR){attrName=source.slice(start,p);s=S_EQ}else if(s===S_ATTR_SPACE)s=S_EQ;else throw new Error("attribute equal must after attrName");break;case "'":case '"':if(s===S_EQ||s===S_ATTR){if(s===S_ATTR){errorHandler.warning('attribute value must after "="');attrName=source.slice(start,p)}start=p+1;p=source.indexOf(c,start);if(p>0){value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);el.add(attrName,value,start-1);s=S_ATTR_END}else throw new Error("attribute value no end '"+
c+"' match");}else if(s==S_ATTR_NOQUOT_VALUE){value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);el.add(attrName,value,start);errorHandler.warning('attribute "'+attrName+'" missed start quot('+c+")!!");start=p+1;s=S_ATTR_END}else throw new Error('attribute value must after "="');break;case "/":switch(s){case S_TAG:el.setTagName(source.slice(start,p));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:s=S_TAG_CLOSE;el.closed=true;case S_ATTR_NOQUOT_VALUE:case S_ATTR:case S_ATTR_SPACE:break;
default:throw new Error("attribute invalid close char('/')");}break;case "":errorHandler.error("unexpected end of input");if(s==S_TAG)el.setTagName(source.slice(start,p));return p;case ">":switch(s){case S_TAG:el.setTagName(source.slice(start,p));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:value=source.slice(start,p);if(value.slice(-1)==="/"){el.closed=true;value=value.slice(0,-1)}case S_ATTR_SPACE:if(s===S_ATTR_SPACE)value=attrName;if(s==S_ATTR_NOQUOT_VALUE){errorHandler.warning('attribute "'+
value+'" missed quot(")!!');el.add(attrName,value.replace(/&#?\w+;/g,entityReplacer),start)}else{if(currentNSMap[""]!=="http://www.w3.org/1999/xhtml"||!value.match(/^(?:disabled|checked|selected)$/i))errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!');el.add(value,value,start)}break;case S_EQ:throw new Error("attribute value missed!!");}return p;case "\u0080":c=" ";default:if(c<=" ")switch(s){case S_TAG:el.setTagName(source.slice(start,p));s=S_TAG_SPACE;break;case S_ATTR:attrName=
source.slice(start,p);s=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);errorHandler.warning('attribute "'+value+'" missed quot(")!!');el.add(attrName,value,start);case S_ATTR_END:s=S_TAG_SPACE;break}else switch(s){case S_ATTR_SPACE:var tagName=el.tagName;if(currentNSMap[""]!=="http://www.w3.org/1999/xhtml"||!attrName.match(/^(?:disabled|checked|selected)$/i))errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead2!!');
el.add(attrName,attrName,start);start=p;s=S_ATTR;break;case S_ATTR_END:errorHandler.warning('attribute space is required"'+attrName+'"!!');case S_TAG_SPACE:s=S_ATTR;start=p;break;case S_EQ:s=S_ATTR_NOQUOT_VALUE;start=p;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to");}}p++}}function appendElement(el,domBuilder,currentNSMap){var tagName=el.tagName;var localNSMap=null;var i=el.length;while(i--){var a=el[i];var qName=a.qName;var value=a.value;var nsp=
qName.indexOf(":");if(nsp>0){var prefix=a.prefix=qName.slice(0,nsp);var localName=qName.slice(nsp+1);var nsPrefix=prefix==="xmlns"&&localName}else{localName=qName;prefix=null;if(qName==="xmlns")nsPrefix="";else nsPrefix="__special_false_value__"}a.localName=localName;if(nsPrefix!=="__special_false_value__"){if(localNSMap==null){localNSMap={};_copy(currentNSMap,currentNSMap={})}currentNSMap[nsPrefix]=localNSMap[nsPrefix]=value;a.uri="http://www.w3.org/2000/xmlns/";domBuilder.startPrefixMapping(nsPrefix,
value)}}var i=el.length;while(i--){a=el[i];var prefix=a.prefix;if(prefix){if(prefix==="xml")a.uri="http://www.w3.org/XML/1998/namespace";if(prefix!=="xmlns")a.uri=currentNSMap[prefix||""]}}var nsp=tagName.indexOf(":");if(nsp>0){prefix=el.prefix=tagName.slice(0,nsp);localName=el.localName=tagName.slice(nsp+1)}else{prefix=null;localName=el.localName=tagName}var ns=el.uri=currentNSMap[prefix||""];domBuilder.startElement(ns,localName,tagName,el);if(el.closed){domBuilder.endElement(ns,localName,tagName);
if(localNSMap)for(prefix in localNSMap)domBuilder.endPrefixMapping(prefix)}else{el.currentNSMap=currentNSMap;el.localNSMap=localNSMap;return true}}function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){if(/^(?:script|textarea)$/i.test(tagName)){var elEndStart=source.indexOf("</"+tagName+">",elStartEnd);var text=source.substring(elStartEnd+1,elEndStart);if(/[&<]/.test(text)){if(/^script$/i.test(tagName)){domBuilder.characters(text,0,text.length);return elEndStart}text=
text.replace(/&#?\w+;/g,entityReplacer);domBuilder.characters(text,0,text.length);return elEndStart}}return elStartEnd+1}function fixSelfClosed(source,elStartEnd,tagName,closeMap){var pos=closeMap[tagName];if(pos==null){pos=source.lastIndexOf("</"+tagName+">");if(pos<elStartEnd)pos=source.lastIndexOf("</"+tagName);closeMap[tagName]=pos}return pos<elStartEnd}function _copy(source,target){for(var n in source)target[n]=source[n]}function parseDCC(source,start,domBuilder,errorHandler){var next=source.charAt(start+
2);switch(next){case "-":if(source.charAt(start+3)==="-"){var end=source.indexOf("--\x3e",start+4);if(end>start){domBuilder.comment(source,start+4,end-start-4);return end+3}else{errorHandler.error("Unclosed comment");return-1}}else return-1;default:if(source.substr(start+3,6)=="CDATA["){var end=source.indexOf("]]\x3e",start+9);domBuilder.startCDATA();domBuilder.characters(source,start+9,end-start-9);domBuilder.endCDATA();return end+3}var matchs=split(source,start);var len=matchs.length;if(len>1&&
/!doctype/i.test(matchs[0][0])){var name=matchs[1][0];var pubid=len>3&&/^public$/i.test(matchs[2][0])&&matchs[3][0];var sysid=len>4&&matchs[4][0];var lastMatch=matchs[len-1];domBuilder.startDTD(name,pubid&&pubid.replace(/^(['"])(.*?)\1$/,"$2"),sysid&&sysid.replace(/^(['"])(.*?)\1$/,"$2"));domBuilder.endDTD();return lastMatch.index+lastMatch[0].length}}return-1}function parseInstruction(source,start,domBuilder){var end=source.indexOf("?>",start);if(end){var match=source.substring(start,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);
if(match){var len=match[0].length;domBuilder.processingInstruction(match[1],match[2]);return end+2}else return-1}return-1}function ElementAttributes(source){}ElementAttributes.prototype={setTagName:function(tagName){if(!tagNamePattern.test(tagName))throw new Error("invalid tagName:"+tagName);this.tagName=tagName},add:function(qName,value,offset){if(!tagNamePattern.test(qName))throw new Error("invalid attribute:"+qName);this[this.length++]={qName:qName,value:value,offset:offset}},length:0,getLocalName:function(i){return this[i].localName},
getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function split(source,start){var match;var buf=[];var reg=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;reg.lastIndex=start;reg.exec(source);while(match=reg.exec(source)){buf.push(match);if(match[1])return buf}}exports.XMLReader=XMLReader})();
(function(){var exports=self["xmlDomLib"];var XMLReader=exports.XMLReader;var DOMImplementation=exports.DOMImplementation;var defaultEntityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\u00c0",Aacute:"\u00c1",Acirc:"\u00c2",Atilde:"\u00c3",Auml:"\u00c4",Aring:"\u00c5",AElig:"\u00c6",Ccedil:"\u00c7",Egrave:"\u00c8",Eacute:"\u00c9",Ecirc:"\u00ca",Euml:"\u00cb",Igrave:"\u00cc",Iacute:"\u00cd",Icirc:"\u00ce",Iuml:"\u00cf",ETH:"\u00d0",Ntilde:"\u00d1",Ograve:"\u00d2",Oacute:"\u00d3",Ocirc:"\u00d4",
Otilde:"\u00d5",Ouml:"\u00d6",Oslash:"\u00d8",Ugrave:"\u00d9",Uacute:"\u00da",Ucirc:"\u00db",Uuml:"\u00dc",Yacute:"\u00dd",THORN:"\u00de",szlig:"\u00df",agrave:"\u00e0",aacute:"\u00e1",acirc:"\u00e2",atilde:"\u00e3",auml:"\u00e4",aring:"\u00e5",aelig:"\u00e6",ccedil:"\u00e7",egrave:"\u00e8",eacute:"\u00e9",ecirc:"\u00ea",euml:"\u00eb",igrave:"\u00ec",iacute:"\u00ed",icirc:"\u00ee",iuml:"\u00ef",eth:"\u00f0",ntilde:"\u00f1",ograve:"\u00f2",oacute:"\u00f3",ocirc:"\u00f4",otilde:"\u00f5",ouml:"\u00f6",
oslash:"\u00f8",ugrave:"\u00f9",uacute:"\u00fa",ucirc:"\u00fb",uuml:"\u00fc",yacute:"\u00fd",thorn:"\u00fe",yuml:"\u00ff",nbsp:" ",iexcl:"\u00a1",cent:"\u00a2",pound:"\u00a3",curren:"\u00a4",yen:"\u00a5",brvbar:"\u00a6",sect:"\u00a7",uml:"\u00a8",copy:"\u00a9",ordf:"\u00aa",laquo:"\u00ab",not:"\u00ac",shy:"\u00ad\u00ad",reg:"\u00ae",macr:"\u00af",deg:"\u00b0",plusmn:"\u00b1",sup2:"\u00b2",sup3:"\u00b3",acute:"\u00b4",micro:"\u00b5",para:"\u00b6",middot:"\u00b7",cedil:"\u00b8",sup1:"\u00b9",ordm:"\u00ba",
raquo:"\u00bb",frac14:"\u00bc",frac12:"\u00bd",frac34:"\u00be",iquest:"\u00bf",times:"\u00d7",divide:"\u00f7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a","int":"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",
ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",
gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",
emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",
lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"};function DOMParser(options){this.options=options||{locator:{}}}DOMParser.prototype.parseFromString=function(source,mimeType){var options=this.options;var sax=new XMLReader;var domBuilder=options.domBuilder||new DOMHandler;var errorHandler=options.errorHandler;var locator=options.locator;var defaultNSMap=options.xmlns||{};var isHTML=/\/x?html?$/.test(mimeType);var entityMap=isHTML?defaultEntityMap:
{"lt":"<","gt":">","amp":"&","quot":'"',"apos":"'"};if(locator)domBuilder.setDocumentLocator(locator);sax.errorHandler=buildErrorHandler(errorHandler,domBuilder,locator);sax.domBuilder=options.domBuilder||domBuilder;if(isHTML)defaultNSMap[""]="http://www.w3.org/1999/xhtml";defaultNSMap.xml=defaultNSMap.xml||"http://www.w3.org/XML/1998/namespace";if(source)sax.parse(source,defaultNSMap,entityMap);else sax.errorHandler.error("invalid doc source");return domBuilder.doc};function buildErrorHandler(errorImpl,
domBuilder,locator){if(!errorImpl){if(domBuilder instanceof DOMHandler)return domBuilder;errorImpl=domBuilder}var errorHandler={};var isCallback=errorImpl instanceof Function;locator=locator||{};function build(key){var fn=errorImpl[key];if(!fn&&isCallback)fn=errorImpl.length==2?function(msg){errorImpl(key,msg)}:errorImpl;errorHandler[key]=fn&&function(msg){fn("[xmldom "+key+"]\t"+msg+_locator(locator))}||function(){}}build("warning");build("error");build("fatalError");return errorHandler}function DOMHandler(){this.cdata=
false}function position(locator,node){node.lineNumber=locator.lineNumber;node.columnNumber=locator.columnNumber}DOMHandler.prototype={startDocument:function(){this.doc=(new DOMImplementation).createDocument(null,null,null);if(this.locator)this.doc.documentURI=this.locator.systemId},startElement:function(namespaceURI,localName,qName,attrs){var doc=this.doc;var el=doc.createElementNS(namespaceURI,qName||localName);var len=attrs.length;appendElement(this,el);this.currentElement=el;this.locator&&position(this.locator,
el);for(var i=0;i<len;i++){var namespaceURI=attrs.getURI(i);var value=attrs.getValue(i);var qName=attrs.getQName(i);var attr=doc.createAttributeNS(namespaceURI,qName);this.locator&&position(attrs.getLocator(i),attr);attr.value=attr.nodeValue=value;el.setAttributeNode(attr)}},endElement:function(namespaceURI,localName,qName){var current=this.currentElement;var tagName=current.tagName;this.currentElement=current.parentNode},startPrefixMapping:function(prefix,uri){},endPrefixMapping:function(prefix){},
processingInstruction:function(target,data){var ins=this.doc.createProcessingInstruction(target,data);this.locator&&position(this.locator,ins);appendElement(this,ins)},ignorableWhitespace:function(ch,start,length){},characters:function(chars,start,length){chars=_toString.apply(this,arguments);if(chars){if(this.cdata)var charNode=this.doc.createCDATASection(chars);else var charNode=this.doc.createTextNode(chars);if(this.currentElement)this.currentElement.appendChild(charNode);else if(/^\s*$/.test(chars))this.doc.appendChild(charNode);
this.locator&&position(this.locator,charNode)}},skippedEntity:function(name){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(locator){if(this.locator=locator)locator.lineNumber=0},comment:function(chars,start,length){chars=_toString.apply(this,arguments);var comm=this.doc.createComment(chars);this.locator&&position(this.locator,comm);appendElement(this,comm)},startCDATA:function(){this.cdata=true},endCDATA:function(){this.cdata=false},startDTD:function(name,publicId,systemId){var impl=
this.doc.implementation;if(impl&&impl.createDocumentType){var dt=impl.createDocumentType(name,publicId,systemId);this.locator&&position(this.locator,dt);appendElement(this,dt)}},warning:function(error){console.warn("[xmldom warning]\t"+error,_locator(this.locator))},error:function(error){console.error("[xmldom error]\t"+error,_locator(this.locator))},fatalError:function(error){console.error("[xmldom fatalError]\t"+error,_locator(this.locator));throw error;}};function _locator(l){if(l)return"\n@"+
(l.systemId||"")+"#[line:"+l.lineNumber+",col:"+l.columnNumber+"]"}function _toString(chars,start,length){if(typeof chars=="string")return chars.substr(start,length);else{if(chars.length>=start+length||start)return new java.lang.String(chars,start,length)+"";return chars}}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(key){DOMHandler.prototype[key]=function(){return null}});
function appendElement(hander,node){if(!hander.currentElement)hander.doc.appendChild(node);else hander.currentElement.appendChild(node)}exports.DOMParser=DOMParser})();
</script>
<script>'use strict';(function(){var exports=self["xmlDomLib"];function curry(func){var slice=Array.prototype.slice,totalargs=func.length,partial=function(args,fn){return function(){return fn.apply(this,args.concat(slice.call(arguments)))}},fn=function(){var args=slice.call(arguments);return args.length<totalargs?partial(args,fn):func.apply(this,slice.apply(arguments,[0,totalargs]))};return fn}var forEach=curry(function(f,xs){for(var i=0;i<xs.length;i+=1)f(xs[i],i,xs)});var reduce=curry(function(f,seed,xs){var acc=
seed;forEach(function(x,i){acc=f(acc,x,i)},xs);return acc});var map=curry(function(f,xs){var mapped=new Array(xs.length);forEach(function(x,i){mapped[i]=f(x)},xs);return mapped});var filter=curry(function(f,xs){var filtered=[];forEach(function(x,i){if(f(x,i))filtered.push(x)},xs);return filtered});function compose(){if(arguments.length===0)throw new Error("compose requires at least one argument");var funcs=Array.prototype.slice.call(arguments).reverse();var f0=funcs[0];var fRem=funcs.slice(1);return function(){return reduce(function(acc,
next){return next(acc)},f0.apply(null,arguments),fRem)}}var includes=curry(function(values,value){for(var i=0;i<values.length;i+=1)if(values[i]===value)return true;return false});function always(value){return function(){return value}}var prop=curry(function(name,obj){return obj[name]});function toString(x){return x.toString()}var join=curry(function(s,xs){return xs.join(s)});var wrap=curry(function(pref,suf,str){return pref+str+suf});function assign(target){var to=Object(target);for(var index=1;index<
arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null)for(var nextKey in nextSource)if(Object.prototype.hasOwnProperty.call(nextSource,nextKey))to[nextKey]=nextSource[nextKey]}return to}XPathParser.prototype=new Object;XPathParser.prototype.constructor=XPathParser;XPathParser.superclass=Object.prototype;function XPathParser(){this.init()}XPathParser.prototype.init=function(){this.reduceActions=[];this.reduceActions[3]=function(rhs){return new OrOperation(rhs[0],rhs[2])};this.reduceActions[5]=
function(rhs){return new AndOperation(rhs[0],rhs[2])};this.reduceActions[7]=function(rhs){return new EqualsOperation(rhs[0],rhs[2])};this.reduceActions[8]=function(rhs){return new NotEqualOperation(rhs[0],rhs[2])};this.reduceActions[10]=function(rhs){return new LessThanOperation(rhs[0],rhs[2])};this.reduceActions[11]=function(rhs){return new GreaterThanOperation(rhs[0],rhs[2])};this.reduceActions[12]=function(rhs){return new LessThanOrEqualOperation(rhs[0],rhs[2])};this.reduceActions[13]=function(rhs){return new GreaterThanOrEqualOperation(rhs[0],
rhs[2])};this.reduceActions[15]=function(rhs){return new PlusOperation(rhs[0],rhs[2])};this.reduceActions[16]=function(rhs){return new MinusOperation(rhs[0],rhs[2])};this.reduceActions[18]=function(rhs){return new MultiplyOperation(rhs[0],rhs[2])};this.reduceActions[19]=function(rhs){return new DivOperation(rhs[0],rhs[2])};this.reduceActions[20]=function(rhs){return new ModOperation(rhs[0],rhs[2])};this.reduceActions[22]=function(rhs){return new UnaryMinusOperation(rhs[1])};this.reduceActions[24]=
function(rhs){return new BarOperation(rhs[0],rhs[2])};this.reduceActions[25]=function(rhs){return new PathExpr(undefined,undefined,rhs[0])};this.reduceActions[27]=function(rhs){rhs[0].locationPath=rhs[2];return rhs[0]};this.reduceActions[28]=function(rhs){rhs[0].locationPath=rhs[2];rhs[0].locationPath.steps.unshift(new Step(Step.DESCENDANTORSELF,NodeTest.nodeTest,[]));return rhs[0]};this.reduceActions[29]=function(rhs){return new PathExpr(rhs[0],[],undefined)};this.reduceActions[30]=function(rhs){if(Utilities.instance_of(rhs[0],
PathExpr)){if(rhs[0].filterPredicates==undefined)rhs[0].filterPredicates=[];rhs[0].filterPredicates.push(rhs[1]);return rhs[0]}else return new PathExpr(rhs[0],[rhs[1]],undefined)};this.reduceActions[32]=function(rhs){return rhs[1]};this.reduceActions[33]=function(rhs){return new XString(rhs[0])};this.reduceActions[34]=function(rhs){return new XNumber(rhs[0])};this.reduceActions[36]=function(rhs){return new FunctionCall(rhs[0],[])};this.reduceActions[37]=function(rhs){return new FunctionCall(rhs[0],
rhs[2])};this.reduceActions[38]=function(rhs){return[rhs[0]]};this.reduceActions[39]=function(rhs){rhs[2].unshift(rhs[0]);return rhs[2]};this.reduceActions[43]=function(rhs){return new LocationPath(true,[])};this.reduceActions[44]=function(rhs){rhs[1].absolute=true;return rhs[1]};this.reduceActions[46]=function(rhs){return new LocationPath(false,[rhs[0]])};this.reduceActions[47]=function(rhs){rhs[0].steps.push(rhs[2]);return rhs[0]};this.reduceActions[49]=function(rhs){return new Step(rhs[0],rhs[1],
[])};this.reduceActions[50]=function(rhs){return new Step(Step.CHILD,rhs[0],[])};this.reduceActions[51]=function(rhs){return new Step(rhs[0],rhs[1],rhs[2])};this.reduceActions[52]=function(rhs){return new Step(Step.CHILD,rhs[0],rhs[1])};this.reduceActions[54]=function(rhs){return[rhs[0]]};this.reduceActions[55]=function(rhs){rhs[1].unshift(rhs[0]);return rhs[1]};this.reduceActions[56]=function(rhs){if(rhs[0]=="ancestor")return Step.ANCESTOR;else if(rhs[0]=="ancestor-or-self")return Step.ANCESTORORSELF;
else if(rhs[0]=="attribute")return Step.ATTRIBUTE;else if(rhs[0]=="child")return Step.CHILD;else if(rhs[0]=="descendant")return Step.DESCENDANT;else if(rhs[0]=="descendant-or-self")return Step.DESCENDANTORSELF;else if(rhs[0]=="following")return Step.FOLLOWING;else if(rhs[0]=="following-sibling")return Step.FOLLOWINGSIBLING;else if(rhs[0]=="namespace")return Step.NAMESPACE;else if(rhs[0]=="parent")return Step.PARENT;else if(rhs[0]=="preceding")return Step.PRECEDING;else if(rhs[0]=="preceding-sibling")return Step.PRECEDINGSIBLING;
else if(rhs[0]=="self")return Step.SELF;return-1};this.reduceActions[57]=function(rhs){return Step.ATTRIBUTE};this.reduceActions[59]=function(rhs){if(rhs[0]=="comment")return NodeTest.commentTest;else if(rhs[0]=="text")return NodeTest.textTest;else if(rhs[0]=="processing-instruction")return NodeTest.anyPiTest;else if(rhs[0]=="node")return NodeTest.nodeTest;return new NodeTest(-1,undefined)};this.reduceActions[60]=function(rhs){return new NodeTest.PITest(rhs[2])};this.reduceActions[61]=function(rhs){return rhs[1]};
this.reduceActions[63]=function(rhs){rhs[1].absolute=true;rhs[1].steps.unshift(new Step(Step.DESCENDANTORSELF,NodeTest.nodeTest,[]));return rhs[1]};this.reduceActions[64]=function(rhs){rhs[0].steps.push(new Step(Step.DESCENDANTORSELF,NodeTest.nodeTest,[]));rhs[0].steps.push(rhs[2]);return rhs[0]};this.reduceActions[65]=function(rhs){return new Step(Step.SELF,NodeTest.nodeTest,[])};this.reduceActions[66]=function(rhs){return new Step(Step.PARENT,NodeTest.nodeTest,[])};this.reduceActions[67]=function(rhs){return new VariableReference(rhs[1])};
this.reduceActions[68]=function(rhs){return NodeTest.nameTestAny};this.reduceActions[69]=function(rhs){return new NodeTest.NameTestPrefixAny(rhs[0].split(":")[0])};this.reduceActions[70]=function(rhs){return new NodeTest.NameTestQName(rhs[0])}};XPathParser.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs ",
" s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ",
"r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ",
"r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ",
"r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss",
" s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ",
"r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ",
"r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ",
"r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "];XPathParser.actionTableNumber=[" 1 0        /.-,+*)('    & %$  #  \"!",
"                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               "," 1 0        /.-,+*)('    & %$  #  \"!","K1  KKKKKKKK .  +*)('KKKKKK  KK# K\" "," 1 0        /.-,+*)('    & %$  #  \"!","                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ",
"  P                                 ","                            Q       "," 1           .  +*)('          #  \" ","b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ",
"7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ",
"U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               "," 1 0        /.-,+*)('    & %$m #  \"!","_  f________         ______e __  _  "," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!",
" 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('      %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!",
" 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ",">  >>>>>>>>>         >>>>>>> >> >>  "," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ","Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                             \u0087      ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ",
"                             \u0088      ","                             F\u0089     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ",
"3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                 \u008a  ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  ",
" 1 0        /.-,+*)('    & %$  #  \"!","]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "];XPathParser.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ",
"                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ",
"                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ",
"                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ",
"      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         \u007f=>?@ AB  CDEFGH IJ ","\u0080456789:;<=>?@ AB  CDEFGH IJ\u0081","            \u0082        EFGH IJ ","            \u0083        EFGH IJ ","                             ","                     \u0084 GH IJ ","                     \u0085 GH IJ ","              i          \u0086   ","              i          \u0087   ","                             ","                             ",
"                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ",
"                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ AB\u008cqCDEFGH IJ ","                             ",
"                             "];XPathParser.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],
[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]];XPathParser.DOUBLEDOT=2;XPathParser.DOUBLECOLON=3;XPathParser.DOUBLESLASH=
4;XPathParser.NOTEQUAL=5;XPathParser.LESSTHANOREQUAL=6;XPathParser.GREATERTHANOREQUAL=7;XPathParser.AND=8;XPathParser.OR=9;XPathParser.MOD=10;XPathParser.DIV=11;XPathParser.MULTIPLYOPERATOR=12;XPathParser.FUNCTIONNAME=13;XPathParser.AXISNAME=14;XPathParser.LITERAL=15;XPathParser.NUMBER=16;XPathParser.ASTERISKNAMETEST=17;XPathParser.QNAME=18;XPathParser.NCNAMECOLONASTERISK=19;XPathParser.NODETYPE=20;XPathParser.PROCESSINGINSTRUCTIONWITHLITERAL=21;XPathParser.EQUALS=22;XPathParser.LESSTHAN=23;XPathParser.GREATERTHAN=
24;XPathParser.PLUS=25;XPathParser.MINUS=26;XPathParser.BAR=27;XPathParser.SLASH=28;XPathParser.LEFTPARENTHESIS=29;XPathParser.RIGHTPARENTHESIS=30;XPathParser.COMMA=31;XPathParser.AT=32;XPathParser.LEFTBRACKET=33;XPathParser.RIGHTBRACKET=34;XPathParser.DOT=35;XPathParser.DOLLAR=36;XPathParser.prototype.tokenize=function(s1){var types=[];var values=[];var s=s1+"\x00";var pos=0;var c=s.charAt(pos++);while(1){while(c==" "||c=="\t"||c=="\r"||c=="\n")c=s.charAt(pos++);if(c=="\x00"||pos>=s.length)break;
if(c=="("){types.push(XPathParser.LEFTPARENTHESIS);values.push(c);c=s.charAt(pos++);continue}if(c==")"){types.push(XPathParser.RIGHTPARENTHESIS);values.push(c);c=s.charAt(pos++);continue}if(c=="["){types.push(XPathParser.LEFTBRACKET);values.push(c);c=s.charAt(pos++);continue}if(c=="]"){types.push(XPathParser.RIGHTBRACKET);values.push(c);c=s.charAt(pos++);continue}if(c=="@"){types.push(XPathParser.AT);values.push(c);c=s.charAt(pos++);continue}if(c==","){types.push(XPathParser.COMMA);values.push(c);
c=s.charAt(pos++);continue}if(c=="|"){types.push(XPathParser.BAR);values.push(c);c=s.charAt(pos++);continue}if(c=="+"){types.push(XPathParser.PLUS);values.push(c);c=s.charAt(pos++);continue}if(c=="-"){types.push(XPathParser.MINUS);values.push(c);c=s.charAt(pos++);continue}if(c=="="){types.push(XPathParser.EQUALS);values.push(c);c=s.charAt(pos++);continue}if(c=="$"){types.push(XPathParser.DOLLAR);values.push(c);c=s.charAt(pos++);continue}if(c=="."){c=s.charAt(pos++);if(c=="."){types.push(XPathParser.DOUBLEDOT);
values.push("..");c=s.charAt(pos++);continue}if(c>="0"&&c<="9"){var number="."+c;c=s.charAt(pos++);while(c>="0"&&c<="9"){number+=c;c=s.charAt(pos++)}types.push(XPathParser.NUMBER);values.push(number);continue}types.push(XPathParser.DOT);values.push(".");continue}if(c=="'"||c=='"'){var delimiter=c;var literal="";while(pos<s.length&&(c=s.charAt(pos))!==delimiter){literal+=c;pos+=1}if(c!==delimiter)throw XPathException.fromMessage("Unterminated string literal: "+delimiter+literal);pos+=1;types.push(XPathParser.LITERAL);
values.push(literal);c=s.charAt(pos++);continue}if(c>="0"&&c<="9"){var number=c;c=s.charAt(pos++);while(c>="0"&&c<="9"){number+=c;c=s.charAt(pos++)}if(c==".")if(s.charAt(pos)>="0"&&s.charAt(pos)<="9"){number+=c;number+=s.charAt(pos++);c=s.charAt(pos++);while(c>="0"&&c<="9"){number+=c;c=s.charAt(pos++)}}types.push(XPathParser.NUMBER);values.push(number);continue}if(c=="*"){if(types.length>0){var last=types[types.length-1];if(last!=XPathParser.AT&&last!=XPathParser.DOUBLECOLON&&last!=XPathParser.LEFTPARENTHESIS&&
last!=XPathParser.LEFTBRACKET&&last!=XPathParser.AND&&last!=XPathParser.OR&&last!=XPathParser.MOD&&last!=XPathParser.DIV&&last!=XPathParser.MULTIPLYOPERATOR&&last!=XPathParser.SLASH&&last!=XPathParser.DOUBLESLASH&&last!=XPathParser.BAR&&last!=XPathParser.PLUS&&last!=XPathParser.MINUS&&last!=XPathParser.EQUALS&&last!=XPathParser.NOTEQUAL&&last!=XPathParser.LESSTHAN&&last!=XPathParser.LESSTHANOREQUAL&&last!=XPathParser.GREATERTHAN&&last!=XPathParser.GREATERTHANOREQUAL){types.push(XPathParser.MULTIPLYOPERATOR);
values.push(c);c=s.charAt(pos++);continue}}types.push(XPathParser.ASTERISKNAMETEST);values.push(c);c=s.charAt(pos++);continue}if(c==":")if(s.charAt(pos)==":"){types.push(XPathParser.DOUBLECOLON);values.push("::");pos++;c=s.charAt(pos++);continue}if(c=="/"){c=s.charAt(pos++);if(c=="/"){types.push(XPathParser.DOUBLESLASH);values.push("//");c=s.charAt(pos++);continue}types.push(XPathParser.SLASH);values.push("/");continue}if(c=="!")if(s.charAt(pos)=="="){types.push(XPathParser.NOTEQUAL);values.push("!=");
pos++;c=s.charAt(pos++);continue}if(c=="<"){if(s.charAt(pos)=="="){types.push(XPathParser.LESSTHANOREQUAL);values.push("<=");pos++;c=s.charAt(pos++);continue}types.push(XPathParser.LESSTHAN);values.push("<");c=s.charAt(pos++);continue}if(c==">"){if(s.charAt(pos)=="="){types.push(XPathParser.GREATERTHANOREQUAL);values.push(">=");pos++;c=s.charAt(pos++);continue}types.push(XPathParser.GREATERTHAN);values.push(">");c=s.charAt(pos++);continue}if(c=="_"||Utilities.isLetter(c.charCodeAt(0))){var name=c;
c=s.charAt(pos++);while(Utilities.isNCNameChar(c.charCodeAt(0))){name+=c;c=s.charAt(pos++)}if(types.length>0){var last=types[types.length-1];if(last!=XPathParser.AT&&last!=XPathParser.DOUBLECOLON&&last!=XPathParser.LEFTPARENTHESIS&&last!=XPathParser.LEFTBRACKET&&last!=XPathParser.AND&&last!=XPathParser.OR&&last!=XPathParser.MOD&&last!=XPathParser.DIV&&last!=XPathParser.MULTIPLYOPERATOR&&last!=XPathParser.SLASH&&last!=XPathParser.DOUBLESLASH&&last!=XPathParser.BAR&&last!=XPathParser.PLUS&&last!=XPathParser.MINUS&&
last!=XPathParser.EQUALS&&last!=XPathParser.NOTEQUAL&&last!=XPathParser.LESSTHAN&&last!=XPathParser.LESSTHANOREQUAL&&last!=XPathParser.GREATERTHAN&&last!=XPathParser.GREATERTHANOREQUAL){if(name=="and"){types.push(XPathParser.AND);values.push(name);continue}if(name=="or"){types.push(XPathParser.OR);values.push(name);continue}if(name=="mod"){types.push(XPathParser.MOD);values.push(name);continue}if(name=="div"){types.push(XPathParser.DIV);values.push(name);continue}}}if(c==":"){if(s.charAt(pos)=="*"){types.push(XPathParser.NCNAMECOLONASTERISK);
values.push(name+":*");pos++;c=s.charAt(pos++);continue}if(s.charAt(pos)=="_"||Utilities.isLetter(s.charCodeAt(pos))){name+=":";c=s.charAt(pos++);while(Utilities.isNCNameChar(c.charCodeAt(0))){name+=c;c=s.charAt(pos++)}if(c=="("){types.push(XPathParser.FUNCTIONNAME);values.push(name);continue}types.push(XPathParser.QNAME);values.push(name);continue}if(s.charAt(pos)==":"){types.push(XPathParser.AXISNAME);values.push(name);continue}}if(c=="("){if(name=="comment"||name=="text"||name=="node"){types.push(XPathParser.NODETYPE);
values.push(name);continue}if(name=="processing-instruction"){if(s.charAt(pos)==")")types.push(XPathParser.NODETYPE);else types.push(XPathParser.PROCESSINGINSTRUCTIONWITHLITERAL);values.push(name);continue}types.push(XPathParser.FUNCTIONNAME);values.push(name);continue}types.push(XPathParser.QNAME);values.push(name);continue}throw new Error("Unexpected character "+c);}types.push(1);values.push("[EOF]");return[types,values]};XPathParser.SHIFT="s";XPathParser.REDUCE="r";XPathParser.ACCEPT="a";XPathParser.prototype.parse=
function(s){var types;var values;var res=this.tokenize(s);if(res==undefined)return undefined;types=res[0];values=res[1];var tokenPos=0;var state=[];var tokenType=[];var tokenValue=[];var s;var a;var t;state.push(0);tokenType.push(1);tokenValue.push("_S");a=types[tokenPos];t=values[tokenPos++];while(1){s=state[state.length-1];switch(XPathParser.actionTable[s].charAt(a-1)){case XPathParser.SHIFT:tokenType.push(-a);tokenValue.push(t);state.push(XPathParser.actionTableNumber[s].charCodeAt(a-1)-32);a=
types[tokenPos];t=values[tokenPos++];break;case XPathParser.REDUCE:var num=XPathParser.productions[XPathParser.actionTableNumber[s].charCodeAt(a-1)-32][1];var rhs=[];for(var i=0;i<num;i++){tokenType.pop();rhs.unshift(tokenValue.pop());state.pop()}var s_=state[state.length-1];tokenType.push(XPathParser.productions[XPathParser.actionTableNumber[s].charCodeAt(a-1)-32][0]);if(this.reduceActions[XPathParser.actionTableNumber[s].charCodeAt(a-1)-32]==undefined)tokenValue.push(rhs[0]);else tokenValue.push(this.reduceActions[XPathParser.actionTableNumber[s].charCodeAt(a-
1)-32](rhs));state.push(XPathParser.gotoTable[s_].charCodeAt(XPathParser.productions[XPathParser.actionTableNumber[s].charCodeAt(a-1)-32][0]-2)-33);break;case XPathParser.ACCEPT:return new XPath(tokenValue.pop());default:throw new Error("XPath parse error");}}};XPath.prototype=new Object;XPath.prototype.constructor=XPath;XPath.superclass=Object.prototype;function XPath(e){this.expression=e}XPath.prototype.toString=function(){return this.expression.toString()};function setIfUnset(obj,prop,value){if(!(prop in
obj))obj[prop]=value}XPath.prototype.evaluate=function(c){c.contextNode=c.expressionContextNode;c.contextSize=1;c.contextPosition=1;if(c.isHtml){setIfUnset(c,"caseInsensitive",true);setIfUnset(c,"allowAnyNamespaceForNoPrefix",true)}setIfUnset(c,"caseInsensitive",false);return this.expression.evaluate(c)};XPath.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace";XPath.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/";Expression.prototype=new Object;Expression.prototype.constructor=Expression;
Expression.superclass=Object.prototype;function Expression(){}Expression.prototype.init=function(){};Expression.prototype.toString=function(){return"<Expression>"};Expression.prototype.evaluate=function(c){throw new Error("Could not evaluate expression.");};UnaryOperation.prototype=new Expression;UnaryOperation.prototype.constructor=UnaryOperation;UnaryOperation.superclass=Expression.prototype;function UnaryOperation(rhs){if(arguments.length>0)this.init(rhs)}UnaryOperation.prototype.init=function(rhs){this.rhs=
rhs};UnaryMinusOperation.prototype=new UnaryOperation;UnaryMinusOperation.prototype.constructor=UnaryMinusOperation;UnaryMinusOperation.superclass=UnaryOperation.prototype;function UnaryMinusOperation(rhs){if(arguments.length>0)this.init(rhs)}UnaryMinusOperation.prototype.init=function(rhs){UnaryMinusOperation.superclass.init.call(this,rhs)};UnaryMinusOperation.prototype.evaluate=function(c){return this.rhs.evaluate(c).number().negate()};UnaryMinusOperation.prototype.toString=function(){return"-"+
this.rhs.toString()};BinaryOperation.prototype=new Expression;BinaryOperation.prototype.constructor=BinaryOperation;BinaryOperation.superclass=Expression.prototype;function BinaryOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}BinaryOperation.prototype.init=function(lhs,rhs){this.lhs=lhs;this.rhs=rhs};OrOperation.prototype=new BinaryOperation;OrOperation.prototype.constructor=OrOperation;OrOperation.superclass=BinaryOperation.prototype;function OrOperation(lhs,rhs){if(arguments.length>
0)this.init(lhs,rhs)}OrOperation.prototype.init=function(lhs,rhs){OrOperation.superclass.init.call(this,lhs,rhs)};OrOperation.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"};OrOperation.prototype.evaluate=function(c){var b=this.lhs.evaluate(c).bool();if(b.booleanValue())return b;return this.rhs.evaluate(c).bool()};AndOperation.prototype=new BinaryOperation;AndOperation.prototype.constructor=AndOperation;AndOperation.superclass=BinaryOperation.prototype;
function AndOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}AndOperation.prototype.init=function(lhs,rhs){AndOperation.superclass.init.call(this,lhs,rhs)};AndOperation.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"};AndOperation.prototype.evaluate=function(c){var b=this.lhs.evaluate(c).bool();if(!b.booleanValue())return b;return this.rhs.evaluate(c).bool()};EqualsOperation.prototype=new BinaryOperation;EqualsOperation.prototype.constructor=
EqualsOperation;EqualsOperation.superclass=BinaryOperation.prototype;function EqualsOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}EqualsOperation.prototype.init=function(lhs,rhs){EqualsOperation.superclass.init.call(this,lhs,rhs)};EqualsOperation.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"};EqualsOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).equals(this.rhs.evaluate(c))};NotEqualOperation.prototype=new BinaryOperation;
NotEqualOperation.prototype.constructor=NotEqualOperation;NotEqualOperation.superclass=BinaryOperation.prototype;function NotEqualOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}NotEqualOperation.prototype.init=function(lhs,rhs){NotEqualOperation.superclass.init.call(this,lhs,rhs)};NotEqualOperation.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"};NotEqualOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).notequal(this.rhs.evaluate(c))};
LessThanOperation.prototype=new BinaryOperation;LessThanOperation.prototype.constructor=LessThanOperation;LessThanOperation.superclass=BinaryOperation.prototype;function LessThanOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}LessThanOperation.prototype.init=function(lhs,rhs){LessThanOperation.superclass.init.call(this,lhs,rhs)};LessThanOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).lessthan(this.rhs.evaluate(c))};LessThanOperation.prototype.toString=function(){return"("+
this.lhs.toString()+" < "+this.rhs.toString()+")"};GreaterThanOperation.prototype=new BinaryOperation;GreaterThanOperation.prototype.constructor=GreaterThanOperation;GreaterThanOperation.superclass=BinaryOperation.prototype;function GreaterThanOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}GreaterThanOperation.prototype.init=function(lhs,rhs){GreaterThanOperation.superclass.init.call(this,lhs,rhs)};GreaterThanOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).greaterthan(this.rhs.evaluate(c))};
GreaterThanOperation.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"};LessThanOrEqualOperation.prototype=new BinaryOperation;LessThanOrEqualOperation.prototype.constructor=LessThanOrEqualOperation;LessThanOrEqualOperation.superclass=BinaryOperation.prototype;function LessThanOrEqualOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}LessThanOrEqualOperation.prototype.init=function(lhs,rhs){LessThanOrEqualOperation.superclass.init.call(this,lhs,rhs)};
LessThanOrEqualOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).lessthanorequal(this.rhs.evaluate(c))};LessThanOrEqualOperation.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"};GreaterThanOrEqualOperation.prototype=new BinaryOperation;GreaterThanOrEqualOperation.prototype.constructor=GreaterThanOrEqualOperation;GreaterThanOrEqualOperation.superclass=BinaryOperation.prototype;function GreaterThanOrEqualOperation(lhs,rhs){if(arguments.length>
0)this.init(lhs,rhs)}GreaterThanOrEqualOperation.prototype.init=function(lhs,rhs){GreaterThanOrEqualOperation.superclass.init.call(this,lhs,rhs)};GreaterThanOrEqualOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).greaterthanorequal(this.rhs.evaluate(c))};GreaterThanOrEqualOperation.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"};PlusOperation.prototype=new BinaryOperation;PlusOperation.prototype.constructor=PlusOperation;PlusOperation.superclass=
BinaryOperation.prototype;function PlusOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}PlusOperation.prototype.init=function(lhs,rhs){PlusOperation.superclass.init.call(this,lhs,rhs)};PlusOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).number().plus(this.rhs.evaluate(c).number())};PlusOperation.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"};MinusOperation.prototype=new BinaryOperation;MinusOperation.prototype.constructor=
MinusOperation;MinusOperation.superclass=BinaryOperation.prototype;function MinusOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}MinusOperation.prototype.init=function(lhs,rhs){MinusOperation.superclass.init.call(this,lhs,rhs)};MinusOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).number().minus(this.rhs.evaluate(c).number())};MinusOperation.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"};MultiplyOperation.prototype=new BinaryOperation;
MultiplyOperation.prototype.constructor=MultiplyOperation;MultiplyOperation.superclass=BinaryOperation.prototype;function MultiplyOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}MultiplyOperation.prototype.init=function(lhs,rhs){MultiplyOperation.superclass.init.call(this,lhs,rhs)};MultiplyOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).number().multiply(this.rhs.evaluate(c).number())};MultiplyOperation.prototype.toString=function(){return"("+this.lhs.toString()+" * "+
this.rhs.toString()+")"};DivOperation.prototype=new BinaryOperation;DivOperation.prototype.constructor=DivOperation;DivOperation.superclass=BinaryOperation.prototype;function DivOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}DivOperation.prototype.init=function(lhs,rhs){DivOperation.superclass.init.call(this,lhs,rhs)};DivOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).number().div(this.rhs.evaluate(c).number())};DivOperation.prototype.toString=function(){return"("+
this.lhs.toString()+" div "+this.rhs.toString()+")"};ModOperation.prototype=new BinaryOperation;ModOperation.prototype.constructor=ModOperation;ModOperation.superclass=BinaryOperation.prototype;function ModOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}ModOperation.prototype.init=function(lhs,rhs){ModOperation.superclass.init.call(this,lhs,rhs)};ModOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).number().mod(this.rhs.evaluate(c).number())};ModOperation.prototype.toString=
function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"};BarOperation.prototype=new BinaryOperation;BarOperation.prototype.constructor=BarOperation;BarOperation.superclass=BinaryOperation.prototype;function BarOperation(lhs,rhs){if(arguments.length>0)this.init(lhs,rhs)}BarOperation.prototype.init=function(lhs,rhs){BarOperation.superclass.init.call(this,lhs,rhs)};BarOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).nodeset().union(this.rhs.evaluate(c).nodeset())};
BarOperation.prototype.toString=function(){return map(toString,[this.lhs,this.rhs]).join(" | ")};PathExpr.prototype=new Expression;PathExpr.prototype.constructor=PathExpr;PathExpr.superclass=Expression.prototype;function PathExpr(filter,filterPreds,locpath){if(arguments.length>0)this.init(filter,filterPreds,locpath)}PathExpr.prototype.init=function(filter,filterPreds,locpath){PathExpr.superclass.init.call(this);this.filter=filter;this.filterPredicates=filterPreds;this.locationPath=locpath};function findRoot(node){while(node&&
node.parentNode)node=node.parentNode;return node}PathExpr.applyPredicates=function(predicates,c,nodes){return reduce(function(inNodes,pred){var ctx=c.extend({contextSize:inNodes.length});return filter(function(node,i){return PathExpr.predicateMatches(pred,ctx.extend({contextNode:node,contextPosition:i+1}))},inNodes)},nodes,predicates)};PathExpr.getRoot=function(xpc,nodes){var firstNode=nodes[0];if(firstNode.nodeType===9)return firstNode;if(xpc.virtualRoot)return xpc.virtualRoot;var ownerDoc=firstNode.ownerDocument;
if(ownerDoc)return ownerDoc;var n=firstNode;while(n.parentNode!=null)n=n.parentNode;return n};PathExpr.applyStep=function(step,xpc,node){var self=this;var newNodes=[];xpc.contextNode=node;switch(step.axis){case Step.ANCESTOR:if(xpc.contextNode===xpc.virtualRoot)break;var m;if(xpc.contextNode.nodeType==2)m=PathExpr.getOwnerElement(xpc.contextNode);else m=xpc.contextNode.parentNode;while(m!=null){if(step.nodeTest.matches(m,xpc))newNodes.push(m);if(m===xpc.virtualRoot)break;m=m.parentNode}break;case Step.ANCESTORORSELF:for(var m=
xpc.contextNode;m!=null;m=m.nodeType==2?PathExpr.getOwnerElement(m):m.parentNode){if(step.nodeTest.matches(m,xpc))newNodes.push(m);if(m===xpc.virtualRoot)break}break;case Step.ATTRIBUTE:var nnm=xpc.contextNode.attributes;if(nnm!=null)for(var k=0;k<nnm.length;k++){var m=nnm.item(k);if(step.nodeTest.matches(m,xpc))newNodes.push(m)}break;case Step.CHILD:for(var m=xpc.contextNode.firstChild;m!=null;m=m.nextSibling)if(step.nodeTest.matches(m,xpc))newNodes.push(m);break;case Step.DESCENDANT:var st=[xpc.contextNode.firstChild];
while(st.length>0)for(var m=st.pop();m!=null;){if(step.nodeTest.matches(m,xpc))newNodes.push(m);if(m.firstChild!=null){st.push(m.nextSibling);m=m.firstChild}else m=m.nextSibling}break;case Step.DESCENDANTORSELF:if(step.nodeTest.matches(xpc.contextNode,xpc))newNodes.push(xpc.contextNode);var st=[xpc.contextNode.firstChild];while(st.length>0)for(var m=st.pop();m!=null;){if(step.nodeTest.matches(m,xpc))newNodes.push(m);if(m.firstChild!=null){st.push(m.nextSibling);m=m.firstChild}else m=m.nextSibling}break;
case Step.FOLLOWING:if(xpc.contextNode===xpc.virtualRoot)break;var st=[];if(xpc.contextNode.firstChild!=null)st.unshift(xpc.contextNode.firstChild);else st.unshift(xpc.contextNode.nextSibling);for(var m=xpc.contextNode.parentNode;m!=null&&m.nodeType!=9&&m!==xpc.virtualRoot;m=m.parentNode)st.unshift(m.nextSibling);do for(var m=st.pop();m!=null;){if(step.nodeTest.matches(m,xpc))newNodes.push(m);if(m.firstChild!=null){st.push(m.nextSibling);m=m.firstChild}else m=m.nextSibling}while(st.length>0);break;
case Step.FOLLOWINGSIBLING:if(xpc.contextNode===xpc.virtualRoot)break;for(var m=xpc.contextNode.nextSibling;m!=null;m=m.nextSibling)if(step.nodeTest.matches(m,xpc))newNodes.push(m);break;case Step.NAMESPACE:var n={};if(xpc.contextNode.nodeType==1){n["xml"]=XPath.XML_NAMESPACE_URI;n["xmlns"]=XPath.XMLNS_NAMESPACE_URI;for(var m=xpc.contextNode;m!=null&&m.nodeType==1;m=m.parentNode)for(var k=0;k<m.attributes.length;k++){var attr=m.attributes.item(k);var nm=String(attr.name);if(nm=="xmlns"){if(n[""]==
undefined)n[""]=attr.value}else if(nm.length>6&&nm.substring(0,6)=="xmlns:"){var pre=nm.substring(6,nm.length);if(n[pre]==undefined)n[pre]=attr.value}}for(var pre in n){var nsn=new XPathNamespace(pre,n[pre],xpc.contextNode);if(step.nodeTest.matches(nsn,xpc))newNodes.push(nsn)}}break;case Step.PARENT:m=null;if(xpc.contextNode!==xpc.virtualRoot)if(xpc.contextNode.nodeType==2)m=PathExpr.getOwnerElement(xpc.contextNode);else m=xpc.contextNode.parentNode;if(m!=null&&step.nodeTest.matches(m,xpc))newNodes.push(m);
break;case Step.PRECEDING:var st;if(xpc.virtualRoot!=null)st=[xpc.virtualRoot];else st=[findRoot(xpc.contextNode)];outer:while(st.length>0)for(var m=st.pop();m!=null;){if(m==xpc.contextNode)break outer;if(step.nodeTest.matches(m,xpc))newNodes.unshift(m);if(m.firstChild!=null){st.push(m.nextSibling);m=m.firstChild}else m=m.nextSibling}break;case Step.PRECEDINGSIBLING:if(xpc.contextNode===xpc.virtualRoot)break;for(var m=xpc.contextNode.previousSibling;m!=null;m=m.previousSibling)if(step.nodeTest.matches(m,
xpc))newNodes.push(m);break;case Step.SELF:if(step.nodeTest.matches(xpc.contextNode,xpc))newNodes.push(xpc.contextNode);break;default:}return newNodes};PathExpr.applySteps=function(steps,xpc,nodes){return reduce(function(inNodes,step){return[].concat.apply([],map(function(node){return PathExpr.applyPredicates(step.predicates,xpc,PathExpr.applyStep(step,xpc,node))},inNodes))},nodes,steps)};PathExpr.prototype.applyFilter=function(c,xpc){if(!this.filter)return{nodes:[c.contextNode]};var ns=this.filter.evaluate(c);
if(!Utilities.instance_of(ns,XNodeSet)){if(this.filterPredicates!=null&&this.filterPredicates.length>0||this.locationPath!=null)throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used");return{nonNodes:ns}}return{nodes:PathExpr.applyPredicates(this.filterPredicates||[],xpc,ns.toUnsortedArray())}};PathExpr.applyLocationPath=function(locationPath,xpc,nodes){if(!locationPath)return nodes;var startNodes=locationPath.absolute?[PathExpr.getRoot(xpc,nodes)]:
nodes;return PathExpr.applySteps(locationPath.steps,xpc,startNodes)};PathExpr.prototype.evaluate=function(c){var xpc=assign(new XPathContext,c);var filterResult=this.applyFilter(c,xpc);if("nonNodes"in filterResult)return filterResult.nonNodes;var ns=new XNodeSet;ns.addArray(PathExpr.applyLocationPath(this.locationPath,xpc,filterResult.nodes));return ns};PathExpr.predicateMatches=function(pred,c){var res=pred.evaluate(c);return Utilities.instance_of(res,XNumber)?c.contextPosition==res.numberValue():
res.booleanValue()};PathExpr.predicateString=compose(wrap("[","]"),toString);PathExpr.predicatesString=compose(join(""),map(PathExpr.predicateString));PathExpr.prototype.toString=function(){if(this.filter!=undefined){var filterStr=toString(this.filter);if(Utilities.instance_of(this.filter,XString))return wrap("'","'",filterStr);if(this.filterPredicates!=undefined&&this.filterPredicates.length)return wrap("(",")",filterStr)+PathExpr.predicatesString(this.filterPredicates);if(this.locationPath!=undefined)return filterStr+
(this.locationPath.absolute?"":"/")+toString(this.locationPath);return filterStr}return toString(this.locationPath)};PathExpr.getOwnerElement=function(n){if(n.ownerElement)return n.ownerElement;try{if(n.selectSingleNode)return n.selectSingleNode("..")}catch(e){}var doc=n.nodeType==9?n:n.ownerDocument;var elts=doc.getElementsByTagName("*");for(var i=0;i<elts.length;i++){var elt=elts.item(i);var nnm=elt.attributes;for(var j=0;j<nnm.length;j++){var an=nnm.item(j);if(an===n)return elt}}return null};LocationPath.prototype=
new Object;LocationPath.prototype.constructor=LocationPath;LocationPath.superclass=Object.prototype;function LocationPath(abs,steps){if(arguments.length>0)this.init(abs,steps)}LocationPath.prototype.init=function(abs,steps){this.absolute=abs;this.steps=steps};LocationPath.prototype.toString=function(){return(this.absolute?"/":"")+map(toString,this.steps).join("/")};Step.prototype=new Object;Step.prototype.constructor=Step;Step.superclass=Object.prototype;function Step(axis,nodetest,preds){if(arguments.length>
0)this.init(axis,nodetest,preds)}Step.prototype.init=function(axis,nodetest,preds){this.axis=axis;this.nodeTest=nodetest;this.predicates=preds};Step.prototype.toString=function(){return Step.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+PathExpr.predicatesString(this.predicates)};Step.ANCESTOR=0;Step.ANCESTORORSELF=1;Step.ATTRIBUTE=2;Step.CHILD=3;Step.DESCENDANT=4;Step.DESCENDANTORSELF=5;Step.FOLLOWING=6;Step.FOLLOWINGSIBLING=7;Step.NAMESPACE=8;Step.PARENT=9;Step.PRECEDING=10;Step.PRECEDINGSIBLING=
11;Step.SELF=12;Step.STEPNAMES=reduce(function(acc,x){return acc[x[0]]=x[1],acc},{},[[Step.ANCESTOR,"ancestor"],[Step.ANCESTORORSELF,"ancestor-or-self"],[Step.ATTRIBUTE,"attribute"],[Step.CHILD,"child"],[Step.DESCENDANT,"descendant"],[Step.DESCENDANTORSELF,"descendant-or-self"],[Step.FOLLOWING,"following"],[Step.FOLLOWINGSIBLING,"following-sibling"],[Step.NAMESPACE,"namespace"],[Step.PARENT,"parent"],[Step.PRECEDING,"preceding"],[Step.PRECEDINGSIBLING,"preceding-sibling"],[Step.SELF,"self"]]);NodeTest.prototype=
new Object;NodeTest.prototype.constructor=NodeTest;NodeTest.superclass=Object.prototype;function NodeTest(type,value){if(arguments.length>0)this.init(type,value)}NodeTest.prototype.init=function(type,value){this.type=type;this.value=value};NodeTest.prototype.toString=function(){return"<unknown nodetest type>"};NodeTest.prototype.matches=function(n,xpc){console.warn("unknown node test type")};NodeTest.NAMETESTANY=0;NodeTest.NAMETESTPREFIXANY=1;NodeTest.NAMETESTQNAME=2;NodeTest.COMMENT=3;NodeTest.TEXT=
4;NodeTest.PI=5;NodeTest.NODE=6;NodeTest.isNodeType=function(types){return compose(includes(types),prop("nodeType"))};NodeTest.makeNodeTestType=function(type,members,ctor){var newType=ctor||function(){};newType.prototype=new NodeTest(members.type);newType.prototype.constructor=type;for(var key in members)newType.prototype[key]=members[key];return newType};NodeTest.makeNodeTypeTest=function(type,nodeTypes,stringVal){return new (NodeTest.makeNodeTestType(type,{matches:NodeTest.isNodeType(nodeTypes),
toString:always(stringVal)}))};NodeTest.hasPrefix=function(node){return node.prefix||(node.nodeName||node.tagName).indexOf(":")!==-1};NodeTest.isElementOrAttribute=NodeTest.isNodeType([1,2]);NodeTest.nameSpaceMatches=function(prefix,xpc,n){var nNamespace=n.namespaceURI||"";if(!prefix)return!nNamespace||xpc.allowAnyNamespaceForNoPrefix&&!NodeTest.hasPrefix(n);var ns=xpc.namespaceResolver.getNamespace(prefix,xpc.expressionContextNode);if(ns==null)throw new Error("Cannot resolve QName "+prefix);return ns===
nNamespace};NodeTest.localNameMatches=function(localName,xpc,n){var nLocalName=n.localName||n.nodeName;return xpc.caseInsensitive?localName.toLowerCase()===nLocalName.toLowerCase():localName===nLocalName};NodeTest.NameTestPrefixAny=NodeTest.makeNodeTestType(NodeTest.NAMETESTPREFIXANY,{matches:function(n,xpc){return NodeTest.isElementOrAttribute(n)&&NodeTest.nameSpaceMatches(this.prefix,xpc,n)},toString:function(){return this.prefix+":*"}},function(prefix){this.prefix=prefix});NodeTest.NameTestQName=
NodeTest.makeNodeTestType(NodeTest.NAMETESTQNAME,{matches:function(n,xpc){return NodeTest.isNodeType([1,2,XPathNamespace.XPATH_NAMESPACE_NODE])(n)&&NodeTest.nameSpaceMatches(this.prefix,xpc,n)&&NodeTest.localNameMatches(this.localName,xpc,n)},toString:function(){return this.name}},function(name){var nameParts=name.split(":");this.name=name;this.prefix=nameParts.length>1?nameParts[0]:null;this.localName=nameParts[nameParts.length>1?1:0]});NodeTest.PITest=NodeTest.makeNodeTestType(NodeTest.PI,{matches:function(n,
xpc){return NodeTest.isNodeType([7])(n)&&(n.target||n.nodeName)===this.name},toString:function(){return wrap('processing-instruction("','")',this.name)}},function(name){this.name=name});NodeTest.nameTestAny=NodeTest.makeNodeTypeTest(NodeTest.NAMETESTANY,[1,2,XPathNamespace.XPATH_NAMESPACE_NODE],"*");NodeTest.textTest=NodeTest.makeNodeTypeTest(NodeTest.TEXT,[3,4],"text()");NodeTest.commentTest=NodeTest.makeNodeTypeTest(NodeTest.COMMENT,[8],"comment()");NodeTest.nodeTest=NodeTest.makeNodeTypeTest(NodeTest.NODE,
[1,2,3,4,7,8,9],"node()");NodeTest.anyPiTest=NodeTest.makeNodeTypeTest(NodeTest.PI,[7],"processing-instruction()");VariableReference.prototype=new Expression;VariableReference.prototype.constructor=VariableReference;VariableReference.superclass=Expression.prototype;function VariableReference(v){if(arguments.length>0)this.init(v)}VariableReference.prototype.init=function(v){this.variable=v};VariableReference.prototype.toString=function(){return"$"+this.variable};VariableReference.prototype.evaluate=
function(c){var parts=Utilities.resolveQName(this.variable,c.namespaceResolver,c.contextNode,false);if(parts[0]==null)throw new Error("Cannot resolve QName "+fn);var result=c.variableResolver.getVariable(parts[1],parts[0]);if(!result)throw XPathException.fromMessage("Undeclared variable: "+this.toString());return result};FunctionCall.prototype=new Expression;FunctionCall.prototype.constructor=FunctionCall;FunctionCall.superclass=Expression.prototype;function FunctionCall(fn,args){if(arguments.length>
0)this.init(fn,args)}FunctionCall.prototype.init=function(fn,args){this.functionName=fn;this.arguments=args};FunctionCall.prototype.toString=function(){var s=this.functionName+"(";for(var i=0;i<this.arguments.length;i++){if(i>0)s+=", ";s+=this.arguments[i].toString()}return s+")"};FunctionCall.prototype.evaluate=function(c){var f=FunctionResolver.getFunctionFromContext(this.functionName,c);if(!f)throw new Error("Unknown function "+this.functionName);var a=[c].concat(this.arguments);return f.apply(c.functionResolver.thisArg,
a)};var Operators=new Object;Operators.equals=function(l,r){return l.equals(r)};Operators.notequal=function(l,r){return l.notequal(r)};Operators.lessthan=function(l,r){return l.lessthan(r)};Operators.greaterthan=function(l,r){return l.greaterthan(r)};Operators.lessthanorequal=function(l,r){return l.lessthanorequal(r)};Operators.greaterthanorequal=function(l,r){return l.greaterthanorequal(r)};XString.prototype=new Expression;XString.prototype.constructor=XString;XString.superclass=Expression.prototype;
function XString(s){if(arguments.length>0)this.init(s)}XString.prototype.init=function(s){this.str=String(s)};XString.prototype.toString=function(){return this.str};XString.prototype.evaluate=function(c){return this};XString.prototype.string=function(){return this};XString.prototype.number=function(){return new XNumber(this.str)};XString.prototype.bool=function(){return new XBoolean(this.str)};XString.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset");};XString.prototype.stringValue=
function(){return this.str};XString.prototype.numberValue=function(){return this.number().numberValue()};XString.prototype.booleanValue=function(){return this.bool().booleanValue()};XString.prototype.equals=function(r){if(Utilities.instance_of(r,XBoolean))return this.bool().equals(r);if(Utilities.instance_of(r,XNumber))return this.number().equals(r);if(Utilities.instance_of(r,XNodeSet))return r.compareWithString(this,Operators.equals);return new XBoolean(this.str==r.str)};XString.prototype.notequal=
function(r){if(Utilities.instance_of(r,XBoolean))return this.bool().notequal(r);if(Utilities.instance_of(r,XNumber))return this.number().notequal(r);if(Utilities.instance_of(r,XNodeSet))return r.compareWithString(this,Operators.notequal);return new XBoolean(this.str!=r.str)};XString.prototype.lessthan=function(r){return this.number().lessthan(r)};XString.prototype.greaterthan=function(r){return this.number().greaterthan(r)};XString.prototype.lessthanorequal=function(r){return this.number().lessthanorequal(r)};
XString.prototype.greaterthanorequal=function(r){return this.number().greaterthanorequal(r)};XNumber.prototype=new Expression;XNumber.prototype.constructor=XNumber;XNumber.superclass=Expression.prototype;function XNumber(n){if(arguments.length>0)this.init(n)}XNumber.prototype.init=function(n){this.num=typeof n==="string"?this.parse(n):Number(n)};XNumber.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/;XNumber.prototype.parse=function(s){return this.numberFormat.test(s)?parseFloat(s):Number.NaN};
function padSmallNumber(numberStr){var parts=numberStr.split("e-");var base=parts[0].replace(".","");var exponent=Number(parts[1]);for(var i=0;i<exponent-1;i+=1)base="0"+base;return"0."+base}function padLargeNumber(numberStr){var parts=numberStr.split("e");var base=parts[0].replace(".","");var exponent=Number(parts[1]);var zerosToAppend=exponent+1-base.length;for(var i=0;i<zerosToAppend;i+=1)base+="0";return base}XNumber.prototype.toString=function(){var strValue=this.num.toString();if(strValue.indexOf("e-")!==
-1)return padSmallNumber(strValue);if(strValue.indexOf("e")!==-1)return padLargeNumber(strValue);return strValue};XNumber.prototype.evaluate=function(c){return this};XNumber.prototype.string=function(){return new XString(this.toString())};XNumber.prototype.number=function(){return this};XNumber.prototype.bool=function(){return new XBoolean(this.num)};XNumber.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset");};XNumber.prototype.stringValue=function(){return this.string().stringValue()};
XNumber.prototype.numberValue=function(){return this.num};XNumber.prototype.booleanValue=function(){return this.bool().booleanValue()};XNumber.prototype.negate=function(){return new XNumber(-this.num)};XNumber.prototype.equals=function(r){if(Utilities.instance_of(r,XBoolean))return this.bool().equals(r);if(Utilities.instance_of(r,XString))return this.equals(r.number());if(Utilities.instance_of(r,XNodeSet))return r.compareWithNumber(this,Operators.equals);return new XBoolean(this.num==r.num)};XNumber.prototype.notequal=
function(r){if(Utilities.instance_of(r,XBoolean))return this.bool().notequal(r);if(Utilities.instance_of(r,XString))return this.notequal(r.number());if(Utilities.instance_of(r,XNodeSet))return r.compareWithNumber(this,Operators.notequal);return new XBoolean(this.num!=r.num)};XNumber.prototype.lessthan=function(r){if(Utilities.instance_of(r,XNodeSet))return r.compareWithNumber(this,Operators.greaterthan);if(Utilities.instance_of(r,XBoolean)||Utilities.instance_of(r,XString))return this.lessthan(r.number());
return new XBoolean(this.num<r.num)};XNumber.prototype.greaterthan=function(r){if(Utilities.instance_of(r,XNodeSet))return r.compareWithNumber(this,Operators.lessthan);if(Utilities.instance_of(r,XBoolean)||Utilities.instance_of(r,XString))return this.greaterthan(r.number());return new XBoolean(this.num>r.num)};XNumber.prototype.lessthanorequal=function(r){if(Utilities.instance_of(r,XNodeSet))return r.compareWithNumber(this,Operators.greaterthanorequal);if(Utilities.instance_of(r,XBoolean)||Utilities.instance_of(r,
XString))return this.lessthanorequal(r.number());return new XBoolean(this.num<=r.num)};XNumber.prototype.greaterthanorequal=function(r){if(Utilities.instance_of(r,XNodeSet))return r.compareWithNumber(this,Operators.lessthanorequal);if(Utilities.instance_of(r,XBoolean)||Utilities.instance_of(r,XString))return this.greaterthanorequal(r.number());return new XBoolean(this.num>=r.num)};XNumber.prototype.plus=function(r){return new XNumber(this.num+r.num)};XNumber.prototype.minus=function(r){return new XNumber(this.num-
r.num)};XNumber.prototype.multiply=function(r){return new XNumber(this.num*r.num)};XNumber.prototype.div=function(r){return new XNumber(this.num/r.num)};XNumber.prototype.mod=function(r){return new XNumber(this.num%r.num)};XBoolean.prototype=new Expression;XBoolean.prototype.constructor=XBoolean;XBoolean.superclass=Expression.prototype;function XBoolean(b){if(arguments.length>0)this.init(b)}XBoolean.prototype.init=function(b){this.b=Boolean(b)};XBoolean.prototype.toString=function(){return this.b.toString()};
XBoolean.prototype.evaluate=function(c){return this};XBoolean.prototype.string=function(){return new XString(this.b)};XBoolean.prototype.number=function(){return new XNumber(this.b)};XBoolean.prototype.bool=function(){return this};XBoolean.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset");};XBoolean.prototype.stringValue=function(){return this.string().stringValue()};XBoolean.prototype.numberValue=function(){return this.number().numberValue()};XBoolean.prototype.booleanValue=
function(){return this.b};XBoolean.prototype.not=function(){return new XBoolean(!this.b)};XBoolean.prototype.equals=function(r){if(Utilities.instance_of(r,XString)||Utilities.instance_of(r,XNumber))return this.equals(r.bool());if(Utilities.instance_of(r,XNodeSet))return r.compareWithBoolean(this,Operators.equals);return new XBoolean(this.b==r.b)};XBoolean.prototype.notequal=function(r){if(Utilities.instance_of(r,XString)||Utilities.instance_of(r,XNumber))return this.notequal(r.bool());if(Utilities.instance_of(r,
XNodeSet))return r.compareWithBoolean(this,Operators.notequal);return new XBoolean(this.b!=r.b)};XBoolean.prototype.lessthan=function(r){return this.number().lessthan(r)};XBoolean.prototype.greaterthan=function(r){return this.number().greaterthan(r)};XBoolean.prototype.lessthanorequal=function(r){return this.number().lessthanorequal(r)};XBoolean.prototype.greaterthanorequal=function(r){return this.number().greaterthanorequal(r)};XBoolean.true_=new XBoolean(true);XBoolean.false_=new XBoolean(false);
AVLTree.prototype=new Object;AVLTree.prototype.constructor=AVLTree;AVLTree.superclass=Object.prototype;function AVLTree(n){this.init(n)}AVLTree.prototype.init=function(n){this.left=null;this.right=null;this.node=n;this.depth=1};AVLTree.prototype.balance=function(){var ldepth=this.left==null?0:this.left.depth;var rdepth=this.right==null?0:this.right.depth;if(ldepth>rdepth+1){var lldepth=this.left.left==null?0:this.left.left.depth;var lrdepth=this.left.right==null?0:this.left.right.depth;if(lldepth<
lrdepth)this.left.rotateRR();this.rotateLL()}else if(ldepth+1<rdepth){var rrdepth=this.right.right==null?0:this.right.right.depth;var rldepth=this.right.left==null?0:this.right.left.depth;if(rldepth>rrdepth)this.right.rotateLL();this.rotateRR()}};AVLTree.prototype.rotateLL=function(){var nodeBefore=this.node;var rightBefore=this.right;this.node=this.left.node;this.right=this.left;this.left=this.left.left;this.right.left=this.right.right;this.right.right=rightBefore;this.right.node=nodeBefore;this.right.updateInNewLocation();
this.updateInNewLocation()};AVLTree.prototype.rotateRR=function(){var nodeBefore=this.node;var leftBefore=this.left;this.node=this.right.node;this.left=this.right;this.right=this.right.right;this.left.right=this.left.left;this.left.left=leftBefore;this.left.node=nodeBefore;this.left.updateInNewLocation();this.updateInNewLocation()};AVLTree.prototype.updateInNewLocation=function(){this.getDepthFromChildren()};AVLTree.prototype.getDepthFromChildren=function(){this.depth=this.node==null?0:1;if(this.left!=
null)this.depth=this.left.depth+1;if(this.right!=null&&this.depth<=this.right.depth)this.depth=this.right.depth+1};function nodeOrder(n1,n2){if(n1===n2)return 0;if(n1.compareDocumentPosition){var cpos=n1.compareDocumentPosition(n2);if(cpos&1)return 1;if(cpos&10)return 1;if(cpos&20)return-1;return 0}var d1=0,d2=0;for(var m1=n1;m1!=null;m1=m1.parentNode||m1.ownerElement)d1++;for(var m2=n2;m2!=null;m2=m2.parentNode||m2.ownerElement)d2++;if(d1>d2){while(d1>d2){n1=n1.parentNode||n1.ownerElement;d1--}if(n1===
n2)return 1}else if(d2>d1){while(d2>d1){n2=n2.parentNode||n2.ownerElement;d2--}if(n1===n2)return-1}var n1Par=n1.parentNode||n1.ownerElement,n2Par=n2.parentNode||n2.ownerElement;while(n1Par!==n2Par){n1=n1Par;n2=n2Par;n1Par=n1.parentNode||n1.ownerElement;n2Par=n2.parentNode||n2.ownerElement}var n1isAttr=Utilities.isAttribute(n1);var n2isAttr=Utilities.isAttribute(n2);if(n1isAttr&&!n2isAttr)return-1;if(!n1isAttr&&n2isAttr)return 1;if(n1Par){var cn=n1isAttr?n1Par.attributes:n1Par.childNodes,len=cn.length;
for(var i=0;i<len;i+=1){var n=cn[i];if(n===n1)return-1;if(n===n2)return 1}}throw new Error("Unexpected: could not determine node order");}AVLTree.prototype.add=function(n){if(n===this.node)return false;var o=nodeOrder(n,this.node);var ret=false;if(o==-1)if(this.left==null){this.left=new AVLTree(n);ret=true}else{ret=this.left.add(n);if(ret)this.balance()}else if(o==1)if(this.right==null){this.right=new AVLTree(n);ret=true}else{ret=this.right.add(n);if(ret)this.balance()}if(ret)this.getDepthFromChildren();
return ret};XNodeSet.prototype=new Expression;XNodeSet.prototype.constructor=XNodeSet;XNodeSet.superclass=Expression.prototype;function XNodeSet(){this.init()}XNodeSet.prototype.init=function(){this.tree=null;this.nodes=[];this.size=0};XNodeSet.prototype.toString=function(){var p=this.first();if(p==null)return"";return this.stringForNode(p)};XNodeSet.prototype.evaluate=function(c){return this};XNodeSet.prototype.string=function(){return new XString(this.toString())};XNodeSet.prototype.stringValue=
function(){return this.toString()};XNodeSet.prototype.number=function(){return new XNumber(this.string())};XNodeSet.prototype.numberValue=function(){return Number(this.string())};XNodeSet.prototype.bool=function(){return new XBoolean(this.booleanValue())};XNodeSet.prototype.booleanValue=function(){return!!this.size};XNodeSet.prototype.nodeset=function(){return this};XNodeSet.prototype.stringForNode=function(n){if(n.nodeType==9||n.nodeType==1||n.nodeType===11)return this.stringForContainerNode(n);
if(n.nodeType===2)return n.value||n.nodeValue;if(n.isNamespaceNode)return n.namespace;return n.nodeValue};XNodeSet.prototype.stringForContainerNode=function(n){var s="";for(var n2=n.firstChild;n2!=null;n2=n2.nextSibling){var nt=n2.nodeType;if(nt===1||nt===3||nt===4||nt===9||nt===11)s+=this.stringForNode(n2)}return s};XNodeSet.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new AVLTree(this.nodes[0]);for(var i=1;i<this.nodes.length;i+=1)this.tree.add(this.nodes[i])}return this.tree};
XNodeSet.prototype.first=function(){var p=this.buildTree();if(p==null)return null;while(p.left!=null)p=p.left;return p.node};XNodeSet.prototype.add=function(n){for(var i=0;i<this.nodes.length;i+=1)if(n===this.nodes[i])return;this.tree=null;this.nodes.push(n);this.size+=1};XNodeSet.prototype.addArray=function(ns){var self=this;forEach(function(x){self.add(x)},ns)};XNodeSet.prototype.toArray=function(){var a=[];this.toArrayRec(this.buildTree(),a);return a};XNodeSet.prototype.toArrayRec=function(t,a){if(t!=
null){this.toArrayRec(t.left,a);a.push(t.node);this.toArrayRec(t.right,a)}};XNodeSet.prototype.toUnsortedArray=function(){return this.nodes.slice()};XNodeSet.prototype.compareWithString=function(r,o){var a=this.toUnsortedArray();for(var i=0;i<a.length;i++){var n=a[i];var l=new XString(this.stringForNode(n));var res=o(l,r);if(res.booleanValue())return res}return new XBoolean(false)};XNodeSet.prototype.compareWithNumber=function(r,o){var a=this.toUnsortedArray();for(var i=0;i<a.length;i++){var n=a[i];
var l=new XNumber(this.stringForNode(n));var res=o(l,r);if(res.booleanValue())return res}return new XBoolean(false)};XNodeSet.prototype.compareWithBoolean=function(r,o){return o(this.bool(),r)};XNodeSet.prototype.compareWithNodeSet=function(r,o){var arr=this.toUnsortedArray();var oInvert=function(lop,rop){return o(rop,lop)};for(var i=0;i<arr.length;i++){var l=new XString(this.stringForNode(arr[i]));var res=r.compareWithString(l,oInvert);if(res.booleanValue())return res}return new XBoolean(false)};
XNodeSet.compareWith=curry(function(o,r){if(Utilities.instance_of(r,XString))return this.compareWithString(r,o);if(Utilities.instance_of(r,XNumber))return this.compareWithNumber(r,o);if(Utilities.instance_of(r,XBoolean))return this.compareWithBoolean(r,o);return this.compareWithNodeSet(r,o)});XNodeSet.prototype.equals=XNodeSet.compareWith(Operators.equals);XNodeSet.prototype.notequal=XNodeSet.compareWith(Operators.notequal);XNodeSet.prototype.lessthan=XNodeSet.compareWith(Operators.lessthan);XNodeSet.prototype.greaterthan=
XNodeSet.compareWith(Operators.greaterthan);XNodeSet.prototype.lessthanorequal=XNodeSet.compareWith(Operators.lessthanorequal);XNodeSet.prototype.greaterthanorequal=XNodeSet.compareWith(Operators.greaterthanorequal);XNodeSet.prototype.union=function(r){var ns=new XNodeSet;ns.addArray(this.toUnsortedArray());ns.addArray(r.toUnsortedArray());return ns};XPathNamespace.prototype=new Object;XPathNamespace.prototype.constructor=XPathNamespace;XPathNamespace.superclass=Object.prototype;function XPathNamespace(pre,
ns,p){this.isXPathNamespace=true;this.ownerDocument=p.ownerDocument;this.nodeName="#namespace";this.prefix=pre;this.localName=pre;this.namespaceURI=ns;this.nodeValue=ns;this.ownerElement=p;this.nodeType=XPathNamespace.XPATH_NAMESPACE_NODE}XPathNamespace.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'};XPathContext.prototype=new Object;XPathContext.prototype.constructor=XPathContext;XPathContext.superclass=Object.prototype;function XPathContext(vr,nr,fr){this.variableResolver=
vr!=null?vr:new VariableResolver;this.namespaceResolver=nr!=null?nr:new NamespaceResolver;this.functionResolver=fr!=null?fr:new FunctionResolver}XPathContext.prototype.extend=function(newProps){return assign(new XPathContext,this,newProps)};VariableResolver.prototype=new Object;VariableResolver.prototype.constructor=VariableResolver;VariableResolver.superclass=Object.prototype;function VariableResolver(){}VariableResolver.prototype.getVariable=function(ln,ns){return null};FunctionResolver.prototype=
new Object;FunctionResolver.prototype.constructor=FunctionResolver;FunctionResolver.superclass=Object.prototype;function FunctionResolver(thisArg){this.thisArg=thisArg!=null?thisArg:Functions;this.functions=new Object;this.addStandardFunctions()}FunctionResolver.prototype.addStandardFunctions=function(){this.functions["{}last"]=Functions.last;this.functions["{}position"]=Functions.position;this.functions["{}count"]=Functions.count;this.functions["{}id"]=Functions.id;this.functions["{}local-name"]=
Functions.localName;this.functions["{}namespace-uri"]=Functions.namespaceURI;this.functions["{}name"]=Functions.name;this.functions["{}string"]=Functions.string;this.functions["{}concat"]=Functions.concat;this.functions["{}starts-with"]=Functions.startsWith;this.functions["{}contains"]=Functions.contains;this.functions["{}substring-before"]=Functions.substringBefore;this.functions["{}substring-after"]=Functions.substringAfter;this.functions["{}substring"]=Functions.substring;this.functions["{}string-length"]=
Functions.stringLength;this.functions["{}normalize-space"]=Functions.normalizeSpace;this.functions["{}translate"]=Functions.translate;this.functions["{}boolean"]=Functions.boolean_;this.functions["{}not"]=Functions.not;this.functions["{}true"]=Functions.true_;this.functions["{}false"]=Functions.false_;this.functions["{}lang"]=Functions.lang;this.functions["{}number"]=Functions.number;this.functions["{}sum"]=Functions.sum;this.functions["{}floor"]=Functions.floor;this.functions["{}ceiling"]=Functions.ceiling;
this.functions["{}round"]=Functions.round};FunctionResolver.prototype.addFunction=function(ns,ln,f){this.functions["{"+ns+"}"+ln]=f};FunctionResolver.getFunctionFromContext=function(qName,context){var parts=Utilities.resolveQName(qName,context.namespaceResolver,context.contextNode,false);if(parts[0]===null)throw new Error("Cannot resolve QName "+qName);return context.functionResolver.getFunction(parts[1],parts[0])};FunctionResolver.prototype.getFunction=function(localName,namespace){return this.functions["{"+
namespace+"}"+localName]};NamespaceResolver.prototype=new Object;NamespaceResolver.prototype.constructor=NamespaceResolver;NamespaceResolver.superclass=Object.prototype;function NamespaceResolver(){}NamespaceResolver.prototype.getNamespace=function(prefix,n){if(prefix=="xml")return XPath.XML_NAMESPACE_URI;else if(prefix=="xmlns")return XPath.XMLNS_NAMESPACE_URI;if(n.nodeType==9)n=n.documentElement;else if(n.nodeType==2)n=PathExpr.getOwnerElement(n);else if(n.nodeType!=1)n=n.parentNode;while(n!=null&&
n.nodeType==1){var nnm=n.attributes;for(var i=0;i<nnm.length;i++){var a=nnm.item(i);var aname=a.name||a.nodeName;if(aname==="xmlns"&&prefix===""||aname==="xmlns:"+prefix)return String(a.value||a.nodeValue)}n=n.parentNode}return null};var Functions=new Object;Functions.last=function(c){if(arguments.length!=1)throw new Error("Function last expects ()");return new XNumber(c.contextSize)};Functions.position=function(c){if(arguments.length!=1)throw new Error("Function position expects ()");return new XNumber(c.contextPosition)};
Functions.count=function(){var c=arguments[0];var ns;if(arguments.length!=2||!Utilities.instance_of(ns=arguments[1].evaluate(c),XNodeSet))throw new Error("Function count expects (node-set)");return new XNumber(ns.size)};Functions.id=function(){var c=arguments[0];var id;if(arguments.length!=2)throw new Error("Function id expects (object)");id=arguments[1].evaluate(c);if(Utilities.instance_of(id,XNodeSet))id=id.toArray().join(" ");else id=id.stringValue();var ids=id.split(/[\x0d\x0a\x09\x20]+/);var count=
0;var ns=new XNodeSet;var doc=c.contextNode.nodeType==9?c.contextNode:c.contextNode.ownerDocument;for(var i=0;i<ids.length;i++){var n;if(doc.getElementById)n=doc.getElementById(ids[i]);else n=Utilities.getElementById(doc,ids[i]);if(n!=null){ns.add(n);count++}}return ns};Functions.localName=function(c,eNode){var n;if(arguments.length==1)n=c.contextNode;else if(arguments.length==2)n=eNode.evaluate(c).first();else throw new Error("Function local-name expects (node-set?)");if(n==null)return new XString("");
return new XString(n.localName||n.baseName||n.target||n.nodeName||"")};Functions.namespaceURI=function(){var c=arguments[0];var n;if(arguments.length==1)n=c.contextNode;else if(arguments.length==2)n=arguments[1].evaluate(c).first();else throw new Error("Function namespace-uri expects (node-set?)");if(n==null)return new XString("");return new XString(n.namespaceURI)};Functions.name=function(){var c=arguments[0];var n;if(arguments.length==1)n=c.contextNode;else if(arguments.length==2)n=arguments[1].evaluate(c).first();
else throw new Error("Function name expects (node-set?)");if(n==null)return new XString("");if(n.nodeType==1)return new XString(n.nodeName);else if(n.nodeType==2)return new XString(n.name||n.nodeName);else if(n.nodeType===7)return new XString(n.target||n.nodeName);else if(n.localName==null)return new XString("");else return new XString(n.localName)};Functions.string=function(){var c=arguments[0];if(arguments.length==1)return new XString(XNodeSet.prototype.stringForNode(c.contextNode));else if(arguments.length==
2)return arguments[1].evaluate(c).string();throw new Error("Function string expects (object?)");};Functions.concat=function(c){if(arguments.length<3)throw new Error("Function concat expects (string, string[, string]*)");var s="";for(var i=1;i<arguments.length;i++)s+=arguments[i].evaluate(c).stringValue();return new XString(s)};Functions.startsWith=function(){var c=arguments[0];if(arguments.length!=3)throw new Error("Function startsWith expects (string, string)");var s1=arguments[1].evaluate(c).stringValue();
var s2=arguments[2].evaluate(c).stringValue();return new XBoolean(s1.substring(0,s2.length)==s2)};Functions.contains=function(){var c=arguments[0];if(arguments.length!=3)throw new Error("Function contains expects (string, string)");var s1=arguments[1].evaluate(c).stringValue();var s2=arguments[2].evaluate(c).stringValue();return new XBoolean(s1.indexOf(s2)!==-1)};Functions.substringBefore=function(){var c=arguments[0];if(arguments.length!=3)throw new Error("Function substring-before expects (string, string)");
var s1=arguments[1].evaluate(c).stringValue();var s2=arguments[2].evaluate(c).stringValue();return new XString(s1.substring(0,s1.indexOf(s2)))};Functions.substringAfter=function(){var c=arguments[0];if(arguments.length!=3)throw new Error("Function substring-after expects (string, string)");var s1=arguments[1].evaluate(c).stringValue();var s2=arguments[2].evaluate(c).stringValue();if(s2.length==0)return new XString(s1);var i=s1.indexOf(s2);if(i==-1)return new XString("");return new XString(s1.substring(i+
s2.length))};Functions.substring=function(){var c=arguments[0];if(!(arguments.length==3||arguments.length==4))throw new Error("Function substring expects (string, number, number?)");var s=arguments[1].evaluate(c).stringValue();var n1=Math.round(arguments[2].evaluate(c).numberValue())-1;var n2=arguments.length==4?n1+Math.round(arguments[3].evaluate(c).numberValue()):undefined;return new XString(s.substring(n1,n2))};Functions.stringLength=function(){var c=arguments[0];var s;if(arguments.length==1)s=
XNodeSet.prototype.stringForNode(c.contextNode);else if(arguments.length==2)s=arguments[1].evaluate(c).stringValue();else throw new Error("Function string-length expects (string?)");return new XNumber(s.length)};Functions.normalizeSpace=function(){var c=arguments[0];var s;if(arguments.length==1)s=XNodeSet.prototype.stringForNode(c.contextNode);else if(arguments.length==2)s=arguments[1].evaluate(c).stringValue();else throw new Error("Function normalize-space expects (string?)");var i=0;var j=s.length-
1;while(Utilities.isSpace(s.charCodeAt(j)))j--;var t="";while(i<=j&&Utilities.isSpace(s.charCodeAt(i)))i++;while(i<=j)if(Utilities.isSpace(s.charCodeAt(i))){t+=" ";while(i<=j&&Utilities.isSpace(s.charCodeAt(i)))i++}else{t+=s.charAt(i);i++}return new XString(t)};Functions.translate=function(c,eValue,eFrom,eTo){if(arguments.length!=4)throw new Error("Function translate expects (string, string, string)");var value=eValue.evaluate(c).stringValue();var from=eFrom.evaluate(c).stringValue();var to=eTo.evaluate(c).stringValue();
var cMap=reduce(function(acc,ch,i){if(!(ch in acc))acc[ch]=i>to.length?"":to[i];return acc},{},from);var t=join("",map(function(ch){return ch in cMap?cMap[ch]:ch},value));return new XString(t)};Functions.boolean_=function(){var c=arguments[0];if(arguments.length!=2)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(c).bool()};Functions.not=function(c,eValue){if(arguments.length!=2)throw new Error("Function not expects (object)");return eValue.evaluate(c).bool().not()};
Functions.true_=function(){if(arguments.length!=1)throw new Error("Function true expects ()");return XBoolean.true_};Functions.false_=function(){if(arguments.length!=1)throw new Error("Function false expects ()");return XBoolean.false_};Functions.lang=function(){var c=arguments[0];if(arguments.length!=2)throw new Error("Function lang expects (string)");var lang;for(var n=c.contextNode;n!=null&&n.nodeType!=9;n=n.parentNode){var a=n.getAttributeNS(XPath.XML_NAMESPACE_URI,"lang");if(a!=null){lang=String(a);
break}}if(lang==null)return XBoolean.false_;var s=arguments[1].evaluate(c).stringValue();return new XBoolean(lang.substring(0,s.length)==s&&(lang.length==s.length||lang.charAt(s.length)=="-"))};Functions.number=function(){var c=arguments[0];if(!(arguments.length==1||arguments.length==2))throw new Error("Function number expects (object?)");if(arguments.length==1)return new XNumber(XNodeSet.prototype.stringForNode(c.contextNode));return arguments[1].evaluate(c).number()};Functions.sum=function(){var c=
arguments[0];var ns;if(arguments.length!=2||!Utilities.instance_of(ns=arguments[1].evaluate(c),XNodeSet))throw new Error("Function sum expects (node-set)");ns=ns.toUnsortedArray();var n=0;for(var i=0;i<ns.length;i++)n+=(new XNumber(XNodeSet.prototype.stringForNode(ns[i]))).numberValue();return new XNumber(n)};Functions.floor=function(){var c=arguments[0];if(arguments.length!=2)throw new Error("Function floor expects (number)");return new XNumber(Math.floor(arguments[1].evaluate(c).numberValue()))};
Functions.ceiling=function(){var c=arguments[0];if(arguments.length!=2)throw new Error("Function ceiling expects (number)");return new XNumber(Math.ceil(arguments[1].evaluate(c).numberValue()))};Functions.round=function(){var c=arguments[0];if(arguments.length!=2)throw new Error("Function round expects (number)");return new XNumber(Math.round(arguments[1].evaluate(c).numberValue()))};var Utilities=new Object;Utilities.isAttribute=function(val){return val&&(val.nodeType===2||val.ownerElement)};Utilities.splitQName=
function(qn){var i=qn.indexOf(":");if(i==-1)return[null,qn];return[qn.substring(0,i),qn.substring(i+1)]};Utilities.resolveQName=function(qn,nr,n,useDefault){var parts=Utilities.splitQName(qn);if(parts[0]!=null)parts[0]=nr.getNamespace(parts[0],n);else if(useDefault){parts[0]=nr.getNamespace("",n);if(parts[0]==null)parts[0]=""}else parts[0]="";return parts};Utilities.isSpace=function(c){return c==9||c==13||c==10||c==32};Utilities.isLetter=function(c){return c>=65&&c<=90||c>=97&&c<=122||c>=192&&c<=
214||c>=216&&c<=246||c>=248&&c<=255||c>=256&&c<=305||c>=308&&c<=318||c>=321&&c<=328||c>=330&&c<=382||c>=384&&c<=451||c>=461&&c<=496||c>=500&&c<=501||c>=506&&c<=535||c>=592&&c<=680||c>=699&&c<=705||c==902||c>=904&&c<=906||c==908||c>=910&&c<=929||c>=931&&c<=974||c>=976&&c<=982||c==986||c==988||c==990||c==992||c>=994&&c<=1011||c>=1025&&c<=1036||c>=1038&&c<=1103||c>=1105&&c<=1116||c>=1118&&c<=1153||c>=1168&&c<=1220||c>=1223&&c<=1224||c>=1227&&c<=1228||c>=1232&&c<=1259||c>=1262&&c<=1269||c>=1272&&c<=1273||
c>=1329&&c<=1366||c==1369||c>=1377&&c<=1414||c>=1488&&c<=1514||c>=1520&&c<=1522||c>=1569&&c<=1594||c>=1601&&c<=1610||c>=1649&&c<=1719||c>=1722&&c<=1726||c>=1728&&c<=1742||c>=1744&&c<=1747||c==1749||c>=1765&&c<=1766||c>=2309&&c<=2361||c==2365||c>=2392&&c<=2401||c>=2437&&c<=2444||c>=2447&&c<=2448||c>=2451&&c<=2472||c>=2474&&c<=2480||c==2482||c>=2486&&c<=2489||c>=2524&&c<=2525||c>=2527&&c<=2529||c>=2544&&c<=2545||c>=2565&&c<=2570||c>=2575&&c<=2576||c>=2579&&c<=2600||c>=2602&&c<=2608||c>=2610&&c<=2611||
c>=2613&&c<=2614||c>=2616&&c<=2617||c>=2649&&c<=2652||c==2654||c>=2674&&c<=2676||c>=2693&&c<=2699||c==2701||c>=2703&&c<=2705||c>=2707&&c<=2728||c>=2730&&c<=2736||c>=2738&&c<=2739||c>=2741&&c<=2745||c==2749||c==2784||c>=2821&&c<=2828||c>=2831&&c<=2832||c>=2835&&c<=2856||c>=2858&&c<=2864||c>=2866&&c<=2867||c>=2870&&c<=2873||c==2877||c>=2908&&c<=2909||c>=2911&&c<=2913||c>=2949&&c<=2954||c>=2958&&c<=2960||c>=2962&&c<=2965||c>=2969&&c<=2970||c==2972||c>=2974&&c<=2975||c>=2979&&c<=2980||c>=2984&&c<=2986||
c>=2990&&c<=2997||c>=2999&&c<=3001||c>=3077&&c<=3084||c>=3086&&c<=3088||c>=3090&&c<=3112||c>=3114&&c<=3123||c>=3125&&c<=3129||c>=3168&&c<=3169||c>=3205&&c<=3212||c>=3214&&c<=3216||c>=3218&&c<=3240||c>=3242&&c<=3251||c>=3253&&c<=3257||c==3294||c>=3296&&c<=3297||c>=3333&&c<=3340||c>=3342&&c<=3344||c>=3346&&c<=3368||c>=3370&&c<=3385||c>=3424&&c<=3425||c>=3585&&c<=3630||c==3632||c>=3634&&c<=3635||c>=3648&&c<=3653||c>=3713&&c<=3714||c==3716||c>=3719&&c<=3720||c==3722||c==3725||c>=3732&&c<=3735||c>=3737&&
c<=3743||c>=3745&&c<=3747||c==3749||c==3751||c>=3754&&c<=3755||c>=3757&&c<=3758||c==3760||c>=3762&&c<=3763||c==3773||c>=3776&&c<=3780||c>=3904&&c<=3911||c>=3913&&c<=3945||c>=4256&&c<=4293||c>=4304&&c<=4342||c==4352||c>=4354&&c<=4355||c>=4357&&c<=4359||c==4361||c>=4363&&c<=4364||c>=4366&&c<=4370||c==4412||c==4414||c==4416||c==4428||c==4430||c==4432||c>=4436&&c<=4437||c==4441||c>=4447&&c<=4449||c==4451||c==4453||c==4455||c==4457||c>=4461&&c<=4462||c>=4466&&c<=4467||c==4469||c==4510||c==4520||c==4523||
c>=4526&&c<=4527||c>=4535&&c<=4536||c==4538||c>=4540&&c<=4546||c==4587||c==4592||c==4601||c>=7680&&c<=7835||c>=7840&&c<=7929||c>=7936&&c<=7957||c>=7960&&c<=7965||c>=7968&&c<=8005||c>=8008&&c<=8013||c>=8016&&c<=8023||c==8025||c==8027||c==8029||c>=8031&&c<=8061||c>=8064&&c<=8116||c>=8118&&c<=8124||c==8126||c>=8130&&c<=8132||c>=8134&&c<=8140||c>=8144&&c<=8147||c>=8150&&c<=8155||c>=8160&&c<=8172||c>=8178&&c<=8180||c>=8182&&c<=8188||c==8486||c>=8490&&c<=8491||c==8494||c>=8576&&c<=8578||c>=12353&&c<=12436||
c>=12449&&c<=12538||c>=12549&&c<=12588||c>=44032&&c<=55203||c>=19968&&c<=40869||c==12295||c>=12321&&c<=12329};Utilities.isNCNameChar=function(c){return c>=48&&c<=57||c>=1632&&c<=1641||c>=1776&&c<=1785||c>=2406&&c<=2415||c>=2534&&c<=2543||c>=2662&&c<=2671||c>=2790&&c<=2799||c>=2918&&c<=2927||c>=3047&&c<=3055||c>=3174&&c<=3183||c>=3302&&c<=3311||c>=3430&&c<=3439||c>=3664&&c<=3673||c>=3792&&c<=3801||c>=3872&&c<=3881||c==46||c==45||c==95||Utilities.isLetter(c)||c>=768&&c<=837||c>=864&&c<=865||c>=1155&&
c<=1158||c>=1425&&c<=1441||c>=1443&&c<=1465||c>=1467&&c<=1469||c==1471||c>=1473&&c<=1474||c==1476||c>=1611&&c<=1618||c==1648||c>=1750&&c<=1756||c>=1757&&c<=1759||c>=1760&&c<=1764||c>=1767&&c<=1768||c>=1770&&c<=1773||c>=2305&&c<=2307||c==2364||c>=2366&&c<=2380||c==2381||c>=2385&&c<=2388||c>=2402&&c<=2403||c>=2433&&c<=2435||c==2492||c==2494||c==2495||c>=2496&&c<=2500||c>=2503&&c<=2504||c>=2507&&c<=2509||c==2519||c>=2530&&c<=2531||c==2562||c==2620||c==2622||c==2623||c>=2624&&c<=2626||c>=2631&&c<=2632||
c>=2635&&c<=2637||c>=2672&&c<=2673||c>=2689&&c<=2691||c==2748||c>=2750&&c<=2757||c>=2759&&c<=2761||c>=2763&&c<=2765||c>=2817&&c<=2819||c==2876||c>=2878&&c<=2883||c>=2887&&c<=2888||c>=2891&&c<=2893||c>=2902&&c<=2903||c>=2946&&c<=2947||c>=3006&&c<=3010||c>=3014&&c<=3016||c>=3018&&c<=3021||c==3031||c>=3073&&c<=3075||c>=3134&&c<=3140||c>=3142&&c<=3144||c>=3146&&c<=3149||c>=3157&&c<=3158||c>=3202&&c<=3203||c>=3262&&c<=3268||c>=3270&&c<=3272||c>=3274&&c<=3277||c>=3285&&c<=3286||c>=3330&&c<=3331||c>=3390&&
c<=3395||c>=3398&&c<=3400||c>=3402&&c<=3405||c==3415||c==3633||c>=3636&&c<=3642||c>=3655&&c<=3662||c==3761||c>=3764&&c<=3769||c>=3771&&c<=3772||c>=3784&&c<=3789||c>=3864&&c<=3865||c==3893||c==3895||c==3897||c==3902||c==3903||c>=3953&&c<=3972||c>=3974&&c<=3979||c>=3984&&c<=3989||c==3991||c>=3993&&c<=4013||c>=4017&&c<=4023||c==4025||c>=8400&&c<=8412||c==8417||c>=12330&&c<=12335||c==12441||c==12442||c==183||c==720||c==721||c==903||c==1600||c==3654||c==3782||c==12293||c>=12337&&c<=12341||c>=12445&&c<=
12446||c>=12540&&c<=12542};Utilities.coalesceText=function(n){for(var m=n.firstChild;m!=null;m=m.nextSibling)if(m.nodeType==3||m.nodeType==4){var s=m.nodeValue;var first=m;m=m.nextSibling;while(m!=null&&(m.nodeType==3||m.nodeType==4)){s+=m.nodeValue;var del=m;m=m.nextSibling;del.parentNode.removeChild(del)}if(first.nodeType==4){var p=first.parentNode;if(first.nextSibling==null){p.removeChild(first);p.appendChild(p.ownerDocument.createTextNode(s))}else{var next=first.nextSibling;p.removeChild(first);
p.insertBefore(p.ownerDocument.createTextNode(s),next)}}else first.nodeValue=s;if(m==null)break}else if(m.nodeType==1)Utilities.coalesceText(m)};Utilities.instance_of=function(o,c){while(o!=null){if(o.constructor===c)return true;if(o===Object)return false;o=o.constructor.superclass}return false};Utilities.getElementById=function(n,id){if(n.nodeType==1)if(n.getAttribute("id")==id||n.getAttributeNS(null,"id")==id)return n;for(var m=n.firstChild;m!=null;m=m.nextSibling){var res=Utilities.getElementById(m,
id);if(res!=null)return res}return null};var XPathException=function(){function getMessage(code,exception){var msg=exception?": "+exception.toString():"";switch(code){case XPathException.INVALID_EXPRESSION_ERR:return"Invalid expression"+msg;case XPathException.TYPE_ERR:return"Type error"+msg}return null}function XPathException(code,error,message){var err=Error.call(this,getMessage(code,error)||message);err.code=code;err.exception=error;return err}XPathException.prototype=Object.create(Error.prototype);
XPathException.prototype.constructor=XPathException;XPathException.superclass=Error;XPathException.prototype.toString=function(){return this.message};XPathException.fromMessage=function(message,error){return new XPathException(null,error,message)};XPathException.INVALID_EXPRESSION_ERR=51;XPathException.TYPE_ERR=52;return XPathException}();XPathExpression.prototype={};XPathExpression.prototype.constructor=XPathExpression;XPathExpression.superclass=Object.prototype;function XPathExpression(e,r,p){this.xpath=
p.parse(e);this.context=new XPathContext;this.context.namespaceResolver=new XPathNSResolverWrapper(r)}XPathExpression.getOwnerDocument=function(n){return n.nodeType===9?n:n.ownerDocument};XPathExpression.detectHtmlDom=function(n){if(!n)return false;var doc=XPathExpression.getOwnerDocument(n);try{return doc.implementation.hasFeature("HTML","2.0")}catch(e){return true}};XPathExpression.prototype.evaluate=function(n,t,res){this.context.expressionContextNode=n;this.context.caseInsensitive=XPathExpression.detectHtmlDom(n);
var result=this.xpath.evaluate(this.context);return new XPathResult(result,t)};XPathNSResolverWrapper.prototype={};XPathNSResolverWrapper.prototype.constructor=XPathNSResolverWrapper;XPathNSResolverWrapper.superclass=Object.prototype;function XPathNSResolverWrapper(r){this.xpathNSResolver=r}XPathNSResolverWrapper.prototype.getNamespace=function(prefix,n){if(this.xpathNSResolver==null)return null;return this.xpathNSResolver.lookupNamespaceURI(prefix)};NodeXPathNSResolver.prototype={};NodeXPathNSResolver.prototype.constructor=
NodeXPathNSResolver;NodeXPathNSResolver.superclass=Object.prototype;function NodeXPathNSResolver(n){this.node=n;this.namespaceResolver=new NamespaceResolver}NodeXPathNSResolver.prototype.lookupNamespaceURI=function(prefix){return this.namespaceResolver.getNamespace(prefix,this.node)};XPathResult.prototype={};XPathResult.prototype.constructor=XPathResult;XPathResult.superclass=Object.prototype;function XPathResult(v,t){if(t==XPathResult.ANY_TYPE)if(v.constructor===XString)t=XPathResult.STRING_TYPE;
else if(v.constructor===XNumber)t=XPathResult.NUMBER_TYPE;else if(v.constructor===XBoolean)t=XPathResult.BOOLEAN_TYPE;else if(v.constructor===XNodeSet)t=XPathResult.UNORDERED_NODE_ITERATOR_TYPE;this.resultType=t;switch(t){case XPathResult.NUMBER_TYPE:this.numberValue=v.numberValue();return;case XPathResult.STRING_TYPE:this.stringValue=v.stringValue();return;case XPathResult.BOOLEAN_TYPE:this.booleanValue=v.booleanValue();return;case XPathResult.ANY_UNORDERED_NODE_TYPE:case XPathResult.FIRST_ORDERED_NODE_TYPE:if(v.constructor===
XNodeSet){this.singleNodeValue=v.first();return}break;case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:case XPathResult.ORDERED_NODE_ITERATOR_TYPE:if(v.constructor===XNodeSet){this.invalidIteratorState=false;this.nodes=v.toArray();this.iteratorIndex=0;return}break;case XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE:case XPathResult.ORDERED_NODE_SNAPSHOT_TYPE:if(v.constructor===XNodeSet){this.nodes=v.toArray();this.snapshotLength=this.nodes.length;return}break}throw new XPathException(XPathException.TYPE_ERR);
}XPathResult.prototype.iterateNext=function(){if(this.resultType!=XPathResult.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=XPathResult.ORDERED_NODE_ITERATOR_TYPE)throw new XPathException(XPathException.TYPE_ERR);return this.nodes[this.iteratorIndex++]};XPathResult.prototype.snapshotItem=function(i){if(this.resultType!=XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=XPathResult.ORDERED_NODE_SNAPSHOT_TYPE)throw new XPathException(XPathException.TYPE_ERR);return this.nodes[i]};XPathResult.ANY_TYPE=
0;XPathResult.NUMBER_TYPE=1;XPathResult.STRING_TYPE=2;XPathResult.BOOLEAN_TYPE=3;XPathResult.UNORDERED_NODE_ITERATOR_TYPE=4;XPathResult.ORDERED_NODE_ITERATOR_TYPE=5;XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE=6;XPathResult.ORDERED_NODE_SNAPSHOT_TYPE=7;XPathResult.ANY_UNORDERED_NODE_TYPE=8;XPathResult.FIRST_ORDERED_NODE_TYPE=9;function installDOM3XPathSupport(doc,p){doc.createExpression=function(e,r){try{return new XPathExpression(e,r,p)}catch(e){throw new XPathException(XPathException.INVALID_EXPRESSION_ERR,
e);}};doc.createNSResolver=function(n){return new NodeXPathNSResolver(n)};doc.evaluate=function(e,cn,r,t,res){if(t<0||t>9)throw{code:0,toString:function(){return"Request type not supported"}};return doc.createExpression(e,r,p).evaluate(cn,t,res)}}try{var shouldInstall=true;try{if(document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null))shouldInstall=false}catch(e){}if(shouldInstall)installDOM3XPathSupport(document,new XPathParser)}catch(e){}installDOM3XPathSupport(exports,
new XPathParser);(function(){var parser=new XPathParser;var defaultNSResolver=new NamespaceResolver;var defaultFunctionResolver=new FunctionResolver;var defaultVariableResolver=new VariableResolver;function makeNSResolverFromFunction(func){return{getNamespace:function(prefix,node){var ns=func(prefix,node);return ns||defaultNSResolver.getNamespace(prefix,node)}}}function makeNSResolverFromObject(obj){return makeNSResolverFromFunction(obj.getNamespace.bind(obj))}function makeNSResolverFromMap(map){return makeNSResolverFromFunction(function(prefix){return map[prefix]})}
function makeNSResolver(resolver){if(resolver&&typeof resolver.getNamespace==="function")return makeNSResolverFromObject(resolver);if(typeof resolver==="function")return makeNSResolverFromFunction(resolver);if(typeof resolver==="object")return makeNSResolverFromMap(resolver);return defaultNSResolver}function convertValue(value){if(value===null||typeof value==="undefined"||value instanceof XString||value instanceof XBoolean||value instanceof XNumber||value instanceof XNodeSet)return value;switch(typeof value){case "string":return new XString(value);
case "boolean":return new XBoolean(value);case "number":return new XNumber(value)}var ns=new XNodeSet;ns.addArray([].concat(value));return ns}function makeEvaluator(func){return function(context){var args=Array.prototype.slice.call(arguments,1).map(function(arg){return arg.evaluate(context)});var result=func.apply(this,[].concat(context,args));return convertValue(result)}}function makeFunctionResolverFromFunction(func){return{getFunction:function(name,namespace){var found=func(name,namespace);if(found)return makeEvaluator(found);
return defaultFunctionResolver.getFunction(name,namespace)}}}function makeFunctionResolverFromObject(obj){return makeFunctionResolverFromFunction(obj.getFunction.bind(obj))}function makeFunctionResolverFromMap(map){return makeFunctionResolverFromFunction(function(name){return map[name]})}function makeFunctionResolver(resolver){if(resolver&&typeof resolver.getFunction==="function")return makeFunctionResolverFromObject(resolver);if(typeof resolver==="function")return makeFunctionResolverFromFunction(resolver);
if(typeof resolver==="object")return makeFunctionResolverFromMap(resolver);return defaultFunctionResolver}function makeVariableResolverFromFunction(func){return{getVariable:function(name,namespace){var value=func(name,namespace);return convertValue(value)}}}function makeVariableResolver(resolver){if(resolver){if(typeof resolver.getVariable==="function")return makeVariableResolverFromFunction(resolver.getVariable.bind(resolver));if(typeof resolver==="function")return makeVariableResolverFromFunction(resolver);
if(typeof resolver==="object")return makeVariableResolverFromFunction(function(name){return resolver[name]})}return defaultVariableResolver}function copyIfPresent(prop,dest,source){if(prop in source)dest[prop]=source[prop]}function makeContext(options){var context=new XPathContext;if(options){context.namespaceResolver=makeNSResolver(options.namespaces);context.functionResolver=makeFunctionResolver(options.functions);context.variableResolver=makeVariableResolver(options.variables);context.expressionContextNode=
options.node;copyIfPresent("allowAnyNamespaceForNoPrefix",context,options);copyIfPresent("isHtml",context,options)}else context.namespaceResolver=defaultNSResolver;return context}function evaluate(parsedExpression,options){var context=makeContext(options);return parsedExpression.evaluate(context)}var evaluatorPrototype={evaluate:function(options){return evaluate(this.expression,options)},evaluateNumber:function(options){return this.evaluate(options).numberValue()},evaluateString:function(options){return this.evaluate(options).stringValue()},
evaluateBoolean:function(options){return this.evaluate(options).booleanValue()},evaluateNodeSet:function(options){return this.evaluate(options).nodeset()},select:function(options){return this.evaluateNodeSet(options).toArray()},select1:function(options){return this.select(options)[0]}};function parse(xpath){var parsed=parser.parse(xpath);return Object.create(evaluatorPrototype,{expression:{value:parsed}})}exports.parse=parse})();exports.XPath=XPath;exports.XPathParser=XPathParser;exports.XPathResult=
XPathResult;exports.Step=Step;exports.NodeTest=NodeTest;exports.BarOperation=BarOperation;exports.NamespaceResolver=NamespaceResolver;exports.FunctionResolver=FunctionResolver;exports.VariableResolver=VariableResolver;exports.Utilities=Utilities;exports.XPathContext=XPathContext;exports.XNodeSet=XNodeSet;exports.XBoolean=XBoolean;exports.XString=XString;exports.XNumber=XNumber;exports.select=function(e,doc,single){return exports.selectWithResolver(e,doc,null,single)};exports.useNamespaces=function(mappings){var resolver=
{mappings:mappings||{},lookupNamespaceURI:function(prefix){return this.mappings[prefix]}};return function(e,doc,single){return exports.selectWithResolver(e,doc,resolver,single)}};exports.selectWithResolver=function(e,doc,resolver,single){var expression=new XPathExpression(e,resolver,new XPathParser);var type=XPathResult.ANY_TYPE;var result=expression.evaluate(doc,type,null);if(result.resultType==XPathResult.STRING_TYPE)result=result.stringValue;else if(result.resultType==XPathResult.NUMBER_TYPE)result=
result.numberValue;else if(result.resultType==XPathResult.BOOLEAN_TYPE)result=result.booleanValue;else{result=result.nodes;if(single)result=result[0]}return result};exports.select1=function(e,doc){return exports.select(e,doc,true)}})();
</script>
<noscript>
<div id="notSupportedWrap">
<h2 id="notSupportedTitle">This content requires JavaScript</h2>
<p class="notSupportedMessage">JavaScript appears to be disabled. Please enable it to view this content.</p>
</div>
</noscript>
<script>'use strict';(function(){var isKasperskyScriptInjected=!!document.querySelector('script[src*="kaspersky"]');var tmpCanvas=document.createElement("canvas");var hasWebGL=!!tmpCanvas.getContext("webgl");var missingFeatures=[];if(!hasWebGL)missingFeatures.push("WebGL");if(typeof WebAssembly==="undefined")missingFeatures.push("WebAssembly");if(!("noModule"in HTMLScriptElement.prototype))missingFeatures.push("JavaScript Modules");if(missingFeatures.length===0&&!isKasperskyScriptInjected)window["C3_IsSupported"]=
true;else{var msgWrap=document.createElement("div");msgWrap.id="notSupportedWrap";document.body.appendChild(msgWrap);var msgTitle=document.createElement("h2");msgTitle.id="notSupportedTitle";if(isKasperskyScriptInjected)msgTitle.textContent="Kaspersky Internet Security broke this export";else msgTitle.textContent="Software update needed";msgWrap.appendChild(msgTitle);var msgBody=document.createElement("p");msgBody.className="notSupportedMessage";var msgText="This content is not supported because your device's software appears to be out-of-date. ";
var ua=navigator.userAgent;if(/android/i.test(ua))msgText+='<br><br>On Android, fix this by making sure the <a href="https://play.google.com/store/apps/details?id=com.google.android.webview">Android System Webview</a> app has updates enabled and is up-to-date.';else if(/iphone|ipad|ipod/i.test(ua)){msgText+="Alternatively if <strong>Lockdown mode</strong> is enabled, try turning it off to view this content.";msgText+="<br><br>Note: using the <strong>iOS simulator</strong> requires <strong>Xcode 12+</strong>. Otherwise try testing on a real device instead."}else if(/msie/i.test(ua)||
/trident/i.test(ua)||/edge\//i.test(ua))msgText+="<br><br>Note: <strong>Internet Explorer</strong> and the <strong>legacy Edge browser</strong> are not supported. Try using <a href='https://www.google.com/chrome'>Chrome</a> or <a href='https://www.mozilla.org/firefox'>Firefox</a> instead.";else if(isKasperskyScriptInjected)msgText="It appears a script was added to this export by Kaspersky software. This prevents the exported project from working. Try disabling Kaspersky and exporting again.";else msgText+=
"Try installing any available software updates. Alternatively try on a different device.";msgText+="<br><br><em>Missing features: "+missingFeatures.join(", ")+"<br>User agent: "+navigator.userAgent+"</em>";msgBody.innerHTML=msgText;msgWrap.appendChild(msgBody)}})();
</script>
<script>'use strict';{class OfflineClient{constructor(){this._broadcastChannel=typeof BroadcastChannel==="undefined"?null:new BroadcastChannel("offline");this._queuedMessages=[];this._onMessageCallback=null;if(this._broadcastChannel)this._broadcastChannel.onmessage=e=>this._OnBroadcastChannelMessage(e)}_OnBroadcastChannelMessage(e){if(this._onMessageCallback){this._onMessageCallback(e);return}this._queuedMessages.push(e)}SetMessageCallback(f){this._onMessageCallback=f;for(let e of this._queuedMessages)this._onMessageCallback(e);
this._queuedMessages.length=0}}window.OfflineClientInfo=new OfflineClient};
</script>
<script>function k(b,a,c,d){b.s.Ib(b.mb,a,c,d,void 0)}function l(b,a,c,d){b.s.na?k(b,a,c,d):b.s.Fe()._OnMessageFromDOM({type:"event",component:b.mb,handler:a,dispatchOpts:d||null,data:c,responseId:null})}function m(b,a,c){b.s.D(b.mb,a,c)}function t(b,a){for(const [c,d]of a)m(b,c,d)}function u(b){b.Ub||(b.s.ye(b.Vd),b.Ub=!0)}window.Ba=class{constructor(b,a){this.s=b;this.mb=a;this.Ub=!1;this.Vd=()=>this.Oa()}fd(){}Oa(){}};function aa(b){-1!==b.cb&&(self.clearTimeout(b.cb),b.cb=-1)}
window.ve=class{constructor(b){this.Lc=b;this.Te=5;this.cb=-1;this.Xb=-Infinity;this.Wd=()=>{this.cb=-1;this.Xb=Date.now();this.rb=!0;this.Lc();this.rb=!1};this.yd=this.rb=!1}j(){aa(this);this.Wd=this.Lc=null}};"use strict";
function ba(b,a){const c=a.elementId,d=b.kd(c,a);b.da.set(c,d);d.style.boxSizing="border-box";a.isVisible||(d.style.display="none");d.addEventListener("focus",()=>{v(b,"elem-focused",c)});d.addEventListener("blur",()=>{v(b,"elem-blurred",c)});b.Qb&&document.body.appendChild(d)}function ca(b,a,c){m(b,a,d=>{const e=b.da.get(d.elementId);return c(e,d)})}function v(b,a,c,d){d||(d={});d.elementId=c;k(b,a,d)}function da(b,a,c){var d;d||(d={});d.elementId=c;l(b,a,d)}
window.oe=class extends self.Ba{constructor(b){super(b,"text-input");this.da=new Map;this.Qb=!0;t(this,[["create",a=>ba(this,a)],["destroy",a=>{a=a.elementId;const c=this.da.get(a);this.Qb&&c.parentElement.removeChild(c);this.da.delete(a)}],["set-visible",a=>{this.Qb&&(this.da.get(a.elementId).style.display=a.isVisible?"":"none")}],["update-position",a=>{if(this.Qb){var c=this.da.get(a.elementId);c.style.left=a.left+"px";c.style.top=a.top+"px";c.style.width=a.width+"px";c.style.height=a.height+"px";
a=a.fontSize;null!==a&&(c.style.fontSize=a+"em")}}],["update-state",a=>{const c=this.da.get(a.elementId);this.xc(c,a)}],["focus",a=>this.Gc(a)],["set-css-style",a=>{const c=this.da.get(a.elementId),d=a.prop;a=a.val;d.startsWith("--")?c.style.setProperty(d,a):c.style[d]=a}],["set-attribute",a=>{this.da.get(a.elementId).setAttribute(a.name,a.val)}],["remove-attribute",a=>{this.da.get(a.elementId).removeAttribute(a.name)}]]);ca(this,"get-element",a=>a)}kd(){throw Error("required override");}xc(){throw Error("required override");
}Gc(b){var a=this.da.get(b.elementId);b.focus?a.focus():a.blur()}};"use strict";const ea=/(iphone|ipod|ipad|macos|macintosh|mac os x)/i.test(navigator.userAgent),w=/android/i.test(navigator.userAgent);let fa=0;
function y(b){const a=document.createElement("script");a.async=!1;a.type="module";return b.cf?new Promise(c=>{const d="c3_resolve_"+fa;++fa;self[d]=c;a.textContent=b.gf+`\n\nself["${d}"]();`;document.head.appendChild(a)}):new Promise((c,d)=>{a.onload=c;a.onerror=d;a.src=b;document.head.appendChild(a)})}let ia=!1,ja=!1;function ka(){if(!ia){try{new Worker("blob://",{get type(){ja=!0}})}catch(b){}ia=!0}return ja}let B=new Audio;
const la={"audio/webm; codecs=opus":!!B.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!B.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!B.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!B.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!B.canPlayType("audio/mp4"),"audio/mpeg":!!B.canPlayType("audio/mpeg")};B=null;async function ma(b){b=await pa(b);return(new TextDecoder("utf-8")).decode(b)}
function pa(b){return new Promise((a,c)=>{const d=new FileReader;d.onload=e=>a(e.target.result);d.onerror=e=>c(e);d.readAsArrayBuffer(b)})}const C=[];let D=0;window.RealFile=window.File;const F=[],G=new Map,qa=new Map;let ra=0;const sa=[];self.runOnStartup=function(b){if("function"!==typeof b)throw Error("runOnStartup called without a function");sa.push(b)};const ta=new Set(["cordova","playable-ad","instant-games"]);let ua=!1;
window.ha=class b{constructor(a){this.na=a.jf;this.wa=null;this.ba="";this.ab=a.ff;this.Fb={};this.Ua=this.ua=null;this.Sb=[];this.H=this.xa=null;this.Tc=!1;this.Cd=0;this.tb=null;this.$a=-1;this.Ye=()=>this.Me();this.Za=[];this.A=a.Xd;this.Vb="file"===location.protocol.substr(0,4);!this.na||"undefined"!==typeof OffscreenCanvas&&navigator.userActivation&&ka()||(this.na=!1);if("playable-ad"===this.A||"instant-games"===this.A)this.na=!1;if("cordova"===this.A&&this.na)if(w){const c=/Chrome\/(\d+)/i.exec(navigator.userAgent);
c&&90<=parseInt(c[1],10)||(this.na=!1)}else this.na=!1;this.Zb=this.ra=null;"html5"!==this.A||window.isSecureContext||console.warn("[Construct] Warning: the browser indicates this is not a secure context. Some features may be unavailable. Use secure (HTTPS) hosting to ensure all features are available.");this.D("runtime","cordova-fetch-local-file",c=>this.Ie(c));this.D("runtime","create-job-worker",()=>this.Je());"cordova"===this.A?document.addEventListener("deviceready",()=>this.rd(a)):this.rd(a)}j(){this.yc();
this.wa&&(this.wa=this.wa.onmessage=null);this.ua&&(this.ua.terminate(),this.ua=null);this.Ua&&(this.Ua.j(),this.Ua=null);this.H&&(this.H.parentElement.removeChild(this.H),this.H=null)}se(){return ea&&"cordova"===this.A}tc(){const a=navigator.userAgent;return ea&&ta.has(this.A)||navigator.standalone||/crios\/|fxios\/|edgios\//i.test(a)}qe(){return w}md(){return w&&ta.has(this.A)}async rd(a){"macos-wkwebview"===this.A&&this.Jc({type:"ready"});if("playable-ad"===this.A){this.ra=self.c3_base64files;
this.Zb={};await this.Be();for(let d=0,e=a.eb.length;d<e;++d){var c=a.eb[d];this.Zb.hasOwnProperty(c)?a.eb[d]={cf:!0,gf:this.Zb[c]}:this.ra.hasOwnProperty(c)&&(a.eb[d]=URL.createObjectURL(this.ra[c]))}}a.ef?this.ba=a.ef:(c=location.origin,this.ba=("null"===c?"file:///":c)+location.pathname,c=this.ba.lastIndexOf("/"),-1!==c&&(this.ba=this.ba.substr(0,c+1)));a.lf&&(this.Fb=a.lf);c=new MessageChannel;this.wa=c.port1;this.wa.onmessage=d=>this._OnMessageFromRuntime(d.data);window.c3_addPortMessageHandler&&
window.c3_addPortMessageHandler(d=>this.Le(d));this.tb=new self.te(this);await va(this.tb);"object"===typeof window.StatusBar&&window.StatusBar.hide();if("object"===typeof window.AndroidFullScreen)try{await new Promise((d,e)=>{window.AndroidFullScreen.immersiveMode(d,e)})}catch(d){console.error("Failed to enter Android immersive mode: ",d)}this.na?await this.He(a,c.port2):await this.Ge(a,c.port2)}Ac(a){a=this.Fb.hasOwnProperty(a)?this.Fb[a]:a.endsWith("/workermain.js")&&this.Fb.hasOwnProperty("workermain.js")?
this.Fb["workermain.js"]:"playable-ad"===this.A&&this.ra.hasOwnProperty(a)?this.ra[a]:a;a instanceof Blob&&(a=URL.createObjectURL(a));return a}async oc(a,c,d){if(a.startsWith("blob:"))return new Worker(a,d);if("cordova"===this.A&&this.Vb)return a=await this.Gb(d.bf?a:this.ab+a),new Worker(URL.createObjectURL(new Blob([a],{type:"application/javascript"})),d);a=new URL(a,c);if(location.origin!==a.origin){a=await fetch(a);if(!a.ok)throw Error("failed to fetch worker script");a=await a.blob();return new Worker(URL.createObjectURL(a),
d)}return new Worker(a,d)}pa(){return Math.max(window.innerWidth,1)}ia(){return Math.max(window.innerHeight,1)}qd(a){var c=this.ba,d=location.href,e=this.pa(),f=this.ia(),g=window.devicePixelRatio,h=b.ib(),n=a.sf,q=window.cr_previewImageBlobs||this.ra,p=window.cr_previewProjectFileBlobs,z=window.cr_previewProjectFiles,x=window.qf||"";a=a.Xd;var r=(new URLSearchParams(self.location.search)).has("debug"),A=this.tb;return{runtimeBaseUrl:c,previewUrl:d,windowInnerWidth:e,windowInnerHeight:f,devicePixelRatio:g,
isFullscreen:h,projectData:n,previewImageBlobs:q,previewProjectFileBlobs:p,previewProjectFileSWUrls:z,swClientId:x,exportType:a,isDebug:r,ife:!!self.rf,jobScheduler:{inputPort:A.Sc,outputPort:A.Zc,maxNumWorkers:A.Ve},supportedAudioFormats:la,opusWasmScriptUrl:window.cr_opusWasmScriptUrl||this.ab+"opus.wasm.js",opusWasmBinaryUrl:window.cr_opusWasmBinaryUrl||this.ab+"opus.wasm.wasm",isFileProtocol:this.Vb,isiOSCordova:this.se(),isiOSWebView:this.tc(),isFBInstantAvailable:"undefined"!==typeof self.FBInstant}}async He(a,
c){const d=this.Ac(a.kf);"preview"===this.A?(this.ua=new Worker("previewworker.js",{type:"module",name:"Runtime"}),await new Promise((h,n)=>{const q=p=>{this.ua.removeEventListener("message",q);p.data&&"ok"===p.data.type?h():n()};this.ua.addEventListener("message",q);this.ua.postMessage({type:"construct-worker-init","import":(new URL(d,this.ba)).toString()})})):this.ua=await this.oc(d,this.ba,{type:"module",name:"Runtime",bf:!0});this.H=document.createElement("canvas");this.H.style.display="none";
const e=this.H.transferControlToOffscreen();document.body.appendChild(this.H);window.c3canvas=this.H;self.C3_InsertHTMLPlaceholders&&self.C3_InsertHTMLPlaceholders();let f=a.ed||[],g=a.eb;f=await Promise.all(f.map(h=>this.Pa(h)));g=await Promise.all(g.map(h=>this.Pa(h)));if("cordova"===this.A)for(let h=0,n=a.mc.length;h<n;++h){const q=a.mc[h],p=q[0];if(p===a.cd||"scriptsInEvents.js"===p||p.endsWith("/scriptsInEvents.js"))q[1]=await this.Pa(p)}this.ua.postMessage(Object.assign(this.qd(a),{type:"init-runtime",
isInWorker:!0,messagePort:c,canvas:e,workerDependencyScripts:f,engineScripts:g,projectScripts:a.mc,mainProjectScript:a.cd,projectScriptsStatus:self.C3_ProjectScriptsStatus}),[c,e,...wa(this.tb)]);this.Sb=F.map(h=>new h(this));this.pd();xa(this.xa);self.c3_callFunction=(h,n)=>{var q=this.xa;return q.s.od(q.mb,"js-invoke-function",{name:h,params:n},void 0,void 0)};"preview"===this.A&&(self.goToLastErrorScript=()=>this.Ib("runtime","go-to-last-error-script"))}async Ge(a,c){this.H=document.createElement("canvas");
this.H.style.display="none";document.body.appendChild(this.H);window.c3canvas=this.H;self.C3_InsertHTMLPlaceholders&&self.C3_InsertHTMLPlaceholders();this.Sb=F.map(g=>new g(this));this.pd();var d=a.eb.map(g=>"string"===typeof g?(new URL(g,this.ba)).toString():g);Array.isArray(a.ed)&&d.unshift(...a.ed);d=await Promise.all(d.map(g=>this.Pa(g)));await Promise.all(d.map(g=>y(g)));d=self.C3_ProjectScriptsStatus;const e=a.cd,f=a.mc;for(let [g,h]of f)if(h||(h=g),g===e)try{h=await this.Pa(h),await y(h),"preview"!==
this.A||d[g]||this.td(g,"main script did not run to completion")}catch(n){this.td(g,n)}else if("scriptsInEvents.js"===g||g.endsWith("/scriptsInEvents.js"))h=await this.Pa(h),await y(h);"preview"===this.A&&"object"!==typeof self.mf.nf?(this.Mb(),console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),alert("Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.")):(a=Object.assign(this.qd(a),
{isInWorker:!1,messagePort:c,canvas:this.H,runOnStartupFunctions:sa}),xa(this.xa),this.sd(),this.Ua=self.C3_CreateRuntime(a),await self.C3_InitRuntime(this.Ua,a))}td(a,c){this.Mb();console.error(`[Preview] Failed to load project main script (${a}): `,c);alert(`Failed to load project main script (${a}). Check all your JavaScript code has valid syntax. Press F12 and check the console for error details.`)}sd(){this.Mb()}Mb(){const a=window.$e;a&&(a.parentElement.removeChild(a),window.$e=null)}async Je(){const a=
await ya(this.tb);return{outputPort:a,transferables:[a]}}Fe(){if(this.na)throw Error("not available in worker mode");return this.Ua}Ib(a,c,d,e,f){this.wa.postMessage({type:"event",component:a,handler:c,dispatchOpts:e||null,data:d,responseId:null},f)}od(a,c,d,e,f){const g=ra++,h=new Promise((n,q)=>{qa.set(g,{resolve:n,reject:q})});this.wa.postMessage({type:"event",component:a,handler:c,dispatchOpts:e||null,data:d,responseId:g},f);return h}_OnMessageFromRuntime(a){const c=a.type;if("event"===c)return this.Ke(a);
if("result"===c)this.Ne(a);else if("runtime-ready"===c)this.Oe();else if("alert-error"===c)this.Mb(),alert(a.message);else if("creating-runtime"===c)this.sd();else throw Error(`unknown message '${c}'`);}Ke(a){const c=a.component,d=a.handler,e=a.data,f=a.responseId;if(a=G.get(c))if(a=a.get(d)){var g=null;try{g=a(e)}catch(h){console.error(`Exception in '${c}' handler '${d}':`,h);null!==f&&this.Lb(f,!1,""+h);return}if(null===f)return g;g&&g.then?g.then(h=>this.Lb(f,!0,h)).catch(h=>{console.error(`Rejection from '${c}' handler '${d}':`,
h);this.Lb(f,!1,""+h)}):this.Lb(f,!0,g)}else console.warn(`[DOM] No handler '${d}' for component '${c}'`);else console.warn(`[DOM] No event handlers for component '${c}'`)}Lb(a,c,d){let e;d&&d.transferables&&(e=d.transferables);this.wa.postMessage({type:"result",responseId:a,isOk:c,result:d},e)}Ne(a){const c=a.responseId,d=a.isOk;a=a.result;const e=qa.get(c);d?e.resolve(a):e.reject(a);qa.delete(c)}D(a,c,d){let e=G.get(a);e||(e=new Map,G.set(a,e));if(e.has(c))throw Error(`[DOM] Component '${a}' already has handler '${c}'`);
e.set(c,d)}static Aa(a){if(F.includes(a))throw Error("DOM handler already added");F.push(a)}pd(){for(const a of this.Sb)if("runtime"===a.mb){this.xa=a;return}throw Error("cannot find runtime DOM handler");}Le(a){this.Ib("debugger","message",a)}Oe(){for(const a of this.Sb)a.fd()}static ib(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||ua)}static Nb(a){ua=!!a}ye(a){this.Za.push(a);this.Ic()}Qe(a){a=this.Za.indexOf(a);if(-1===a)throw Error("invalid callback");
this.Za.splice(a,1);this.Za.length||this.yc()}Ic(){-1===this.$a&&this.Za.length&&(this.$a=requestAnimationFrame(this.Ye))}yc(){-1!==this.$a&&(cancelAnimationFrame(this.$a),this.$a=-1)}Me(){this.$a=-1;for(const a of this.Za)a();this.Ic()}Ea(a){this.xa.Ea(a)}Na(a){this.xa.Na(a)}Hc(){this.xa.Hc()}Kb(a){this.xa.Kb(a)}re(){return!!la["audio/webm; codecs=opus"]}async Re(a){a=await this.od("runtime","opus-decode",{arrayBuffer:a},null,[a]);return new Float32Array(a)}we(a){this.Tc=!0;this.Cd=a}pe(a){return/^(?:[a-z\-]+:)?\/\//.test(a)||
"data:"===a.substr(0,5)||"blob:"===a.substr(0,5)}nd(a){return!this.pe(a)}async Pa(a){return"cordova"===this.A&&(a.startsWith("file:")||this.Vb&&this.nd(a))?(a.startsWith(this.ba)&&(a=a.substr(this.ba.length)),a=await this.Gb(a),URL.createObjectURL(new Blob([a],{type:"application/javascript"}))):a}async Ie(a){const c=a.filename;switch(a.as){case "text":return await this.ne(c);case "buffer":return await this.Gb(c);default:throw Error("unsupported type");}}jd(a){const c=window.cordova.file.applicationDirectory+
"www/"+a;return new Promise((d,e)=>{window.resolveLocalFileSystemURL(c,f=>{f.file(d,e)},e)})}async ne(a){a=await this.jd(a);return await ma(a)}zc(){if(C.length&&!(8<=D)){D++;var a=C.shift();this.Ce(a.filename,a.hf,a.af)}}Gb(a){return new Promise((c,d)=>{C.push({filename:a,hf:e=>{D--;this.zc();c(e)},af:e=>{D--;this.zc();d(e)}});this.zc()})}async Ce(a,c,d){try{const e=await this.jd(a),f=await pa(e);c(f)}catch(e){d(e)}}Jc(a){if("windows-webview2"===this.A)window.chrome.webview.postMessage(JSON.stringify(a));
else if("macos-wkwebview"===this.A)window.webkit.messageHandlers.C3Wrapper.postMessage(JSON.stringify(a));else throw Error("cannot send wrapper message");}async Be(){const a=[];for(const [c,d]of Object.entries(this.ra))a.push(this.Ae(c,d));await Promise.all(a)}async Ae(a,c){if("object"===typeof c)this.ra[a]=new Blob([c.str],{type:c.type}),this.Zb[a]=c.str;else{let d=await this.Ee(c);d||(d=this.De(c));this.ra[a]=d}}async Ee(a){try{return await (await fetch(a)).blob()}catch(c){return console.warn("Failed to fetch a data: URI. Falling back to a slower workaround. This is probably because the Content Security Policy unnecessarily blocked it. Allow data: URIs in your CSP to avoid this.",
c),null}}De(a){a=this.Pe(a);return this.ze(a.data,a.df)}Pe(a){var c=a.indexOf(",");if(0>c)throw new URIError("expected comma in data: uri");var d=a.substring(c+1);c=a.substring(5,c).split(";");a=c[0]||"";const e=c[2];d="base64"===c[1]||"base64"===e?atob(d):decodeURIComponent(d);return{df:a,data:d}}ze(a,c){var d=a.length;let e=d>>2,f=new Uint8Array(d),g=new Uint32Array(f.buffer,0,e),h,n;for(n=h=0;h<e;++h)g[h]=a.charCodeAt(n++)|a.charCodeAt(n++)<<8|a.charCodeAt(n++)<<16|a.charCodeAt(n++)<<24;for(d&=
3;d--;)f[n]=a.charCodeAt(n),++n;return new Blob([f],{type:c})}};"use strict";const H=self.ha;function za(b){return b.sourceCapabilities&&b.sourceCapabilities.firesTouchEvents||b.originalEvent&&b.originalEvent.sourceCapabilities&&b.originalEvent.sourceCapabilities.firesTouchEvents}const Aa=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]),I={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},Ca={dispatchUserScriptEvent:!0},Da={dispatchRuntimeEvent:!0};
function Ea(b){return new Promise((a,c)=>{const d=document.createElement("link");d.onload=()=>a(d);d.onerror=e=>c(e);d.rel="stylesheet";d.href=b;document.head.appendChild(d)})}function Fa(b){return new Promise((a,c)=>{const d=new Image;d.onload=()=>a(d);d.onerror=e=>c(e);d.src=b})}async function J(b){b=URL.createObjectURL(b);try{return await Fa(b)}finally{URL.revokeObjectURL(b)}}
function Ga(b){return new Promise((a,c)=>{let d=new FileReader;d.onload=e=>a(e.target.result);d.onerror=e=>c(e);d.readAsText(b)})}
async function Ha(b,a,c){if(!/firefox/i.test(navigator.userAgent))return await J(b);var d=await Ga(b);d=(new DOMParser).parseFromString(d,"image/svg+xml");const e=d.documentElement;if(e.hasAttribute("width")&&e.hasAttribute("height")){const f=e.getAttribute("width"),g=e.getAttribute("height");if(!f.includes("%")&&!g.includes("%"))return await J(b)}e.setAttribute("width",a+"px");e.setAttribute("height",c+"px");d=(new XMLSerializer).serializeToString(d);b=new Blob([d],{type:"image/svg+xml"});return await J(b)}
function Ia(b){do{if(b.parentNode&&b.hasAttribute("contenteditable"))return!0;b=b.parentNode}while(b);return!1}const Ja=new Set(["input","textarea","datalist","select"]),Ka=new Set(["canvas","body","html"]);function K(b){Ka.has(b.target.tagName.toLowerCase())&&b.preventDefault()}function La(b){(b.metaKey||b.ctrlKey)&&b.preventDefault()}
self.C3_GetSvgImageSize=async function(b){b=await J(b);if(0<b.width&&0<b.height)return[b.width,b.height];b.style.position="absolute";b.style.left="0px";b.style.top="0px";b.style.visibility="hidden";document.body.appendChild(b);const a=b.getBoundingClientRect();document.body.removeChild(b);return[a.width,a.height]};self.C3_RasterSvgImageBlob=async function(b,a,c,d,e){b=await Ha(b,a,c);const f=document.createElement("canvas");f.width=d;f.height=e;f.getContext("2d").drawImage(b,0,0,a,c);return f};
let Ma=!1;document.addEventListener("pause",()=>Ma=!0);document.addEventListener("resume",()=>Ma=!1);function xa(b){b.Bd=!0;b.Wc=b.s.pa();b.ub=b.s.ia()}async function Na(b){var a=b.imageBitmapOpts;b=await self.C3_RasterSvgImageBlob(b.blob,b.imageWidth,b.imageHeight,b.surfaceWidth,b.surfaceHeight);a=a?await createImageBitmap(b,a):await createImageBitmap(b);return{imageBitmap:a,transferables:[a]}}async function Oa(b){return await self.C3_GetSvgImageSize(b.blob)}
function Pa(b){window.c3_postToMessagePort&&(b.from="runtime",window.c3_postToMessagePort(b))}function Qa(b){self.setTimeout(()=>{b.Ad=!0},1E3);"cordova"===b.s.A?(document.addEventListener("pause",()=>Ra(b,!0)),document.addEventListener("resume",()=>Ra(b,!1))):document.addEventListener("visibilitychange",()=>Ra(b,document.hidden));return{isSuspended:!(!document.hidden&&!Ma)}}
function Sa(b){b.vd||(b.vd=!0,window.addEventListener("deviceorientation",a=>{b.Z||k(b,"deviceorientation",{absolute:!!a.absolute,alpha:a.alpha||0,beta:a.beta||0,gamma:a.gamma||0,timeStamp:a.timeStamp,webkitCompassHeading:a.webkitCompassHeading,webkitCompassAccuracy:a.webkitCompassAccuracy},I)}),window.addEventListener("deviceorientationabsolute",a=>{b.Z||k(b,"deviceorientationabsolute",{absolute:!!a.absolute,alpha:a.alpha||0,beta:a.beta||0,gamma:a.gamma||0,timeStamp:a.timeStamp},I)}))}
function Ta(b){b.ud||(b.ud=!0,window.addEventListener("devicemotion",a=>{if(!b.Z){var c=null,d=a.acceleration;d&&(c={x:d.x||0,y:d.y||0,z:d.z||0});d=null;var e=a.accelerationIncludingGravity;e&&(d={x:e.x||0,y:e.y||0,z:e.z||0});e=null;var f=a.rotationRate;f&&(e={alpha:f.alpha||0,beta:f.beta||0,gamma:f.gamma||0});k(b,"devicemotion",{acceleration:c,accelerationIncludingGravity:d,rotationRate:e,interval:a.interval,timeStamp:a.timeStamp},I)}}))}async function Ua(b){await Ea(b.url)}
function Va(b,a){b.Dd=a.message;-1===b.Oc&&(b.Oc=setTimeout(()=>{b.Oc=-1;const c=document.getElementById("exportToVideoMessage");c&&(c.textContent=b.Dd)},250))}function L(b){if(!b.Z){var a=H.ib();a&&"any"!==b.ad&&Wa(b);k(b,"fullscreenchange",{isFullscreen:a,innerWidth:b.pa(),innerHeight:b.ia()})}}function Xa(b,a){console.warn("[Construct] Fullscreen request failed: ",a);k(b,"fullscreenerror",{isFullscreen:H.ib(),innerWidth:b.pa(),innerHeight:b.ia()})}
function Ra(b,a){a?b.s.yc():b.s.Ic();k(b,"visibilitychange",{hidden:a})}function Ya(b,a,c){"Backspace"===c.key&&K(c);if(!b.Z){var d=Aa.get(c.code)||c.code;l(b,a,{code:d,key:c.key,which:c.which,repeat:c.repeat,altKey:c.altKey,ctrlKey:c.ctrlKey,metaKey:c.metaKey,shiftKey:c.shiftKey,timeStamp:c.timeStamp},I)}}
function Za(b,a,c,d){b.Z||za(c)||l(b,a,{button:c.button,buttons:c.buttons,clientX:c.clientX,clientY:c.clientY+b.ca,pageX:c.pageX,pageY:c.pageY+b.ca,movementX:c.movementX||0,movementY:c.movementY||0,timeStamp:c.timeStamp},d)}function $a(b){window!==window.top&&window.focus();ab(b.target)&&document.activeElement&&!ab(document.activeElement)&&document.activeElement.blur()}
function M(b,a,c){if(!b.Z){if(b.Cb&&"pointermove"!==a){var d=b.Cb;d.rb||(aa(d),d.Xb=Date.now())}d=0;"mouse"===c.pointerType&&(d=b.zb);l(b,a,{pointerId:c.pointerId,pointerType:c.pointerType,button:c.button,buttons:c.buttons,lastButtons:d,clientX:c.clientX,clientY:c.clientY+b.ca,pageX:c.pageX,pageY:c.pageY+b.ca,movementX:(c.movementX||0)+b.fc,movementY:(c.movementY||0)+b.hc,width:c.width||0,height:c.height||0,pressure:c.pressure||0,tangentialPressure:c.tangentialPressure||0,tiltX:c.tiltX||0,tiltY:c.tiltY||
0,twist:c.twist||0,timeStamp:c.timeStamp},I);b.fc=0;b.hc=0;"mouse"===c.pointerType&&(d="mousemove","pointerdown"===a?d="mousedown":"pointerup"===a&&(d="mouseup"),Za(b,d,c,Ca),b.zb=c.buttons)}}
function bb(b,a,c){if(!b.Z&&!za(c)){var d=b.zb;"pointerdown"===a&&0!==d?a="pointermove":"pointerup"===a&&0!==c.buttons&&(a="pointermove");l(b,a,{pointerId:1,pointerType:"mouse",button:c.button,buttons:c.buttons,lastButtons:d,clientX:c.clientX,clientY:c.clientY+b.ca,pageX:c.pageX,pageY:c.pageY+b.ca,movementX:c.movementX||0,movementY:c.movementY||0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,timeStamp:c.timeStamp},I);b.zb=c.buttons;Za(b,c.type,c,Ca)}}
function N(b,a,c){if(!b.Z)for(let d=0,e=c.changedTouches.length;d<e;++d){const f=c.changedTouches[d];l(b,a,{pointerId:f.identifier,pointerType:"touch",button:0,buttons:0,lastButtons:0,clientX:f.clientX,clientY:f.clientY+b.ca,pageX:f.pageX,pageY:f.pageY+b.ca,movementX:c.movementX||0,movementY:c.movementY||0,width:2*(f.radiusX||f.webkitRadiusX||0),height:2*(f.radiusY||f.webkitRadiusY||0),pressure:f.force||f.webkitForce||0,tangentialPressure:0,tiltX:0,tiltY:0,twist:f.rotationAngle||0,timeStamp:c.timeStamp},
I)}}function cb(b,a,c){document.body.style.transform="";b.ca=0;if(0<c){var d=document.activeElement;d&&(d=d.getBoundingClientRect(),a=(d.top+d.bottom)/2-(a-c)/2,a>c&&(a=c),0>a&&(a=0),0<a&&(document.body.style.transform=`translateY(${-a}px)`,b.ca=a))}}function db(b,a,c,d){const e=b.pa(),f=b.ia();b.bb=-1;e!=a||f!=c?k(b,"window-resize",{innerWidth:e,innerHeight:f,devicePixelRatio:window.devicePixelRatio,isFullscreen:H.ib()}):10>d&&eb(b,e,f,d+1)}
function eb(b,a,c,d){-1!==b.bb&&clearTimeout(b.bb);b.bb=setTimeout(()=>db(b,a,c,d),48)}
function Wa(b){b=b.ad;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(b).catch(a=>console.warn("[Construct] Failed to lock orientation: ",a));else try{let a=!1;screen.lockOrientation?a=screen.lockOrientation(b):screen.webkitLockOrientation?a=screen.webkitLockOrientation(b):screen.mozLockOrientation?a=screen.mozLockOrientation(b):screen.msLockOrientation&&(a=screen.msLockOrientation(b));a||console.warn("[Construct] Failed to lock orientation")}catch(a){console.warn("[Construct] Failed to lock orientation: ",
a)}}function ab(b){return!b||b===document||b===window||b===document.body||"canvas"===b.tagName.toLowerCase()}
H.Aa(class extends self.Ba{constructor(b){super(b,"runtime");this.Id=!0;this.Bd=!1;this.bb=-1;this.ad="any";this.ud=this.vd=!1;this.Ha=null;this.Z=!1;this.Dd="";this.Oc=-1;this.Ta=this.Cb=null;this.hc=this.fc=0;this.Ad=!1;this.Wc=b.pa();this.ub=b.ia();this.ca=this.Eb=0;b.D("canvas","update-size",d=>{var e=this.s;e.Tc||(e=e.H,e.style.width=d.styleWidth+"px",e.style.height=d.styleHeight+"px",e.style.marginLeft=d.marginLeft+"px",e.style.marginTop=d.marginTop+"px",document.documentElement.style.setProperty("--construct-scale",
d.displayScale),this.Id&&(e.style.display="",this.Id=!1))});b.D("runtime","invoke-download",d=>{const e=d.url;d=d.filename;const f=document.createElement("a"),g=document.body;f.textContent=d;f.href=e;f.download=d;g.appendChild(f);f.click();g.removeChild(f)});b.D("runtime","raster-svg-image",d=>Na(d));b.D("runtime","get-svg-image-size",d=>Oa(d));b.D("runtime","set-target-orientation",d=>{this.ad=d.targetOrientation});b.D("runtime","register-sw",()=>{window.C3_RegisterSW&&window.C3_RegisterSW()});b.D("runtime",
"post-to-debugger",d=>Pa(d));b.D("runtime","go-to-script",d=>Pa(d));b.D("runtime","before-start-ticking",()=>Qa(this));b.D("runtime","debug-highlight",d=>{if(d.show){this.Ha||(this.Ha=document.createElement("div"),this.Ha.id="inspectOutline",document.body.appendChild(this.Ha));var e=this.Ha;e.style.display="";e.style.left=d.left-1+"px";e.style.top=d.top-1+"px";e.style.width=d.width+2+"px";e.style.height=d.height+2+"px";e.textContent=d.name}else this.Ha&&(this.Ha.style.display="none")});b.D("runtime",
"enable-device-orientation",()=>Sa(this));b.D("runtime","enable-device-motion",()=>Ta(this));b.D("runtime","add-stylesheet",d=>Ua(d));b.D("runtime","script-create-worker",d=>{const e=d.port2;(new Worker(d.url,d.opts)).postMessage({type:"construct-worker-init",port2:e},[e])});b.D("runtime","alert",d=>this.Dc(d));b.D("runtime","hide-cordova-splash",()=>{navigator.splashscreen&&navigator.splashscreen.hide&&navigator.splashscreen.hide()});b.D("runtime","set-exporting-to-video",d=>{this.Z=!0;const e=document.createElement("h1");
e.id="exportToVideoMessage";e.textContent=d.message;document.body.prepend(e);document.body.classList.add("exportingToVideo");this.s.H.style.display="";this.s.we(d.duration)});b.D("runtime","export-to-video-progress",d=>Va(this,d));b.D("runtime","exported-to-video",d=>{window.Ze({type:"exported-video",blob:d.blob,time:d.time})});b.D("runtime","exported-to-image-sequence",d=>{window.Ze({type:"exported-image-sequence",blobArr:d.blobArr,time:d.time,gif:d.gif})});const a=new Set(["input","textarea","datalist"]);
window.addEventListener("contextmenu",d=>{const e=d.target;a.has(e.tagName.toLowerCase())||Ia(e)||d.preventDefault()});const c=b.H;window.addEventListener("selectstart",K);window.addEventListener("gesturehold",K);c.addEventListener("selectstart",K);c.addEventListener("gesturehold",K);window.addEventListener("touchstart",K,{passive:!1});"undefined"!==typeof PointerEvent?(window.addEventListener("pointerdown",K,{passive:!1}),c.addEventListener("pointerdown",K)):c.addEventListener("touchstart",K);this.zb=
0;window.addEventListener("mousedown",d=>{1===d.button&&d.preventDefault()});window.addEventListener("mousewheel",La,{passive:!1});window.addEventListener("wheel",La,{passive:!1});window.addEventListener("resize",()=>{a:{if(!this.Z&&this.Bd){var d=this.pa();var e=this.ia();if(this.s.md()){if(this.Ad){if(this.Wc===d&&e<this.ub){this.Eb=this.ub-e;cb(this,this.ub,this.Eb);d=void 0;break a}0<this.Eb&&(this.Eb=0,cb(this,e,this.Eb))}this.Wc=d;this.ub=e}k(this,"window-resize",{innerWidth:d,innerHeight:e,
devicePixelRatio:window.devicePixelRatio,isFullscreen:H.ib()});this.s.tc()&&(-1!==this.bb&&clearTimeout(this.bb),db(this,d,e,0))}d=void 0}return d});window.addEventListener("fullscreenchange",()=>L(this));window.addEventListener("webkitfullscreenchange",()=>L(this));window.addEventListener("mozfullscreenchange",()=>L(this));window.addEventListener("fullscreenerror",d=>Xa(this,d));window.addEventListener("webkitfullscreenerror",d=>Xa(this,d));window.addEventListener("mozfullscreenerror",d=>Xa(this,
d));if(b.tc())if(window.visualViewport){let d=Infinity;window.visualViewport.addEventListener("resize",()=>{const e=window.visualViewport.height;e>d&&(document.scrollingElement.scrollTop=0);d=e})}else window.addEventListener("focusout",()=>{{const f=document.activeElement;if(f){var d=f.tagName.toLowerCase();var e=new Set("email number password search tel text url".split(" "));d="textarea"===d?!0:"input"===d?e.has(f.type.toLowerCase()||"text"):Ia(f)}else d=!1}d||(document.scrollingElement.scrollTop=
0)});self.C3WrapperOnMessage=d=>{"entered-fullscreen"===d?(H.Nb(!0),L(this)):"exited-fullscreen"===d?(H.Nb(!1),L(this)):console.warn("Unknown wrapper message: ",d)};this.Va=new Set;this.ac=new WeakSet;this.va=!1}fd(){window.addEventListener("focus",()=>{k(this,"window-focus",null,Da)});window.addEventListener("blur",()=>{try{var a=window.parent&&window.parent.document.hasFocus()}catch(c){a=!1}k(this,"window-blur",{parentHasFocus:a},Da);this.zb=0});window.addEventListener("focusin",a=>{a=a.target;
(Ja.has(a.tagName.toLowerCase())||Ia(a))&&k(this,"keyboard-blur",null,Da)});window.addEventListener("keydown",a=>Ya(this,"keydown",a));window.addEventListener("keyup",a=>Ya(this,"keyup",a));window.addEventListener("dblclick",a=>Za(this,"dblclick",a,I));window.addEventListener("wheel",a=>{this.Z||k(this,"wheel",{clientX:a.clientX,clientY:a.clientY+this.ca,pageX:a.pageX,pageY:a.pageY+this.ca,deltaX:a.deltaX,deltaY:a.deltaY,deltaZ:a.deltaZ,deltaMode:a.deltaMode,timeStamp:a.timeStamp},I)});"undefined"!==
typeof PointerEvent?(window.addEventListener("pointerdown",a=>{$a(a);M(this,"pointerdown",a)}),this.s.na&&"undefined"!==typeof window.onpointerrawupdate&&self===self.top?(this.Cb=new self.ve(()=>{M(this,"pointermove",this.Ta);this.Ta=null}),this.Cb.yd=!0,window.addEventListener("pointerrawupdate",a=>{this.Ta&&(this.fc+=this.Ta.movementX||0,this.hc+=this.Ta.movementY||0);this.Ta=a;a=this.Cb;if(-1===a.cb){var c=Date.now(),d=c-a.Xb,e=a.Te;d>=e&&a.yd?(a.Xb=c,a.rb=!0,a.Lc(),a.rb=!1):a.cb=self.setTimeout(a.Wd,
Math.max(e-d,4))}})):window.addEventListener("pointermove",a=>M(this,"pointermove",a)),window.addEventListener("pointerup",a=>M(this,"pointerup",a)),window.addEventListener("pointercancel",a=>M(this,"pointercancel",a))):(window.addEventListener("mousedown",a=>{$a(a);bb(this,"pointerdown",a)}),window.addEventListener("mousemove",a=>bb(this,"pointermove",a)),window.addEventListener("mouseup",a=>bb(this,"pointerup",a)),window.addEventListener("touchstart",a=>{$a(a);N(this,"pointerdown",a)}),window.addEventListener("touchmove",
a=>N(this,"pointermove",a)),window.addEventListener("touchend",a=>N(this,"pointerup",a)),window.addEventListener("touchcancel",a=>N(this,"pointercancel",a)));const b=()=>this.Hc();window.addEventListener("pointerup",b,!0);window.addEventListener("touchend",b,!0);window.addEventListener("click",b,!0);window.addEventListener("keydown",b,!0);window.addEventListener("gamepadconnected",b,!0);this.s.qe()&&!this.s.md()&&navigator.virtualKeyboard&&(navigator.virtualKeyboard.overlaysContent=!0,navigator.virtualKeyboard.addEventListener("geometrychange",
()=>{cb(this,this.ia(),navigator.virtualKeyboard.boundingRect.height)}))}pa(){return this.s.pa()}ia(){return this.s.ia()}Hc(){var b=[...this.Va];this.Va.clear();if(!this.va)for(const a of b)(b=a.play())&&b.catch(()=>{this.ac.has(a)||this.Va.add(a)})}Ea(b){if("function"!==typeof b.play)throw Error("missing play function");this.ac.delete(b);let a;try{a=b.play()}catch(c){this.Va.add(b);return}a&&a.catch(()=>{this.ac.has(b)||this.Va.add(b)})}Na(b){this.Va.delete(b);this.ac.add(b)}Kb(b){this.va=!!b}Dc(b){alert(b.message)}});
"use strict";async function va(b){if(b.Se)throw Error("already initialised");b.Se=!0;var a=b.ya.Ac(("playable-ad"===b.ya.A?b.ya.ab:"")+"dispatchworker.js");b.Nc=await b.ya.oc(a,b.lb,{name:"DispatchWorker"});a=new MessageChannel;b.Sc=a.port1;b.Nc.postMessage({type:"_init","in-port":a.port2},[a.port2]);b.Zc=await ya(b)}function wa(b){return[b.Sc,b.Zc]}
async function ya(b){const a=b.Jd.length;var c=b.ya.Ac(("playable-ad"===b.ya.A?b.ya.ab:"")+"jobworker.js");c=await b.ya.oc(c,b.lb,{name:"JobWorker"+a});const d=new MessageChannel,e=new MessageChannel;b.Nc.postMessage({type:"_addJobWorker",port:d.port1},[d.port1]);c.postMessage({type:"init",number:a,"dispatch-port":d.port2,"output-port":e.port2},[d.port2,e.port2]);b.Jd.push(c);return e.port1}
self.te=class{constructor(b){this.ya=b;this.lb=b.ba;this.lb="preview"===b.A?this.lb+"workers/":this.lb+b.ab;this.Ve=Math.min(navigator.hardwareConcurrency||2,16);this.Nc=null;this.Jd=[];this.Zc=this.Sc=null}};"use strict";window.C3_IsSupported&&(window.c3_runtimeInterface=new self.ha({jf:!1,kf:"workermain.js",eb:["scripts/c3runtime.js"],mc:[],cd:"",ff:"scripts/",ed:[],Xd:"html5"}));"use strict";
async function gb(b,a){a=a.type;let c=!0;0===a?c=await hb():1===a&&(c=await ib());k(b,"permission-result",{type:a,result:c})}async function hb(){if(!self.DeviceOrientationEvent||!self.DeviceOrientationEvent.requestPermission)return!0;try{return"granted"===await self.DeviceOrientationEvent.requestPermission()}catch(b){return console.warn("[Touch] Failed to request orientation permission: ",b),!1}}
async function ib(){if(!self.DeviceMotionEvent||!self.DeviceMotionEvent.requestPermission)return!0;try{return"granted"===await self.DeviceMotionEvent.requestPermission()}catch(b){return console.warn("[Touch] Failed to request motion permission: ",b),!1}}self.ha.Aa(class extends self.Ba{constructor(b){super(b,"touch");m(this,"request-permission",a=>gb(this,a))}});"use strict";function jb(){}
function kb(b){window.C3_RegisterSW&&window.OfflineClientInfo&&window.OfflineClientInfo.SetMessageCallback(a=>k(b,"sw-message",a.data))}
function lb(b){b=b.orientation;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(b).catch(a=>console.warn("[Construct] Failed to lock orientation: ",a));else try{let a=!1;screen.lockOrientation?a=screen.lockOrientation(b):screen.webkitLockOrientation?a=screen.webkitLockOrientation(b):screen.mozLockOrientation?a=screen.mozLockOrientation(b):screen.msLockOrientation&&(a=screen.msLockOrientation(b));a||console.warn("[Construct] Failed to lock orientation")}catch(a){console.warn("[Construct] Failed to lock orientation: ",
a)}}
self.ha.Aa(class extends self.Ba{constructor(b){super(b,"browser");this.A="";t(this,[["get-initial-state",a=>this.Fc(a)],["ready-for-sw-messages",()=>kb(this)],["alert",a=>this.Dc(a)],["close",()=>{navigator.app&&navigator.app.exitApp?navigator.app.exitApp():navigator.device&&navigator.device.exitApp?navigator.device.exitApp():window.close()}],["set-focus",a=>this.Gc(a)],["vibrate",a=>{navigator.vibrate&&navigator.vibrate(a.pattern)}],["lock-orientation",a=>lb(a)],["unlock-orientation",()=>{try{screen.orientation&&screen.orientation.unlock?
screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()}catch(a){}}],["navigate",a=>{var c=a.type;if("back"===c)navigator.app&&navigator.app.backHistory?navigator.app.backHistory():window.history.back();else if("forward"===c)window.history.forward();else if("reload"===c)location.reload();else if("url"===
c){c=a.url;const d=a.target;a=a.exportType;self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(c,"_system"):"preview"===a||"windows-webview2"===a?window.open(c,"_blank"):this.pf||(2===d?window.top.location=c:1===d?window.parent.location=c:window.location=c)}else"new-window"===c&&(c=a.url,a=a.tag,self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(c,"_system"):window.open(c,a))}],["request-fullscreen",a=>{if("windows-webview2"===this.A||"macos-wkwebview"===this.A)self.ha.Nb(!0),
this.s.Jc({type:"set-fullscreen",fullscreen:!0});else{const c={navigationUI:"auto"};a=a.navUI;1===a?c.navigationUI="hide":2===a&&(c.navigationUI="show");a=document.documentElement;let d;a.requestFullscreen?d=a.requestFullscreen(c):a.mozRequestFullScreen?d=a.mozRequestFullScreen(c):a.msRequestFullscreen?d=a.msRequestFullscreen(c):a.webkitRequestFullScreen&&(d="undefined"!==typeof Element.ALLOW_KEYBOARD_INPUT?a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):a.webkitRequestFullScreen());d instanceof
Promise&&d.catch(jb)}}],["exit-fullscreen",()=>{if("windows-webview2"===this.A||"macos-wkwebview"===this.A)self.ha.Nb(!1),this.s.Jc({type:"set-fullscreen",fullscreen:!1});else{let a;document.exitFullscreen?a=document.exitFullscreen():document.mozCancelFullScreen?a=document.mozCancelFullScreen():document.msExitFullscreen?a=document.msExitFullscreen():document.webkitCancelFullScreen&&(a=document.webkitCancelFullScreen());a instanceof Promise&&a.catch(jb)}}],["set-hash",a=>{location.hash=a.hash}],["set-document-css-style",
a=>{const c=a.prop,d=a.value;var e=a.selector;a=a["is-all"];try{if(e)if(a)var f=Array.from(document.querySelectorAll(e));else{var g=document.querySelector(e);f=g?[g]:[]}else f=[document.documentElement];e=f;for(const h of e)c.startsWith("--")?h.style.setProperty(c,d):h.style[c]=d}catch(h){console.warn("[Browser] Failed to set style: ",h)}}],["get-document-css-style",a=>{{const d=a.prop;a=a.selector;try{const e=document.querySelector(a);var c=e?{isOk:!0,result:window.getComputedStyle(e).getPropertyValue(d)}:
{isOk:!1}}catch(e){console.warn("[Browser] Failed to get style: ",e),c={isOk:!1}}}return c}]]);window.addEventListener("online",()=>{k(this,"online-state",{isOnline:!0})});window.addEventListener("offline",()=>{k(this,"online-state",{isOnline:!1})});window.addEventListener("hashchange",()=>{k(this,"hashchange",{location:location.toString()})});document.addEventListener("backbutton",()=>{k(this,"backbutton")})}Fc(b){this.A=b.exportType;return{location:location.toString(),isOnline:!!navigator.onLine,
referrer:document.referrer,title:document.title,isCookieEnabled:!!navigator.cookieEnabled,screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,isConstructArcade:"undefined"!==typeof window.is_scirra_arcade}}Dc(b){alert(b.message)}Gc(b){b=b.isFocus;if("nwjs"===this.A){const a="nwjs"===this.A?nw.Window.get():null;b?a.focus():a.blur()}else b?window.focus():window.blur()}});"use strict";
async function mb(b){if(!b.Ja)try{b.Ja=await navigator.wakeLock.request("screen"),b.Ja.addEventListener("release",()=>{console.log("[Construct] Screen wake lock released");b.Ja=null;k(b,"wake-lock-released")}),console.log("[Construct] Screen wake lock acquired"),k(b,"wake-lock-acquired")}catch(a){console.warn("[Construct] Failed to acquire screen wake lock: ",a),k(b,"wake-lock-error")}}
function nb(){var b=document.body;const a=b.style;a.setProperty("--temp-sai-top","env(safe-area-inset-top)");a.setProperty("--temp-sai-right","env(safe-area-inset-right)");a.setProperty("--temp-sai-bottom","env(safe-area-inset-bottom)");a.setProperty("--temp-sai-left","env(safe-area-inset-left)");b=getComputedStyle(b);b=[b.getPropertyValue("--temp-sai-top"),b.getPropertyValue("--temp-sai-right"),b.getPropertyValue("--temp-sai-bottom"),b.getPropertyValue("--temp-sai-left")].map(c=>{c=parseInt(c,10);
return isFinite(c)?c:0});a.removeProperty("--temp-sai-top");a.removeProperty("--temp-sai-right");a.removeProperty("--temp-sai-bottom");a.removeProperty("--temp-sai-left");return b}
self.ha.Aa(class extends self.Ba{constructor(b){super(b,"platform-info");t(this,[["get-initial-state",()=>this.Fc()],["request-wake-lock",()=>mb(this)],["release-wake-lock",()=>{this.Ja&&(this.Ja.release(),this.Ja=null)}]]);window.addEventListener("resize",()=>{k(this,"window-resize",{windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,safeAreaInset:nb()})});this.Ja=null}Fc(){return{screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,
safeAreaInset:nb(),supportsWakeLock:!!navigator.wakeLock}}});"use strict";function O(b){b.stopPropagation()}function ob(b){13!==b.which&&27!==b.which&&b.stopPropagation()}
self.ha.Aa(class extends self.oe{constructor(b){super(b);ca(this,"scroll-to-bottom",a=>{a.scrollTop=a.scrollHeight})}kd(b,a){let c;const d=a.type;"textarea"===d?(c=document.createElement("textarea"),c.style.resize="none"):(c=document.createElement("input"),c.type=d);c.style.position="absolute";c.autocomplete="off";c.addEventListener("pointerdown",O);c.addEventListener("pointermove",O);c.addEventListener("pointerrawupdate",O);c.addEventListener("pointerup",O);c.addEventListener("mousedown",O);c.addEventListener("mouseup",
O);c.addEventListener("keydown",ob);c.addEventListener("keyup",ob);c.addEventListener("click",e=>{e.stopPropagation();da(this,"click",b)});c.addEventListener("dblclick",e=>{e.stopPropagation();da(this,"dblclick",b)});c.addEventListener("input",()=>v(this,"change",b,{text:c.value}));a.id&&(c.id=a.id);a.className&&(c.className=a.className);this.xc(c,a);return c}xc(b,a){b.value=a.text;b.placeholder=a.placeholder;b.title=a.title;b.disabled=!a.isEnabled;b.readOnly=a.isReadOnly;b.spellcheck=a.spellCheck;
a=a.maxLength;0>a?b.removeAttribute("maxlength"):b.setAttribute("maxlength",a)}});"use strict";
self.ha.Aa(class extends self.Ba{constructor(b){super(b,"mouse");t(this,[["cursor",a=>{document.documentElement.style.cursor=a}],["request-pointer-lock",()=>{this.s.H.requestPointerLock()}],["release-pointer-lock",()=>{document.exitPointerLock()}]]);document.addEventListener("pointerlockchange",()=>{k(this,"pointer-lock-change",{"has-pointer-lock":!!document.pointerLockElement})});document.addEventListener("pointerlockerror",()=>{k(this,"pointer-lock-error",{"has-pointer-lock":!!document.pointerLockElement})})}});
"use strict";const pb=180/Math.PI;
async function qb(b,a){if(a.isiOSCordova||a.isSafari)b.dc=!0;b.bd=a.timeScaleMode;b.Od=["equalpower","HRTF","soundfield"][a.panningModel];b.zd=["linear","inverse","exponential"][a.distanceModel];b.Pd=a.refDistance;b.Nd=a.maxDistance;b.Rd=a.rolloffFactor;if(b.s.Tc)b.dc=!0,b.g=new OfflineAudioContext({numberOfChannels:2,sampleRate:48E3,length:Math.ceil(48E3*b.s.Cd)});else{var c={latencyHint:a.latencyHint};b.Ud||(c.sampleRate=48E3);if("undefined"!==typeof AudioContext)b.g=new AudioContext(c);else if("undefined"!==
typeof webkitAudioContext)b.g=new webkitAudioContext(c);else throw Error("Web Audio API not supported");rb(b);b.g.onstatechange=()=>{"running"!==b.g.state&&rb(b);k(b,"audiocontext-state",{audioContextState:b.g.state})}}b.Ra=b.g.createGain();b.Ra.connect(b.g.destination);c=a.listenerPos;b.aa[0]=c[0];b.aa[1]=c[1];b.aa[2]=c[2];b.g.listener.setPosition(c[0],c[1],c[2]);b.g.listener.setOrientation(0,0,1,0,-1,0);self.C3_GetAudioContextCurrentTime=()=>b.g.currentTime;try{await Promise.all(a.preloadList.map(d=>
P(b,d.originalUrl,d.url,d.type,!1)))}catch(d){console.error("[Construct] Preloading sounds failed: ",d)}return{sampleRate:b.g.sampleRate,audioContextState:b.g.state,outputLatency:b.g.outputLatency||0}}
async function sb(b,a){var c=a.originalUrl;const d=a.url,e=a.type,f=a.isMusic,g=a.tag,h=a.isLooping,n=a.vol,q=a.pos,p=a.panning,z=a.stereoPan;let x=a.off;0<x&&!a.trueClock&&(b.g.getOutputTimestamp?(a=b.g.getOutputTimestamp(),x=x-a.performanceTime/1E3+a.contextTime):x=x-performance.now()/1E3+b.g.currentTime);b.Kd=g;tb(b,g);try{b.$=await ub(b,c,d,e,g,f);if(p){Q(b.$,!0);var r=b.$,A=p.innerAngle,na=p.outerAngle,oa=p.outerGain;if(r.sb){vb(r,p.x,p.y,p.angle);var E=self.fb.xe;r.sa[0]!==E(A)&&(r.sa[0]=E(A),
r.F.coneInnerAngle=E(A));r.sa[1]!==E(na)&&(r.sa[1]=E(na),r.F.coneOuterAngle=E(na));r.sa[2]!==oa&&(r.sa[2]=oa,r.F.coneOuterGain=oa)}p.hasOwnProperty("uid")&&(b.$.qa=p.uid)}else"number"===typeof z&&0!==z?(R(b.$,!0),wb(b.$,z)):(Q(b.$,!1),R(b.$,!1));b.$.Play(h,n,q,x)}catch(Hb){console.error("[Construct] Audio: error starting playback: ",Hb);return}finally{c=b.Bb.get(g);if(!c)throw Error("expected pending tag");c.dd--;0===c.dd&&(c.resolve(),b.Bb.delete(g))}u(b)}
async function xb(b,a){var c=a.tag;const d=a.vol,e=a.duration;a=a.stopOnEnd;await yb(b,c);for(const p of S(b,c)){c=p;var f=d,g=e,h=a;if(!c.Sa){var n=c.G.gain;n.cancelScheduledValues(0);var q=c.u.g.currentTime;g=q+g;n.setValueAtTime(n.value,q);n.linearRampToValueAtTime(f,g);c.La=f;c.pb=g;c.Td=h}}T(b)}async function zb(b,a){const c=a.tag;a=a.rate;await yb(b,c);for(const d of S(b,c))b=d,b.ma!==a&&(b.ma=a,b.Fa())}
async function Ab(b,a){const c=a.tag;a=a.pos;await yb(b,c);for(const d of S(b,c))d.uc(a)}async function Bb(b,a){const c=a.originalUrl,d=a.url,e=a.type;a=a.isMusic;try{await ub(b,c,d,e,"",a)}catch(f){console.error("[Construct] Audio: error preloading: ",f)}}async function Cb(b,a){if(a=await P(b,"",a.url,a.type,a.isMusic,!0))a.j(),a=b.ka.indexOf(a),-1!==a&&b.ka.splice(a,1)}
async function Db(b,a){var c=a.type,d=a.tag,e=a.params;if("filter"===c)e=new self.ce(b,...e);else if("delay"===c)e=new self.ae(b,...e);else if("convolution"===c){c=null;try{c=await P(b,a.bufferOriginalUrl,a.bufferUrl,a.bufferType,!1)}catch(g){console.log("[Construct] Audio: error loading convolution: ",g);return}c=e=new self.$d(b,c.ja,...e);var f=a.bufferType;c.wd=a.bufferOriginalUrl;c.xd=f}else if("flanger"===c)e=new self.de(b,...e);else if("phaser"===c)e=new self.fe(b,...e);else if("gain"===c)e=
new self.ee(b,...e);else if("stereopan"===c)e=new self.he(b,...e);else if("tremolo"===c)e=new self.ie(b,...e);else if("ringmod"===c)e=new self.ge(b,...e);else if("distortion"===c)e=new self.be(b,...e);else if("compressor"===c)e=new self.Zd(b,...e);else if("analyser"===c)e=new self.Yd(b,...e);else throw Error("invalid effect type");a=e;d=d.toLowerCase();e=b.la.get(d);e||(e=[],b.la.set(d,e));a.Hd=e.length;a.fa=d;e.push(a);Eb(b,d);Fb(b)}
async function Gb(b,a){const c=a.saveLoadMode;if(3!==c){var d=[];for(const e of b.J)e.Ca()&&1===c||!e.Ca()&&2===c?d.push(e):e.j();b.J=d}for(const e of b.la.values())for(const f of e)f.j();b.la.clear();b.kc=a.timeScale;b.Pc=a.gameTime;d=a.listenerPos;b.aa[0]=d[0];b.aa[1]=d[1];b.aa[2]=d[2];b.g.listener.setPosition(d[0],d[1],d[2]);b.va=a.isSilent;b.s.Kb(b.va);b.$b=a.masterVolume;b.Ra.gain.value=b.$b;d=[];for(const e of Object.values(a.effects))d.push(Promise.all(e.map(f=>Db(b,f))));await Promise.all(d);
await Promise.all(a.playing.map(e=>Ib(b,e,c)));T(b)}async function Jb(b,a){try{const c=b.g.suspend(a.time);b.Gd?b.g.resume():(b.g.startRendering().then(d=>{const e=[];for(let f=0,g=d.numberOfChannels;f<g;++f){const h=d.getChannelData(f);e.push(h.buffer)}b.s.Ib("runtime","offline-audio-render-completed",{duration:d.duration,length:d.length,numberOfChannels:d.numberOfChannels,sampleRate:d.sampleRate,channelData:e},null,e)}).catch(d=>Kb(d)),b.Gd=!0);await c}catch(c){Kb(c)}}
function rb(b){b.Tb||(b.Rc=!1,window.addEventListener("pointerup",b.za,!0),window.addEventListener("touchend",b.za,!0),window.addEventListener("click",b.za,!0),window.addEventListener("keydown",b.za,!0),b.Tb=!0)}
async function P(b,a,c,d,e,f){for(var g of b.ka)if(g.hb()===c)return await Lb(g),g;if(f)return null;if(e&&(b.dc||b.Fd)){f=0;for(let h=0,n=b.ka.length;h<n;++h)g=b.ka[h],b.ka[f]=g,g.Ca()?g.j():++f;b.ka.length=f}f="audio/webm; codecs=opus"===d&&!b.Ud;e&&f&&(b.Fd=!0);c=!e||b.dc||f?new self.le(b,a,c,d,e,f):new self.je(b,a,c,d,e);b.ka.push(c);await Lb(c);b.Md.has(a)||(k(b,"buffer-metadata",{originalUrl:a,duration:c.ga()}),b.Md.add(a));return c}
function Mb(b,a){return(a=b.la.get(a.toLowerCase()))?a[0].N():b.oa()}function Eb(b,a){let c=b.oa();var d=b.la.get(a);if(d&&d.length){c=d[0].N();for(let f=0,g=d.length;f<g;++f){var e=d[f];f+1===g?e.S(b.oa()):e.S(d[f+1].N())}}for(const f of S(b,a))d=c,e=f.ea||f.F||f.G,e.disconnect(),e.connect(d);b.Ia&&b.Xc===a&&(b.Ia.disconnect(),b.Ia.connect(c))}
function*S(b,a){if(a)for(const c of b.J)b=c.fa,(b.length!==a.length?0:b===a||b.toLowerCase()===a.toLowerCase())&&(yield c);else b.$&&!b.$.U()&&(yield b.$)}function Nb(b,a,c){return c?b.s.Re(a).then(d=>{const e=b.g.createBuffer(1,d.length,48E3);e.getChannelData(0).set(d);return e}):new Promise((d,e)=>{b.g.decodeAudioData(a,d,e)})}function Ob(b,a){let c=0;for(let d=0,e=b.J.length;d<e;++d){const f=b.J[d];b.J[c]=f;f.O===a?f.j():++c}b.J.length=c}
async function ub(b,a,c,d,e,f){for(const g of b.J)if(g.hb()===c&&(g.nc()||f))return g.fa=e,g;a=await P(b,a,c,d,f);e="html5"===a.Kc?new self.ke(a.u,a,e):new self.me(a.u,a,e);b.J.push(e);return e}function tb(b,a){let c=b.Bb.get(a);if(!c){let d=null;c={dd:0,promise:new Promise(e=>d=e),resolve:d};b.Bb.set(a,c)}c.dd++}function yb(b,a){a||(a=b.Kd);return(b=b.Bb.get(a))?b.promise:Promise.resolve()}function T(b){if(0<b.Qa.size)u(b);else for(const a of b.J)if(!a.I&&!a.U()){u(b);break}}
function Pb(b,a,c,d){k(b,"trigger",{type:a,tag:c,aiid:d})}function Fb(b){b.Uc||(b.Uc=!0,Promise.resolve().then(()=>Qb(b)))}function Qb(b){const a={};for(const [c,d]of b.la)a[c]=d.map(e=>e.gb());k(b,"fxstate",{fxstate:a});b.Uc=!1}
async function Ib(b,a,c){if(3!==c){var d=a.bufferOriginalUrl,e=a.bufferUrl,f=a.bufferType,g=a.isMusic,h=a.tag,n=a.isLooping,q=a.volume,p=a.playbackTime;if(!g||1!==c)if(g||2!==c){c=null;try{c=await ub(b,d,e,f,h,g)}catch(z){console.error("[Construct] Audio: error loading audio state: ",z);return}b=c;(d=a.pan)?(Q(b,!0),e=b.F,f=d.pos,b.Xa[0]=f[0],b.Xa[1]=f[1],b.Xa[2]=f[2],f=d.orient,b.Wa[0]=f[0],b.Wa[1]=f[1],b.Wa[2]=f[2],e.setPosition(...b.Xa),e.setOrientation(...b.Wa),b.sa[0]=d.cia,b.sa[1]=d.coa,b.sa[2]=
d.cog,e.coneInnerAngle=d.cia,e.coneOuterAngle=d.coa,e.coneOuterGain=d.cog,b.qa=d.uid):Q(b,!1);b=c;d=a.stereoPan;"number"!==typeof d?R(b,!1):(R(b,!0),wb(b,d));c.Play(n,q,p,0);a.isPlaying||c.jb();c.Cc(a)}}}function Kb(b){console.error("[Audio] Offline rendering error: ",b)}
self.fb=class extends self.Ba{constructor(b){super(b,"audio");this.Ra=this.g=null;this.Tb=this.Rc=!1;this.za=()=>{if(!this.Rc){var a=this.g;"suspended"===a.state&&a.resume&&a.resume();var c=a.createBuffer(1,220,22050),d=a.createBufferSource();d.buffer=c;d.connect(a.destination);d.start(0);"running"===a.state&&this.Tb&&(this.Rc=!0,window.removeEventListener("pointerup",this.za,!0),window.removeEventListener("touchend",this.za,!0),window.removeEventListener("click",this.za,!0),window.removeEventListener("keydown",
this.za,!0),this.Tb=!1)}};this.ka=[];this.J=[];this.$=null;this.Kd="";this.Md=new Set;this.Ld=-1;this.Bb=new Map;this.$b=1;this.va=!1;this.bd=0;this.kc=1;this.Pc=0;this.Od="HRTF";this.zd="inverse";this.Pd=600;this.Nd=1E4;this.Rd=1;this.aa=[0,0,0];this.Fd=this.dc=!1;this.Ud=this.s.re();this.la=new Map;this.Qa=new Set;this.Gd=this.Uc=!1;this.Xc="";this.Ia=null;self.C3Audio_OnMicrophoneStream=(a,c)=>{this.Ia&&this.Ia.disconnect();this.Xc=c.toLowerCase();this.Ia=this.g.createMediaStreamSource(a);this.Ia.connect(Mb(this,
this.Xc))};this.Rb=null;self.C3Audio_GetOutputStream=()=>{this.Rb||(this.Rb=this.g.createMediaStreamDestination(),this.Ra.connect(this.Rb));return this.Rb.stream};self.C3Audio_DOMInterface=this;t(this,[["create-audio-context",a=>qb(this,a)],["play",a=>sb(this,a)],["stop",a=>{a=a.tag;for(const c of S(this,a))c.Da()}],["stop-all",()=>{for(const a of this.J)a.Da()}],["set-paused",a=>{const c=a.tag;a=a.paused;for(const d of S(this,c))a?d.jb():d.Jb();T(this)}],["set-volume",a=>{const c=a.tag;a=a.vol;for(const d of S(this,
c))U(d,a)}],["fade-volume",a=>xb(this,a)],["set-master-volume",a=>{this.$b=a.vol;this.Ra.gain.value=this.$b}],["set-muted",a=>{const c=a.tag;a=a.isMuted;for(const d of S(this,c))Rb(d,a)}],["set-silent",a=>{this.va=a.isSilent;this.s.Kb(this.va);for(const c of this.J)c.Ob()}],["set-looping",a=>{const c=a.tag;a=a.isLooping;for(const d of S(this,c))d.vc(a)}],["set-playback-rate",a=>zb(this,a)],["set-stereo-pan",a=>{const c=a.tag;a=a.p;for(const d of S(this,c))R(d,!0),wb(d,a)}],["seek",a=>Ab(this,a)],
["preload",a=>Bb(this,a)],["unload",a=>Cb(this,a)],["unload-all",()=>{for(const a of this.ka)a.j();this.ka.length=0}],["set-suspended",a=>{a=a.isSuspended;!a&&this.g.resume&&this.g.resume();for(const c of this.J)c.wc(a);a&&this.g.suspend&&this.g.suspend()}],["add-effect",a=>Db(this,a)],["set-effect-param",a=>{const c=a.index,d=a.param,e=a.value,f=a.ramp,g=a.time;a=this.la.get(a.tag);!a||0>c||c>=a.length||(a[c].Y(d,e,f,g),Fb(this))}],["remove-effects",a=>{a=a.tag.toLowerCase();const c=this.la.get(a);
if(c&&c.length){for(const d of c)d.j();this.la.delete(a);Eb(this,a)}}],["tick",a=>{this.kc=a.timeScale;this.Pc=a.gameTime;this.Ld=a.tickCount;if(0!==this.bd)for(var c of this.J)c.Fa();!(c=a.listenerPos)||this.aa[0]===c[0]&&this.aa[1]===c[1]&&this.aa[2]===c[2]||(this.aa[0]=c[0],this.aa[1]=c[1],this.aa[2]=c[2],this.g.listener.setPosition(c[0],c[1],c[2]));for(const d of a.instPans){a=d.uid;for(const e of this.J)e.qa===a&&vb(e,d.x,d.y,d.angle)}}],["load-state",a=>Gb(this,a)],["offline-render-audio",a=>
Jb(this,a)],["offline-render-finish",()=>{this.g.resume()}]])}V(){return this.g}oa(){return this.Ra}Hb(){return this.va}Ea(b){this.s.Ea(b)}Na(b){this.s.Na(b)}Oa(){for(var b of this.Qa)b.Oa();b=this.g.currentTime;for(var a of this.J)a.Oa(b);a=this.J.filter(c=>!c.I&&!c.U()).map(c=>c.gb());k(this,"state",{tickCount:this.Ld,outputLatency:this.g.outputLatency||0,audioInstances:a,analysers:[...this.Qa].map(c=>({tag:c.fa,index:c.Hd,peak:c.Ya,rms:c.Qd,binCount:c.l.frequencyBinCount,freqBins:c.Ed}))});0===
a.length&&0===this.Qa.size&&this.Ub&&(this.s.Qe(this.Vd),this.Ub=!1)}static xe(b){return b*pb}static ld(b){return Math.max(Math.min(Math.pow(10,b/20),1),0)}static ue(b){return Math.log(Math.max(Math.min(b,1),0))/Math.log(10)*20}};self.ha.Aa(self.fb);"use strict";function Lb(b){b.Yb||(b.Yb=b.Bc());return b.Yb}self.gd=class{constructor(b,a,c,d,e){this.u=b;this.Xe=a;this.Ka=c;this.R=d;this.Ue=e;this.Kc="";this.Yb=null}j(){this.Yb=this.u=null}Bc(){}V(){return this.u.V()}qc(){return this.Xe}hb(){return this.Ka}pc(){return this.R}Ca(){return this.Ue}ga(){}};
"use strict";
self.je=class extends self.gd{constructor(b,a,c,d,e){super(b,a,c,d,e);this.Kc="html5";this.M=new Audio;this.M.crossOrigin="anonymous";this.M.autoplay=!1;this.M.preload="auto";this.vb=this.wb=null;this.M.addEventListener("canplaythrough",()=>!0);this.Ab=this.V().createGain();this.yb=null;this.M.addEventListener("canplay",()=>{this.wb&&(this.wb(),this.vb=this.wb=null);!this.yb&&this.M&&(this.yb=this.V().createMediaElementSource(this.M),this.yb.connect(this.Ab))});this.onended=null;this.M.addEventListener("ended",()=>
{if(this.onended)this.onended()});this.M.addEventListener("error",f=>{console.error(`[Construct] Audio '${this.Ka}' error: `,f);this.vb&&(this.vb(f),this.vb=this.wb=null)})}j(){Ob(this.u,this);this.Ab.disconnect();this.Ab=null;this.yb.disconnect();this.yb=null;this.M&&!this.M.paused&&this.M.pause();this.M=this.onended=null;super.j()}Bc(){return new Promise((b,a)=>{this.wb=b;this.vb=a;this.M.src=this.Ka})}T(){return this.M}ga(){return this.M.duration}};"use strict";
async function Sb(b){if(b.Ga)return b.Ga;var a=b.u.s;if("cordova"===a.A&&a.nd(b.Ka)&&a.Vb)b.Ga=await a.Gb(b.Ka);else{a=await fetch(b.Ka);if(!a.ok)throw Error(`error fetching audio data: ${a.status} ${a.statusText}`);b.Ga=await a.arrayBuffer()}}async function Tb(b){if(b.ja)return b.ja;b.ja=await Nb(b.u,b.Ga,b.We);b.Ga=null}
self.le=class extends self.gd{constructor(b,a,c,d,e,f){super(b,a,c,d,e);this.Kc="webaudio";this.ja=this.Ga=null;this.We=!!f}j(){Ob(this.u,this);this.ja=this.Ga=null;super.j()}async Bc(){try{await Sb(this),await Tb(this)}catch(b){console.error(`[Construct] Failed to load audio '${this.Ka}': `,b)}}ga(){return this.ja?this.ja.duration:0}};"use strict";let Ub=0;
function Q(b,a){a=!!a;b.sb!==a&&(b.sb=a,b.sb?(R(b,!1),b.F||(b.F=b.V().createPanner(),b.F.panningModel=b.u.Od,b.F.distanceModel=b.u.zd,b.F.refDistance=b.u.Pd,b.F.maxDistance=b.u.Nd,b.F.rolloffFactor=b.u.Rd),b.G.disconnect(),b.G.connect(b.F),b.F.connect(b.oa())):(b.F.disconnect(),b.G.disconnect(),b.G.connect(b.oa())))}
function R(b,a){a=!!a;b.Wb!==a&&(b.Wb=a,b.Wb?(Q(b,!1),b.ea=b.V().createStereoPanner(),b.G.disconnect(),b.G.connect(b.ea),b.ea.connect(b.oa())):(b.ea.disconnect(),b.ea=null,b.G.disconnect(),b.G.connect(b.oa())))}function wb(b,a){b.Wb&&b.$c!==a&&(b.ea.pan.value=a,b.$c=a)}function U(b,a){b.La=a;b.G.gain.cancelScheduledValues(0);b.pb=-1;b.G.gain.value=b.rc()}function Rb(b,a){a=!!a;b.Sa!==a&&(b.Sa=a,b.Ob())}
function vb(b,a,c,d){if(b.sb){var e=b.Xa,f=b.Wa,g=Math.cos(d);d=Math.sin(d);if(e[0]!==a||e[1]!==c||0!==e[2])e[0]=a,e[1]=c,e[2]=0,b.F.setPosition(...e);if(f[0]!==g||f[1]!==d||0!==f[2])f[0]=g,f[1]=d,f[2]=0,b.F.setOrientation(...f)}}function V(b){return b.Vc?b.u.Pc:performance.now()/1E3}
self.hd=class{constructor(b,a,c){this.u=b;this.O=a;this.fa=c;this.Pb=Ub++;this.G=this.V().createGain();this.G.connect(this.oa());this.F=null;this.sb=!1;this.Xa=[0,0,0];this.Wa=[0,0,0];this.sa=[0,0,0];this.ea=null;this.Wb=!1;this.$c=0;this.I=!0;this.X=this.ta=this.K=!1;this.La=1;this.Sa=!1;this.ma=1;b=this.u.bd;this.Vc=1===b&&!this.Ca()||2===b;this.pb=this.qa=-1;this.Td=!1}j(){this.O=this.u=null;this.F&&(this.F.disconnect(),this.F=null);this.ea&&(this.ea.disconnect(),this.ea=null);this.G.disconnect();
this.G=null}V(){return this.u.V()}oa(){return Mb(this.u,this.fa)}qc(){return this.O.qc()}hb(){return this.O.hb()}pc(){return this.O.pc()}Ca(){return this.O.Ca()}U(){}nc(){}IsPlaying(){return!this.I&&!this.K&&!this.U()}Ma(){}ga(){return this.O.ga()}Play(){}Da(){}jb(){}Jb(){}Oa(b){-1!==this.pb&&b>=this.pb&&(this.pb=-1,this.Td&&this.Da(),Pb(this.u,"fade-ended",this.fa,this.Pb))}rc(){const b=this.La;return isFinite(b)?b:0}Hb(){return this.u.Hb()}Ob(){}vc(){}Fa(){}uc(){}wc(){}sc(){}gb(){var b=this.Pb,
a=this.fa,c=this.ga(),d=this.La,e=this.IsPlaying();if(this.F){var f=this.F;f={pos:this.Xa,orient:this.Wa,cia:f.coneInnerAngle,coa:f.coneOuterAngle,cog:f.coneOuterGain,uid:this.qa}}else f=null;return{aiid:b,tag:a,duration:c,volume:d,isPlaying:e,playbackTime:this.Ma(),playbackRate:this.ma,uid:this.qa,bufferOriginalUrl:this.qc(),bufferUrl:"",bufferType:this.pc(),isMusic:this.Ca(),isLooping:this.X,isMuted:this.Sa,resumePosition:this.sc(),pan:f,stereoPan:this.ea?this.$c:null}}Cc(b){var a=b.playbackRate;
this.ma!==a&&(this.ma=a,this.Fa());Rb(this,b.isMuted)}};"use strict";
self.ke=class extends self.hd{constructor(b,a,c){super(b,a,c);this.O.Ab.connect(this.G);this.O.onended=()=>this.Ec()}j(){this.Da();this.O.Ab.disconnect();super.j()}T(){return this.O.T()}Ec(){this.I=!0;this.qa=-1;Pb(this.u,"ended",this.fa,this.Pb)}U(){return this.T().ended}nc(){return this.I?!0:this.U()}Ma(){let b=this.T().currentTime;this.X||(b=Math.min(b,this.ga()));return b}Play(b,a,c){const d=this.T();1!==d.playbackRate&&(d.playbackRate=1);d.loop!==b&&(d.loop=b);U(this,a);d.muted&&(d.muted=!1);
if(d.currentTime!==c)try{d.currentTime=c}catch(e){console.warn(`[Construct] Exception seeking audio '${this.O.hb()}' to position '${c}': `,e)}this.u.Ea(d);this.K=this.I=!1;this.X=b;this.ma=1}Da(){const b=this.T();b.paused||b.pause();this.u.Na(b);this.I=!0;this.K=!1;this.qa=-1}jb(){if(!(this.K||this.I||this.U())){var b=this.T();b.paused||b.pause();this.u.Na(b);this.K=!0}}Jb(){!this.K||this.I||this.U()||(this.u.Ea(this.T()),this.K=!1)}Ob(){this.T().muted=this.Sa||this.Hb()}vc(b){b=!!b;this.X!==b&&(this.X=
b,this.T().loop=b)}Fa(){let b=this.ma;this.Vc&&(b*=this.u.kc);try{this.T().playbackRate=b}catch(a){console.warn(`[Construct] Unable to set playback rate '${b}':`,a)}}uc(b){if(!this.I&&!this.U())try{this.T().currentTime=b}catch(a){console.warn(`[Construct] Error seeking audio to '${b}': `,a)}}sc(){return this.Ma()}wc(b){b?this.IsPlaying()?(this.T().pause(),this.ta=!0):this.ta=!1:this.ta&&(this.u.Ea(this.T()),this.ta=!1)}};"use strict";function W(b){b.o&&b.o.disconnect();b.o=null;b.kb=null}
self.me=class extends self.hd{constructor(b,a,c){super(b,a,c);this.o=null;this.bc=d=>this.Ec(d);this.Qc=!0;this.kb=null;this.P=this.cc=this.ec=0;this.Yc=1}j(){this.Da();W(this);this.bc=null;super.j()}Ec(b){this.K||this.ta||b.target!==this.kb||(this.I=this.Qc=!0,this.qa=-1,W(this),Pb(this.u,"ended",this.fa,this.Pb))}U(){return!this.I&&this.o&&this.o.loop||this.K?!1:this.Qc}nc(){return!this.o||this.I?!0:this.U()}Ma(){let b;b=this.K?this.P:this.cc+(V(this)-this.ec)*this.ma;this.X||(b=Math.min(b,this.ga()));
return b}Play(b,a,c,d){this.Yc=1;U(this,a);W(this);this.o=this.V().createBufferSource();this.o.buffer=this.O.ja;this.o.connect(this.G);this.kb=this.o;this.o.onended=this.bc;this.o.loop=b;this.o.start(d,c);this.K=this.I=this.Qc=!1;this.X=b;this.ma=1;this.ec=V(this);this.cc=c}Da(){if(this.o)try{this.o.stop(0)}catch(b){}this.I=!0;this.K=!1;this.qa=-1}jb(){this.K||this.I||this.U()||(this.P=this.Ma(),this.X&&(this.P%=this.ga()),this.K=!0,this.o.stop(0))}Jb(){!this.K||this.I||this.U()||(W(this),this.o=
this.V().createBufferSource(),this.o.buffer=this.O.ja,this.o.connect(this.G),this.kb=this.o,this.o.onended=this.bc,this.o.loop=this.X,U(this,this.La),this.Fa(),this.o.start(0,this.P),this.ec=V(this),this.cc=this.P,this.K=!1)}rc(){return super.rc()*this.Yc}Ob(){this.Yc=this.Sa||this.Hb()?0:1;U(this,this.La)}vc(b){b=!!b;this.X!==b&&(this.X=b,this.o&&(this.o.loop=b))}Fa(){let b=this.ma;this.Vc&&(b*=this.u.kc);this.o&&(this.o.playbackRate.value=b)}uc(b){this.I||this.U()||(this.K?this.P=b:(this.jb(),this.P=
b,this.Jb()))}sc(){return this.P}wc(b){b?this.IsPlaying()?(this.ta=!0,this.P=this.Ma(),this.X&&(this.P%=this.ga()),this.o.stop(0)):this.ta=!1:this.ta&&(W(this),this.o=this.V().createBufferSource(),this.o.buffer=this.O.ja,this.o.connect(this.G),this.kb=this.o,this.o.onended=this.bc,this.o.loop=this.X,U(this,this.La),this.Fa(),this.o.start(0,this.P),this.ec=V(this),this.cc=this.P,this.ta=!1)}Cc(b){super.Cc(b);this.P=b.resumePosition}};"use strict";function X(b){return b.g.createGain()}
function Y(b,a,c,d,e){a.cancelScheduledValues(0);if(0===e)a.value=c;else switch(b=b.g.currentTime,e+=b,d){case 0:a.setValueAtTime(c,e);break;case 1:a.setValueAtTime(a.value,b);a.linearRampToValueAtTime(c,e);break;case 2:a.setValueAtTime(a.value,b),a.exponentialRampToValueAtTime(c,e)}}class Z{constructor(b){this.u=b;this.g=b.V();this.Hd=-1;this.R=this.fa="";this.m=null}j(){this.g=null}N(){}S(){}gb(){return{type:this.R,tag:this.fa,params:this.m}}}
self.ce=class extends Z{constructor(b,a,c,d,e,f,g){super(b);this.R="filter";this.m=[a,c,d,e,f,g];this.v=X(this);this.i=X(this);this.i.gain.value=g;this.h=X(this);this.h.gain.value=1-g;this.C=this.g.createBiquadFilter();this.C.type=a;this.C.frequency.value=c;this.C.detune.value=d;this.C.Q.value=e;this.C.gain.vlaue=f;this.v.connect(this.C);this.v.connect(this.h);this.C.connect(this.i)}j(){this.v.disconnect();this.C.disconnect();this.i.disconnect();this.h.disconnect();super.j()}S(b){this.i.disconnect();
this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.v}Y(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.m[5]=a;Y(this,this.i.gain,a,c,d);Y(this,this.h.gain,1-a,c,d);break;case 1:this.m[1]=a;Y(this,this.C.frequency,a,c,d);break;case 2:this.m[2]=a;Y(this,this.C.detune,a,c,d);break;case 3:this.m[3]=a;Y(this,this.C.Q,a,c,d);break;case 4:this.m[4]=a,Y(this,this.C.gain,a,c,d)}}};
self.ae=class extends Z{constructor(b,a,c,d){super(b);this.R="delay";this.m=[a,c,d];this.v=X(this);this.i=X(this);this.i.gain.value=d;this.h=X(this);this.h.gain.value=1-d;this.xb=X(this);this.W=this.g.createDelay(a);this.W.delayTime.value=a;this.ob=X(this);this.ob.gain.value=c;this.v.connect(this.xb);this.v.connect(this.h);this.xb.connect(this.i);this.xb.connect(this.W);this.W.connect(this.ob);this.ob.connect(this.xb)}j(){this.v.disconnect();this.i.disconnect();this.h.disconnect();this.xb.disconnect();
this.W.disconnect();this.ob.disconnect();super.j()}S(b){this.i.disconnect();this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.v}Y(b,a,c,d){const e=self.fb.ld;switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.m[2]=a;Y(this,this.i.gain,a,c,d);Y(this,this.h.gain,1-a,c,d);break;case 4:this.m[1]=e(a);Y(this,this.ob.gain,e(a),c,d);break;case 5:this.m[0]=a,Y(this,this.W.delayTime,a,c,d)}}};
self.$d=class extends Z{constructor(b,a,c,d){super(b);this.R="convolution";this.m=[c,d];this.xd=this.wd="";this.v=X(this);this.i=X(this);this.i.gain.value=d;this.h=X(this);this.h.gain.value=1-d;this.nb=this.g.createConvolver();this.nb.normalize=c;this.nb.buffer=a;this.v.connect(this.nb);this.v.connect(this.h);this.nb.connect(this.i)}j(){this.v.disconnect();this.nb.disconnect();this.i.disconnect();this.h.disconnect();super.j()}S(b){this.i.disconnect();this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.v}Y(b,
a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0),this.m[1]=a,Y(this,this.i.gain,a,c,d),Y(this,this.h.gain,1-a,c,d)}}gb(){const b=super.gb();b.bufferOriginalUrl=this.wd;b.bufferUrl="";b.bufferType=this.xd;return b}};
self.de=class extends Z{constructor(b,a,c,d,e,f){super(b);this.R="flanger";this.m=[a,c,d,e,f];this.v=X(this);this.h=X(this);this.h.gain.value=1-f/2;this.i=X(this);this.i.gain.value=f/2;this.qb=X(this);this.qb.gain.value=e;this.W=this.g.createDelay(a+c);this.W.delayTime.value=a;this.B=this.g.createOscillator();this.B.frequency.value=d;this.L=X(this);this.L.gain.value=c;this.v.connect(this.W);this.v.connect(this.h);this.W.connect(this.i);this.W.connect(this.qb);this.qb.connect(this.W);this.B.connect(this.L);
this.L.connect(this.W.delayTime);this.B.start(0)}j(){this.B.stop(0);this.v.disconnect();this.W.disconnect();this.B.disconnect();this.L.disconnect();this.h.disconnect();this.i.disconnect();this.qb.disconnect();super.j()}S(b){this.i.disconnect();this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.v}Y(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.m[4]=a;Y(this,this.i.gain,a/2,c,d);Y(this,this.h.gain,1-a/2,c,d);break;case 6:this.m[1]=a/1E3;Y(this,this.L.gain,a/1E3,
c,d);break;case 7:this.m[2]=a;Y(this,this.B.frequency,a,c,d);break;case 8:this.m[3]=a/100,Y(this,this.qb.gain,a/100,c,d)}}};
self.fe=class extends Z{constructor(b,a,c,d,e,f,g){super(b);this.R="phaser";this.m=[a,c,d,e,f,g];this.v=X(this);this.h=X(this);this.h.gain.value=1-g/2;this.i=X(this);this.i.gain.value=g/2;this.C=this.g.createBiquadFilter();this.C.type="allpass";this.C.frequency.value=a;this.C.detune.value=c;this.C.Q.value=d;this.B=this.g.createOscillator();this.B.frequency.value=f;this.L=X(this);this.L.gain.value=e;this.v.connect(this.C);this.v.connect(this.h);this.C.connect(this.i);this.B.connect(this.L);this.L.connect(this.C.frequency);
this.B.start(0)}j(){this.B.stop(0);this.v.disconnect();this.C.disconnect();this.B.disconnect();this.L.disconnect();this.h.disconnect();this.i.disconnect();super.j()}S(b){this.i.disconnect();this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.v}Y(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.m[5]=a;Y(this,this.i.gain,a/2,c,d);Y(this,this.h.gain,1-a/2,c,d);break;case 1:this.m[0]=a;Y(this,this.C.frequency,a,c,d);break;case 2:this.m[1]=a;Y(this,this.C.detune,a,c,d);
break;case 3:this.m[2]=a;Y(this,this.C.Q,a,c,d);break;case 6:this.m[3]=a;Y(this,this.L.gain,a,c,d);break;case 7:this.m[4]=a,Y(this,this.B.frequency,a,c,d)}}};self.ee=class extends Z{constructor(b,a){super(b);this.R="gain";this.m=[a];this.l=X(this);this.l.gain.value=a}j(){this.l.disconnect();super.j()}S(b){this.l.disconnect();this.l.connect(b)}N(){return this.l}Y(b,a,c,d){const e=self.fb.ld;switch(b){case 4:this.m[0]=e(a),Y(this,this.l.gain,e(a),c,d)}}};
self.he=class extends Z{constructor(b,a){super(b);this.R="stereopan";this.m=[a];this.l=this.g.createStereoPanner();this.l.pan.value=a}j(){this.l.disconnect();super.j()}S(b){this.l.disconnect();this.l.connect(b)}N(){return this.l}Y(b,a,c,d){a=Math.min(Math.max(a/100,-1),1);switch(b){case 9:this.m[0]=a,Y(this,this.l.pan,a,c,d)}}};
self.ie=class extends Z{constructor(b,a,c){super(b);this.R="tremolo";this.m=[a,c];this.l=X(this);this.l.gain.value=1-c/2;this.B=this.g.createOscillator();this.B.frequency.value=a;this.L=X(this);this.L.gain.value=c/2;this.B.connect(this.L);this.L.connect(this.l.gain);this.B.start(0)}j(){this.B.stop(0);this.B.disconnect();this.L.disconnect();this.l.disconnect();super.j()}S(b){this.l.disconnect();this.l.connect(b)}N(){return this.l}Y(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.m[1]=
a;Y(this,this.l.gain,1-a/2,c,d);Y(this,this.L.gain,a/2,c,d);break;case 7:this.m[0]=a,Y(this,this.B.frequency,a,c,d)}}};
self.ge=class extends Z{constructor(b,a,c){super(b);this.R="ringmod";this.m=[a,c];this.v=X(this);this.i=X(this);this.i.gain.value=c;this.h=X(this);this.h.gain.value=1-c;this.Db=X(this);this.Db.gain.value=0;this.B=this.g.createOscillator();this.B.frequency.value=a;this.B.connect(this.Db.gain);this.B.start(0);this.v.connect(this.Db);this.v.connect(this.h);this.Db.connect(this.i)}j(){this.B.stop(0);this.B.disconnect();this.Db.disconnect();this.v.disconnect();this.i.disconnect();this.h.disconnect();super.j()}S(b){this.i.disconnect();
this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.v}Y(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.m[1]=a;Y(this,this.i.gain,a,c,d);Y(this,this.h.gain,1-a,c,d);break;case 7:this.m[0]=a,Y(this,this.B.frequency,a,c,d)}}};
self.be=class extends Z{constructor(b,a,c,d,e,f){super(b);this.R="distortion";this.m=[a,c,d,e,f];this.v=X(this);this.jc=X(this);this.ic=X(this);b=d;.01>b&&(b=.01);this.jc.gain.value=b;this.ic.gain.value=Math.pow(1/b,.6)*e;this.i=X(this);this.i.gain.value=f;this.h=X(this);this.h.gain.value=1-f;this.lc=this.g.createWaveShaper();this.Mc=new Float32Array(65536);for(e=0;32768>e;++e)f=e/32768,b=1.05*c*a-a,d=0>f?-f:f,d<a?b=d:(d=1-Math.exp(-(1/b)*(d-a)),b=a+b*d),f=b*(0>f?-1:1),this.Mc[32768+e]=f,this.Mc[32768-
e-1]=-f;this.lc.curve=this.Mc;this.v.connect(this.jc);this.v.connect(this.h);this.jc.connect(this.lc);this.lc.connect(this.ic);this.ic.connect(this.i)}j(){this.v.disconnect();this.jc.disconnect();this.lc.disconnect();this.ic.disconnect();this.i.disconnect();this.h.disconnect();super.j()}S(b){this.i.disconnect();this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.v}Y(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0),this.m[4]=a,Y(this,this.i.gain,a,c,d),Y(this,this.h.gain,
1-a,c,d)}}};self.Zd=class extends Z{constructor(b,a,c,d,e,f){super(b);this.R="compressor";this.m=[a,c,d,e,f];this.l=this.g.createDynamicsCompressor();this.l.threshold.value=a;this.l.knee.value=c;this.l.ratio.value=d;this.l.attack.value=e;this.l.release.value=f}j(){this.l.disconnect();super.j()}S(b){this.l.disconnect();this.l.connect(b)}N(){return this.l}Y(){}};
self.Yd=class extends Z{constructor(b,a,c){super(b);this.R="analyser";this.m=[a,c];this.l=this.g.createAnalyser();this.l.fftSize=a;this.l.smoothingTimeConstant=c;this.Ed=new Float32Array(this.l.frequencyBinCount);this.Sd=new Uint8Array(a);this.Qd=this.Ya=0;b=this.u;b.Qa.add(this);T(b)}j(){this.u.Qa.delete(this);this.l.disconnect();super.j()}Oa(){this.l.getFloatFrequencyData(this.Ed);this.l.getByteTimeDomainData(this.Sd);const b=this.l.fftSize;let a=this.Ya=0;for(var c=0;c<b;++c){let d=(this.Sd[c]-
128)/128;0>d&&(d=-d);this.Ya<d&&(this.Ya=d);a+=d*d}c=self.fb.ue;this.Ya=c(this.Ya);this.Qd=c(Math.sqrt(a/b))}S(b){this.l.disconnect();this.l.connect(b)}N(){return this.l}Y(){}};
</script>
<script>'use strict';{window.C3_RegisterSW=async function C3_RegisterSW(){if(!navigator.serviceWorker)return;try{const reg=await navigator.serviceWorker.register("sw.js",{scope:"./"});console.info("Registered service worker on "+reg.scope)}catch(err){console.warn("Failed to register service worker: ",err)}}};
</script>
</body>
</html>